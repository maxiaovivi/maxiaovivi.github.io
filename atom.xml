<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>潇潇潇的博客</title>
  
  <subtitle>君应有语：“渺万里层云，千山暮雪，只影向谁去”</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-12-09T13:07:29.815Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>潇潇潇</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Obsdian + Hexo + Git == Prefect Blog</title>
    <link href="http://example.com/2023/12/09/Technology/software/Obsdian%20+%20Hexo%20+%20Git%20==%20Prefect%20Blog/"/>
    <id>http://example.com/2023/12/09/Technology/software/Obsdian%20+%20Hexo%20+%20Git%20==%20Prefect%20Blog/</id>
    <published>2023-12-09T12:15:54.289Z</published>
    <updated>2023-12-09T13:07:29.815Z</updated>
    
    <content type="html"><![CDATA[<p><img src="images/justin-lim-tloFnD-7EpI-unsplash%201.jpg" alt=""></p><p><img src="/images/justin-lim-tloFnD-7EpI-unsplash%201.jpg" alt=""></p>]]></content>
    
    
    <summary type="html"> 通过多种软件进行博客管理，以免乱糟糟的</summary>
    
    
    
    <category term="计算机技术 软件" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF-%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="软件使用" scheme="http://example.com/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>RCNN</title>
    <link href="http://example.com/2023/03/29/Technology/DeepLearning/RCNN/"/>
    <id>http://example.com/2023/03/29/Technology/DeepLearning/RCNN/</id>
    <published>2023-03-29T02:38:13.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="区域卷积神经网络（R-CNN，Region-based-Convolutional-Neural-Networks）">区域卷积神经网络（R-CNN，Region-based Convolutional Neural Networks）</h2><p>是一种用于目标检测任务的深度学习方法。目标检测任务需要同时定位和分类图像中的物体。R-CNN 通过使用区域提议方法生成潜在的目标物体边界框，然后使用卷积神经网络 (CNN) 提取特征，最后使用支持向量机 (SVM) 或其他分类器对物体进行分类。R-CNN 是一种两阶段的目标检测方法，它在 2014 年首次被提出，开创了一系列基于区域的目标检测方法。</p><p>R-CNN 的核心思想是在图像中生成一系列潜在的目标边界框（或称为物体提议），然后使用卷积神经网络对这些边界框进行特征提取，最后用一个分类器对这些特征进行分类。这种方法结合了深度学习提取的图像特征以及传统计算机视觉算法生成的物体提议，以实现更精确的目标检测。</p><h3 id="R-CNN-方法的主要步骤如下：">R-CNN 方法的主要步骤如下：</h3><ol><li>区域提议：R-CNN 使用一种称为选择性搜索（Selective Search）的方法生成潜在的目标边界框。选择性搜索是一种自底向上的聚类方法，根据图像中相邻像素的颜色、纹理、亮度等相似性，将图像划分为多个区域。然后通过合并这些区域以及它们之间的相似性，生成一系列潜在的目标边界框。</li><li>CNN 特征提取：对于每个生成的边界框，R-CNN 首先将其调整为固定大小，然后将其输入到预训练的卷积神经网络中以提取特征。原始的 R-CNN 使用 AlexNet 作为特征提取器，但随后的改进版本可以使用其他更复杂的网络，如 VGG 或 ResNet。</li><li>分类和回归：提取到的特征将被输入到一个支持向量机 (SVM) 分类器以进行分类。此外，R-CNN 还使用一个线性回归器对边界框的位置和大小进行微调，以更精确地定位目标物体。</li></ol><p>尽管 R-CNN 在目标检测任务中取得了显著的改进，但它存在一些主要的缺点。首先，R-CNN 的计算效率较低，因为它需要对每个边界框单独进行特征提取，这在实践中可能需要大量的计算资源。此外，R-CNN 需要使用多个模型（区域提议、CNN、SVM 和边界框回归器）进行训练和推理，这使得整个流程变得复杂。</p><p>为了解决这些问题，研究人员提出了一系列改进的 R-CNN 方法，包括 Fast R-CNN 和 Faster R-CNN。</p><p>Fast R-CNN 是 R-CNN 的一个改进版本，它提高了目标检测的速度和效率。Fast R-CNN 的主要创新之处在于引入了兴趣区域池化（RoI Pooling）层，将多个边界框的特征提取过程合并到一个共享的卷积特征图中。这样，只需要对整个图像进行一次卷积操作，就可以为所有边界框提取特征。此外，Fast R-CNN 使用单个网络同时进行分类和边界框回归，从而简化了训练和推理过程。</p><p>尽管 Fast R-CNN 提高了计算效率，但它仍然依赖于选择性搜索来生成区域提议，这一过程仍然是计算密集型的。为了解决这个问题，研究人员提出了 Faster R-CNN，它在 Fast R-CNN 的基础上引入了一种名为区域提议网络（RPN，Region Proposal Network）的新方法。RPN 是一种全卷积神经网络，它直接在卷积特征图上学习生成物体提议，从而极大地提高了区域提议的速度和效率。通过将 RPN 与 Fast R-CNN 结合，Faster R-CNN 实现了端到端的目标检测，并在速度和精度方面取得了显著改进。</p><p>随着研究的深入，基于区域的目标检测方法不断发展。例如，Mask R-CNN 在 Faster R-CNN 的基础上添加了一个分割分支，以实现目标检测和实例分割的同时进行。此外，许多其他的目标检测方法也借鉴了 R-CNN 的基本思想，如 RetinaNet 和 YOLO 系列。</p><p>总之，R-CNN 是一种具有划时代意义的目标检测方法，它通过将深度学习与传统计算机视觉技术相结合，实现了显著的性能改进。R-CNN 及其改进版本 Fast R-CNN、Faster R-CNN 等方法在计算机视觉领域产生了深远影响，为后续的研究和应用奠定了基础。然而，尽管这些方法在许多情况下表现良好，但它们在处理大规模和复杂场景的目标检测任务时仍面临挑战。例如，在密集目标检测、小目标检测以及具有多尺度变化的场景中，R-CNN 及其变种可能表现不佳。为了解决这些问题，研究人员不断探索</p><p>新的方法和技术。</p><ol><li>多尺度特征融合：为了解决多尺度问题，研究人员提出了一种名为特征金字塔网络（FPN，Feature Pyramid Network）的方法。FPN 通过自顶向下和自底向上的路径融合多尺度特征，从而生成一个金字塔结构的特征层次。这种方法可以有效地处理不同尺度的目标，并提高检测精度。</li><li>锚框设计：锚框（Anchor boxes）是一种预定义的边界框模板，用于生成物体提议。通过设计不同尺寸和长宽比的锚框，可以提高对不同形状和大小目标的检测性能。YOLO 和 SSD 等单阶段目标检测方法在锚框设计方面做了很多工作，以提高检测速度和精度。</li><li>数据增强：为了提高模型的泛化能力，研究人员使用数据增强技术，如图像翻转、缩放、裁剪等，来扩展训练数据。通过在训练过程中引入多样性，可以提高模型对不同场景和视角的鲁棒性。</li><li>损失函数设计：损失函数是训练过程中优化的目标，它决定了模型的性能和泛化能力。通过设计更合适的损失函数，可以提高模型在特定任务上的性能。例如，Focal Loss 是一种为解决类别不平衡问题而设计的损失函数，它在 RetinaNet 中得到了应用。</li><li>端到端训练：为了简化训练过程并提高效率，研究人员尝试将整个目标检测流程集成到一个端到端的网络中。这种方法可以避免多个独立模型之间的复杂交互，并提高训练和推理速度。</li></ol><p>总之，R-CNN 及其相关方法在目标检测领域产生了深远的影响。通过不断地改进和创新，研究人员正在努力解决计算机视觉中的各种挑战。随着深度学习技术的发展，我们可以期待在目标检测和其他计算机视觉任务中实现更高的精度和更快的速度。以下是一些当前研究和发展趋势：</p><ol><li>无锚框方法：为了进一步简化目标检测流程并提高效率，一些研究人员开始探索无锚框的目标检测方法。这些方法摒弃了传统的锚框设计，转而通过密集预测或点集表示来直接预测目标物体的位置和类别。例如，CenterNet 和 FCOS 是两种采用无锚框方法的目标检测算法。</li><li>弱监督和半监督学习：在许多实际应用中，标注目标检测数据可能非常昂贵和耗时。为了解决这个问题，研究人员正在研究弱监督和半监督学习方法，这些方法可以利用较少的标注数据或者部分标注数据进行训练。这将有助于降低数据标注成本，并使目标检测技术更广泛地应用于实际场景。</li><li>领域自适应：目标检测模型在不同领域之间的迁移能力是一个重要的研究方向。为了解决领域差异带来的性能下降问题，研究人员正在开发领域自适应技术，使模型能够在不同领域间进行有效迁移。</li><li>三维目标检测：随着自动驾驶和机器人领域的发展，三维目标检测变得越来越重要。研究人员正在开发新的方法和技术，以实现从三维点云数据中检测和定位目标物体。</li><li>集成深度学习和传统计算机视觉方法：虽然深度学习在许多计算机视觉任务中取得了巨大成功，但传统计算机视觉方法在某些场景下仍具有优势。研究人员正在探索如何将深度学习和传统计算机视觉方法相结合，以实现更强大和鲁棒的目标检测算法。</li></ol><p>随着技术的发展，目标检测方法将在未来继续演进。深度学习和计算机视觉领域的研究人员正在努力解决现有方法的局限性，开发更快、更准确、更鲁棒的算法，以满足不断增长的实际需求。通过不断地创新和改进，我们可以期待在未来的目标检测任务中实现更多的突破。</p><ol><li><p>跨模态目标检测：在许多实际应用场景中，如无人驾驶、安防监控等，可能需要从不同类型的传感器（如光学相机、红外相机、激光雷达等）获取数据。跨模态目标检测方法旨在利用多种类型的传感器数据来提高目标检测的性能。这方面的研究涉及到数据融合、特征提取和多模态学习等关键问题。</p></li><li><p>可解释性与可视化：深度学习模型通常被认为是“黑盒子”，很难理解其内部工作原理。为了提高模型的可解释性，研究人员正在开发可视化技术和解释性工具，以帮助用户理解模型如何进行目标检测。这将有助于建立用户对模型的信任，并在关键领域（如医疗诊断、安防等）实现深度学习技术的广泛应用。</p></li><li><p>鲁棒性与安全性：随着深度学习技术在关键领域的广泛应用，模型的鲁棒性和安全性变得越来越重要。研究人员正在研究如何提高目标检测模型在面对噪声、遮挡、对抗性样本等情况下的鲁棒性。此外，保护模型免受恶意攻击和数据泄露的风险也是一个重要的研究方向。</p></li><li><p>轻量化与压缩：为了在资源受限的环境（如嵌入式设备、移动设备等）中应用目标检测技术，研究人员正在开发轻量化和压缩的模型。这些模型旨在在保持较高检测性能的同时，降低模型的计算复杂性和内存占用。常见的轻量化技术包括知识蒸馏、网络剪枝、权值量化等。</p></li><li><p>无监督和自监督学习：为了减少对大量标注数据的依赖，研究人员正在探索无监督和自监督学习方法。这些方法试图利用未标注数据的内在结构和模式来训练目标检测模型。通过开发新的学习策略和损失函数，研究人员希望实现更高效和鲁棒的目标检测算法，同时降低对标注数据的需求。</p></li><li><p>动态目标检测：传统目标检测方法通常关注静态图像中的目标检测。然而，在许多实际应用中，如无人驾驶和机器人导航等，对动态目标的检测和跟踪至关重要。为了解决这一问题，研究人员正在开发基于视频序列的动态目标检测方法。这些方法需要处理时序信息，以实现对运动目标的准确检测和跟踪。</p></li><li><p>集成学习：集成学习方法通过结合多个模型的预测结果来提高性能。在目标检测领域，研究人员可以尝试将不同类型的检测器（如基于区域的方法、基于锚框的方法等）集成到一个系统中，以实现更高的检测精度和鲁棒性。</p></li><li><p>优化算法和训练策略：为了提高目标检测模型的训练效率和性能，研究人员需要不断优化算法和训练策略。这可能包括开发新的优化器、调整学习率策略、使用更先进的激活函数和归一化技术等。通过不断改进训练过程，研究人员可以实现更快速和更稳定的模型收敛。</p></li><li><p>更强大的硬件和计算资源：随着计算能力的不断提高，研究人员可以在更大规模的数据集上训练更复杂的目标检测模型。借助更强大的硬件和计算资源，研究人员可以在更短的时间内实现更精确的目标检测结果。</p></li><li><p>个性化和场景适应：针对特定应用场景或个体的目标检测方法可能具有更高的性能。为了实现个性化和场景适应的目标检测，研究人员可以根据实际需求定制模型结构、损失函数和训练策略等。这将有助于实现更高效和精确的目标检测应用。</p></li></ol><p>随着目标检测领域研究的不断深入，我们可以期待在未来看到更多创新和突破。通过将深度学习技术与其他计算机视觉方法相结合，研究人员将能够在各种实际场景中实现更精确、更快速、更鲁棒的目标检测结果。这些技术的发展将为计算机视觉领域带来新的应用和商业机会，推动自动驾驶、机器人、安防监控等行业的进步。</p><ol start="11"><li><p>边缘计算与实时目标检测：随着物联网（IoT）设备的普及，边缘计算成为目标检测领域的一个重要研究方向。通过在边缘设备上执行实时目标检测，可以降低对中心服务器的依赖，提高响应速度，减少数据传输和存储成本。研究人员需要开发更适合边缘设备的轻量级目标检测模型和算法，以满足实时性和资源约束的要求。</p></li><li><p>模型蒸馏与知识迁移：模型蒸馏是一种将大型神经网络的知识迁移到较小神经网络的技术。通过模型蒸馏，研究人员可以在保持较高性能的同时，降低模型的计算复杂性和内存占用。这将有助于将目标检测技术应用于资源受限的设备和场景。</p></li><li><p>长尾目标检测：在现实世界中，许多目标检测任务具有长尾分布，即某些类别的样本数量远多于其他类别。长尾目标检测需要在数据不平衡和稀有类别的情况下实现高性能。研究人员可以通过采样策略、损失函数设计、迁移学习等方法，提高长尾目标检测的性能。</p></li><li><p>跨视角和跨光照目标检测：实际应用中的目标检测任务可能涉及不同视角和光照条件。为了实现跨视角和跨光照的目标检测，研究人员需要开发更具鲁棒性的模型和特征表示，以应对视角变化和光照变化带来的挑战。</p></li><li><p>隐私保护和伦理考量：随着目标检测技术在公共安全、医疗诊断等领域的广泛应用，隐私保护和伦理问题变得越来越重要。研究人员需要在设计目标检测算法时充分考虑隐私和伦理问题，例如采用隐私保护的数据共享和学习方法，以及确保算法在各种场景下的公平性和可靠性。通过与伦理学家、法律专家等跨学科合作，研究人员可以确保目标检测技术的可持续发展和社会接受度。</p></li><li><p>多任务学习：多任务学习是一种让模型同时学习多个任务的方法，例如目标检测、语义分割和实例分割等。通过多任务学习，研究人员可以提高模型的泛化能力，减少过拟合风险，并降低训练成本。这将有助于实现更高效和灵活的目标检测应用。</p></li><li><p>零样本和少样本学习：零样本和少样本学习方法关注如何在没有或仅有很少标注数据的情况下训练模型。通过引入先验知识、元学习、迁移学习等技术，研究人员可以实现在标注数据稀缺的情况下进行有效的目标检测。</p></li><li><p>嵌入式和移动设备上的目标检测：为了满足嵌入式和移动设备上的实时目标检测需求，研究人员需要开发更轻量级、高效的模型和算法。这些模型需要在保持较高性能的同时，降低计算复杂性和内存占用，以适应有限的计算资源和功耗要求。</p></li><li><p>跨源领域自适应：在不同数据源之间进行目标检测时，可能会遇到领域偏移问题。为了解决这一问题，研究人员正在开发跨源领域自适应方法，以实现在不同数据源之间的有效迁移。这将有助于提高模型的泛化能力，扩大目标检测技术在实际应用中的适用范围。</p></li><li><p>基于图像的深度估计：在许多目标检测任务中，除了识别目标物体的类别和位置外，还需要估计物体距离摄像机的深度。研究人员正在开发基于单张图像的深度估计方法，以实现从二维图像中获得三维信息。通过结合目标检测和深度估计，可以实现更丰富的场景理解和更广泛的应用。</p></li></ol><p>总结来说，目标检测领域仍然存在许多挑战和机遇。随着研究的不断深入和技术的不断创新，我们可以预期在未来实现更为精确、高效和鲁棒的目标检测解决方案。这些进展将进一步推动计算机视觉技术在各种实际应用中的普及，为无人驾驶、智能监控、机器人技术、增强现实等领域带来革命性的变革。</p><ol><li>弱监督学习：弱监督学习方法关注如何在仅有部分或不完整标注数据的情况下训练模型。通过开发新的学习策略、损失函数和数据增强技术，研究人员可以在弱监督设置下实现有效的目标检测。</li><li>人机协同目标检测：为了提高目标检测的性能和可靠性，可以考虑将人类专家的知识和判断与自动目标检测模型相结合。研究人员可以设计人机协同的目标检测系统，利用人类专家的反馈和指导来优化模型的预测结果。</li><li>多视角目标检测：在许多实际应用场景中，目标物体可能从多个视角进行观察。为了实现更精确的目标检测和跟踪，研究人员可以开发多视角目标检测方法，综合利用来自不同视角的图像信息。</li><li>弹性目标检测：在实际应用中，目标物体可能会发生形变、遮挡等情况。为了应对这些挑战，研究人员需要开发具有弹性的目标检测方法，以适应物体形变和遮挡带来的影响。</li><li>三维目标检测：在许多实际应用场景中，如无人驾驶、机器人技术等，需要对三维空间中的目标物体进行检测和跟踪。研究人员正在开发基于深度学习的三维目标检测方法，利用立体视觉、激光雷达等传感器数据来实现高精度的三维目标检测。</li></ol><p>通过以上对目标检测领域的深入探讨，可以看出该领域仍然具有丰富的研究潜力和广泛的应用前景。未来的研究将继续关注性能、效率、鲁棒性等关键问题，并积极拓展到新的应用场景和数据类型。这将有助于进一步推动目标检测技术的发展，实现计算机视觉在各种领域的广泛应用。</p><ol><li>无监督和自监督学习：无监督学习关注在没有标注数据的情况下学习模型的能力，而自监督学习则利用数据本身的结构和属性来生成监督信号。研究人员可以探索无监督和自监督学习方法在目标检测领域的应用，以降低对标注数据的依赖，提高模型的泛化能力。</li><li>小目标检测：在许多实际应用中，目标物体可能在图像中占据很小的区域。这种小目标检测任务具有较高的难度，因为小目标在图像中的特征可能不够明显或容易受到噪声的干扰。研究人员需要开发专门针对小目标检测的方法，以提高这类任务的性能。</li><li>空间关系建模：在目标检测中，目标物体之间可能存在一定的空间关系。为了实现更高的检测精度，研究人员可以尝试在模型中显式地建模这些空间关系，以便更好地捕捉目标物体之间的相互作用。</li><li>负样本挖掘与难样本处理：在目标检测任务中，负样本（即非目标物体区域）通常远多于正样本（目标物体区域）。有效地挖掘和利用负样本信息可以提高模型的性能。此外，处理难样本（例如遮挡、形变等情况下的目标物体）也是提高目标检测性能的关键。研究人员可以探索更好的负样本挖掘和难样本处理方法，以实现更高的目标检测性能。</li><li>模型可解释性与可视化：深度学习模型往往被认为是黑箱，其内部工作原理难以理解。为了提高目标检测模型的可解释性，研究人员可以开发新的可视化和解释方法，以揭示模型的内部结构和特征学习过程。这将有助于理解模型的优缺点，为进一步优化模型提供依据。</li></ol><p>以上讨论展示了目标检测领域的广泛研究方向和挑战，这些方向将继续推动计算机视觉技术的发展。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;区域卷积神经网络（R-CNN，Region-based-Convolutional-Neural-Networks）&quot;&gt;区域卷积神经网络（R-CNN，Region-based Convolutional Neural Networks）&lt;/h2&gt;
&lt;p&gt;是一种用于</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>archlinux下的微信安装</title>
    <link href="http://example.com/2023/03/26/Technology/ComputerScience/install-wechat/"/>
    <id>http://example.com/2023/03/26/Technology/ComputerScience/install-wechat/</id>
    <published>2023-03-26T05:03:09.000Z</published>
    <updated>2023-04-26T17:31:14.000Z</updated>
    
    <content type="html"><![CDATA[<h1>archlinux微信安装</h1><h2 id="1-安装Wine">1.安装Wine</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解除注释在/etc/pacman.conf中的[multilab]</span></span><br><span class="line">[multilib]</span><br><span class="line">Include = /etc/pacman.d/mirrorlist</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">之后可以安装wine</span></span><br><span class="line">sudo pacman -Syu</span><br><span class="line">sudo pacman -S wine</span><br></pre></td></tr></table></figure><h2 id="2-安装WeChat">2.安装WeChat</h2><p>首先，安装基于Wine的应用程序管理器winetricks：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S winetricks</span><br></pre></td></tr></table></figure><p>接下来，创建一个新的Wine前缀（一个独立的Wine环境）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat WINEARCH=win32 winecfg</span><br></pre></td></tr></table></figure><p>你可以将<code>~/.wechat</code>替换为你喜欢的路径。这将创建一个新的32位Wine环境。</p><p>然后，使用winetricks安装WeChat所需的组件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat winetricks msxml3 riched20</span><br></pre></td></tr></table></figure><p>现在，从官方网站下载WeChat安装程序（请注意，官方网站可能会更改下载链接，请检查官方网站以获取最新链接）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O WeChatSetup.exe https://dldir1.qq.com/weixin/Windows/WeChatSetup.exe</span><br></pre></td></tr></table></figure><p>使用Wine运行安装程序：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat wine WeChatSetup.exe</span><br></pre></td></tr></table></figure><h2 id="3-运行WeChat">3.运行WeChat</h2><p>要运行WeChat，你需要指定前面创建的Wine前缀并运行安装在其中的WeChat程序。例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat wine &quot;C:\Program Files\Tencent\WeChat\WeChat.exe&quot;</span><br></pre></td></tr></table></figure><h2 id="4-创建脚本方便快速运行">4.创建脚本方便快速运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch ~/wechat.sh</span><br><span class="line">vim ~/wechat.sh</span><br></pre></td></tr></table></figure><p>在脚本文件中，输入以下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">WINEPREFIX=~/.wechat wine &quot;C:\Program Files\Tencent\WeChat\WeChat.exe&quot;</span><br></pre></td></tr></table></figure><p>确保替换<code>~/.wechat</code>为你在前面步骤中创建的Wine前缀路径。</p><p>保存并退出编辑器。</p><p>为脚本文件添加可执行权限，以便可以从命令行运行它：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ~/wechat.sh</span><br></pre></td></tr></table></figure><h2 id="5-添加中文字体">5.添加中文字体</h2><p>首先，安装微软雅黑字体。你可以从Windows系统中复制以下字体文件：</p><ul><li><p>msyh.ttc</p></li><li><p>msyhbd.ttc</p></li></ul><p>把字体文件复制到Wine前缀的<code>Fonts</code>文件夹中，可以使用命令也可以直接手动复制</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /path/to/msyh*.ttc ~/.wechat/drive_c/windows/Fonts/</span><br></pre></td></tr></table></figure><p>使用winetricks安装微软雅黑字体：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat winetricks msyh</span><br></pre></td></tr></table></figure><p>安装Wine字体设置工具<code>winetricks</code>（如果尚未安装）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S winetricks</span><br></pre></td></tr></table></figure><p>使用<code>winetricks</code>运行Wine注册表编辑器<code>regedit</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=~/.wechat winetricks regedit</span><br></pre></td></tr></table></figure><p>在注册表编辑器中，导航至以下路径</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_CURRENT_USER\Software\Tencent\WeChat</span><br></pre></td></tr></table></figure><p>在右侧窗格中，找到名为<code>Font</code>的字符串值。如果没有找到，请右键单击空白区域，选择“新建”&gt;“字符串值”，并将其命名为“Font”。</p><p>双击<code>Font</code>字符串值，然后在“值数据”框中输入以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">微软雅黑, 12</span><br></pre></td></tr></table></figure><p>请注意，这里的字体名称必须与你在Wine环境中安装的字体名称匹配。你可以根据需要更改字体大小（这里是12）。</p><p>点击“确定”以保存设置，然后关闭注册表编辑器。</p><p>重启电脑，即安装成功。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;archlinux微信安装&lt;/h1&gt;
&lt;h2 id=&quot;1-安装Wine&quot;&gt;1.安装Wine&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;</summary>
      
    
    
    
    <category term="计算机技术 软件" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF-%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="archlinux1" scheme="http://example.com/tags/archlinux1/"/>
    
  </entry>
  
  <entry>
    <title>调用谷歌API实现划词翻译</title>
    <link href="http://example.com/2023/03/25/Technology/ComputerScience/word_translate/"/>
    <id>http://example.com/2023/03/25/Technology/ComputerScience/word_translate/</id>
    <published>2023-03-25T15:45:44.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>环境：archlinux ，其余linux系统类似</p><h2 id="安装依赖">安装依赖</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S xsel</span><br><span class="line">sudo pacman -S translate-shell</span><br><span class="line">sudo pacman -S libnotify</span><br></pre></td></tr></table></figure><h2 id="脚本书写">脚本书写</h2><h3 id="创建脚本">创建脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch word_translate.sh</span><br><span class="line">chmod +x word_translate.sh</span><br><span class="line">vim word_tranlate.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">while true; do</span><br><span class="line">    # 获取选定的文本</span><br><span class="line">    selected_text=$(xsel -o)</span><br><span class="line"></span><br><span class="line">    # 删除特殊符号，仅保留字母、数字和空格</span><br><span class="line">    selected_text=$(echo &quot;$selected_text&quot; | sed &#x27;s/[^a-zA-Z0-9[:space:]]//g&#x27;)</span><br><span class="line"></span><br><span class="line">    # 判断选定的文本是否为空</span><br><span class="line">    if [ -n &quot;$selected_text&quot; ] &amp;&amp; [ &quot;$selected_text&quot; != &quot;$previous_selected_text&quot; ]; then</span><br><span class="line">        # 等待短暂延迟（如0.3秒），以确保用户完成文本选择</span><br><span class="line">        sleep 0.3</span><br><span class="line"></span><br><span class="line">        # 再次获取选定的文本，以确认是否发生了变化</span><br><span class="line">        latest_selected_text=$(xsel -o)</span><br><span class="line">        latest_selected_text=$(echo &quot;$latest_selected_text&quot; | sed &#x27;s/[^a-zA-Z0-9[:space:]]//g&#x27;)</span><br><span class="line"></span><br><span class="line">        # 如果文本未发生变化，则进行翻译</span><br><span class="line">        if [ &quot;$latest_selected_text&quot; = &quot;$selected_text&quot; ]; then</span><br><span class="line">            # 使用 translate-shell 翻译选定的文本，并设置超时时间（如5秒）</span><br><span class="line">            translation=$(timeout 5s trans -brief &quot;:zh-CN&quot; &lt;&lt;&lt; &quot;$selected_text&quot; 2&gt;/dev/null)</span><br><span class="line"></span><br><span class="line">            # 检查翻译是否成功</span><br><span class="line">            if [ $? -eq 0 ]; then</span><br><span class="line">                # 以通知形式显示翻译结果</span><br><span class="line">                notify-send &quot;划词翻译&quot; &quot;$translation&quot;</span><br><span class="line">            else</span><br><span class="line">                notify-send &quot;划词翻译&quot; &quot;翻译超时或出错&quot;</span><br><span class="line">            fi</span><br><span class="line"></span><br><span class="line">            # 存储当前选定的文本，以避免重复翻译</span><br><span class="line">            previous_selected_text=$selected_text</span><br><span class="line">        fi</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    # 暂停一段时间，以免占用过多资源</span><br><span class="line">    sleep 0.5</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="运行脚本">运行脚本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./word_translate.sh</span><br></pre></td></tr></table></figure><h2 id="运行效果">运行效果</h2><p><img src="https://s2.loli.net/2023/03/25/w2g8MXVfepQ94zc.png" alt="image-20230326001948203"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;环境：archlinux ，其余linux系统类似&lt;/p&gt;
&lt;h2 id=&quot;安装依赖&quot;&gt;安装依赖&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;lin</summary>
      
    
    
    
    <category term="计算机技术" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="计算机技术" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>对抗样本生成方法</title>
    <link href="http://example.com/2023/03/21/Technology/DeepLearning/chuqi/"/>
    <id>http://example.com/2023/03/21/Technology/DeepLearning/chuqi/</id>
    <published>2023-03-21T07:08:46.000Z</published>
    <updated>2023-12-09T11:37:31.522Z</updated>
    
    <content type="html"><![CDATA[<h1>对抗样本生成方法</h1><h2 id="为什么会产生对抗样本？">为什么会产生对抗样本？</h2><p>2013年，Szegedy等人首次提出针对深度学习场景下的对抗样本生成算法–<a href="https://arxiv.org/abs/1312.6199">BFGS</a>，作者认为，深度神经网络所具有的强大的非线性表达能力和模型的过拟合是可能产生对抗性样本原因之一。2014年，Goodfellow等人（包括Szegedy）对该问题进行了更深层次的研究，它们认为高维空间下深度神经网络的线性线性行为是导致该问题的根本原因。并提出<a href="https://arxiv.org/abs/1412.6572">FGSM</a>算法。<a href="https://github.com/lisa-lab/pylearn2/tree/master/pylearn2/scripts/papers/maxout">代码复现链接</a>。</p><p><img src="https://s2.loli.net/2023/03/20/TkeiAjqp3Jdg9tI.png" alt="image-20230320222100698"></p><p>在实际问题当中由于我们分类器输出的特征精度有限，通常为8bits，16bits等。以8bits为例，当输入的信息小于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>256</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{256}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">256</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>就会丢失掉该信息、例如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo>=</mo><mi>x</mi><mo>+</mo><mi>η</mi></mrow><annotation encoding="application/x-tex">\tilde{x}=x+η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>,如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>足够小的情况下(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>η</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∞</mi></msub><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">||η||_{\infty}&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>)，分类器无法将其区别开。</p><blockquote><p>给定一个向量 η，如果它的无穷范数（即向量中绝对值最大的元素）小于某个值 ε，那么这个向量 η 就满足某个条件。具体来说，这个条件是根据上下文而定的，可能是某个算法中的收敛条件，也可能是某个优化问题中的约束条件等等。</p><p>当把无穷范数换成二范数（即欧几里得范数）或一范数时，公式的含义也会有所不同。</p><p>如果将无穷范数换成二范数，那么公式就变成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>η</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>2</mn></msub><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">||η||_{2}&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>，表示向量 η 的二范数（即向量中各元素平方和的平方根）小于某个值 ε。这个条件通常用于最小化向量的误差或距离等问题。</p><p>如果将无穷范数换成一范数，那么公式就变成了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><mi>η</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∣</mi><mn>1</mn></msub><mo>&lt;</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">||η||_{1}&lt;\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>，表示向量 η 的一范数（即向量中各元素绝对值之和）小于某个值 ε。这个条件通常用于最小化向量的稀疏性等问题。</p></blockquote><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9Qc2hvOWRtN29ER3RnYmh1WjRDdFJqaWMzdUE0RElpYXJ4TjhuODU4TVNiN0puMHBqTnpSWGwzaWFvNnRlT2lhVVVLeHlqQjJ4VUhudTc5VGUzOFQ2Tm43b0EvNjQw?x-oss-process=image/format,png" alt="img"></p><p>假设我们有一个线性分类器 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>，它的输出可以通过如下线性方程表示：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">f(x) = w^T x + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9747em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span></p><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 是一个输入向量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 是权重向量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 是偏置项，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 表示矩阵转置。</p><p>现在，假设我们有一个样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>，它的正确分类为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>。我们可以表示这个样本的损失函数为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(f(x), y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 是损失函数。我们的目标是找到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 的值，使得对于所有样本，损失函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 的值最小。</p><p>现在，考虑一个对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span>，它通过向原始输入 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 添加一个微小的扰动而产生：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo>=</mo><mi>x</mi><mo>+</mo><mi>η</mi></mrow><annotation encoding="application/x-tex">\tilde{x} = x + η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span></span></p><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span> 是一个微小的扰动向量。我们希望找到一个合适的扰动 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>，使得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(\tilde{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 得到一个错误的分类。</p><p>将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span> 代入 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 的公式中，我们有：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>η</mi><mo stretchy="false">)</mo><mo>+</mo><mi>b</mi><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><msup><mi>w</mi><mi>T</mi></msup><mi>η</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">f(\tilde{x}) = w^T (x + η) + b = w^T x + w^T η + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9747em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0858em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span></p><p>我们可以观察到，如果我们选择 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span> 与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 成正比，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mi>T</mi></msup><mi>η</mi></mrow><annotation encoding="application/x-tex">w^T η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span> 的值将会很大。这意味着，通过调整 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">η</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span> 的大小和方向，我们可以使 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(\tilde{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 的值足够大，从而导致错误的分类。</p><h2 id="FGSM类">FGSM类</h2><h3 id="FSGM算法">FSGM算法</h3><p>FGSM算法的核心思想是，利用输入数据的梯度信息来进行扰动，从而生成对抗样本。具体来说，FGSM算法会计算输入数据关于损失函数的梯度，然后将梯度的符号作为扰动的方向，添加一个很小的扰动，从而生成对抗样本。FGSM算法的公式如下：</p><ol><li>给定输入样本*<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>*和真实标签<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y_{true}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</li><li>计算输入样本<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>关于损失函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span>的梯度，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla_x J(x, y_{true})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</li><li>计算梯度的符号，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>。</mtext></mrow><annotation encoding="application/x-tex">sign(\nabla_x J(x, y_{true}))。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord cjk_fallback">。</span></span></span></span></li><li>将符号作为扰动方向，添加一个很小的扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi><mo>∗</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\epsilon * sign(\nabla_x J(x, y_{true}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">ϵ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span></span></span></span>。</li><li>生成对抗样本:</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo>=</mo><mi>x</mi><mo>+</mo><mi>ϵ</mi><mo>∗</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>。</mtext></mrow><annotation encoding="application/x-tex">\tilde{x} = x + \epsilon * sign(\nabla_x J(x, y_{true}))。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">ϵ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord cjk_fallback">。</span></span></span></span></span></p><p>**伪代码示例：**用<a href="https://www.bilibili.com/video/BV14J411X7Bb/?spm_id_from=333.999.0.0&amp;vd_source=a0550d3457cb01d47cf52af889fed3d3">MNIST</a>数据集来验证</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fgsm_attack</span>(<span class="params">image, epsilon, data_grad</span>): <span class="comment">#输入图像，扰动因子，数据梯度</span></span><br><span class="line">    sign_data_grad = data_grad.sign()  <span class="comment">#用符号函数来取梯度方向</span></span><br><span class="line">    perturbed_image = image + epsilon * sign_data_grad <span class="comment">#核心公式</span></span><br><span class="line">    perturbed_image = torch.clamp(perturbed_image, <span class="number">0</span>, <span class="number">1</span>) <span class="comment">#输入张量大小限制</span></span><br><span class="line">    <span class="keyword">return</span> perturbed_image      <span class="comment">#返回对抗样本</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_adversarial_example</span>(<span class="params">model, device, image, label, epsilon</span>):   <span class="comment">#输入模型，设备型号，图片，真实标签，扰动因字</span></span><br><span class="line">    image = image.to(device) <span class="comment">#输入张量转移到指定设备上，避免重复运算</span></span><br><span class="line">    label = label.to(device)</span><br><span class="line"></span><br><span class="line">    image.requires_grad = <span class="literal">True</span> <span class="comment">#启用梯度计算</span></span><br><span class="line">    output = model(image)    <span class="comment">#模型前向传播后所得结果</span></span><br><span class="line">    loss = nn.CrossEntropyLoss()(output, label)  <span class="comment">#调用交叉熵损失函数</span></span><br><span class="line">    model.zero_grad()   <span class="comment">#所有参数的梯度清零，避免累加</span></span><br><span class="line">    loss.backward()     <span class="comment">#损失函数反向传播</span></span><br><span class="line"></span><br><span class="line">    data_grad = image.grad.data  <span class="comment">#图形梯度的实际数据</span></span><br><span class="line">    perturbed_image = fgsm_attack(image, epsilon, data_grad) </span><br><span class="line">    <span class="keyword">return</span> perturbed_image</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设您已经有了一个训练好的模型 model</span></span><br><span class="line"><span class="comment"># model = ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备数据</span></span><br><span class="line">transform = transforms.Compose([transforms.ToTensor()])<span class="comment">#将图像转换为pytorch的张量</span></span><br><span class="line">dataset = torchvision.datasets.MNIST(root=<span class="string">&#x27;./data&#x27;</span>, train=<span class="literal">False</span>, download=<span class="literal">True</span>, transform=transform)  <span class="comment">#这里只使用测试集，并将图像预处理应用到数据集上。</span></span><br><span class="line">dataloader = torch.utils.data.DataLoader(dataset, batch_size=<span class="number">1</span>, shuffle=<span class="literal">True</span>)    <span class="comment">#创建数据加载器的对象，数据集，批次大小，是否打乱</span></span><br><span class="line"></span><br><span class="line">device = torch.device(<span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>)    </span><br><span class="line">model.to(device)</span><br><span class="line">model.<span class="built_in">eval</span>()     <span class="comment">#将模式切换为评估模式，关闭模型在训练阶段启用的功能，如 dropout 和 batch normalization。</span></span><br><span class="line"></span><br><span class="line">epsilon = <span class="number">0.1</span>  <span class="comment">#扰动因子大小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> data, target <span class="keyword">in</span> dataloader:</span><br><span class="line">    <span class="comment"># 生成对抗样本</span></span><br><span class="line">    perturbed_data = generate_adversarial_example(model, device, data, target, epsilon)  <span class="comment">#调用之前定义的函数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用模型进行预测</span></span><br><span class="line">    output = model(perturbed_data) <span class="comment">#前向传播</span></span><br><span class="line">    _, pred = torch.<span class="built_in">max</span>(output, <span class="number">1</span>) <span class="comment">#找到模型输出（output）中的最大值，并获取其索引。这里，我们沿着第一个维度（dim=1）进行操作，即获取每个样本的最大概率对应的类别。pred 包含了模型的预测结果。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 检查模型的预测是否正确</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Original label:&quot;</span>, target.item()) <span class="comment">#打印原始标签</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Predicted label:&quot;</span>, pred.item())  <span class="comment">#打印预测的标签</span></span><br><span class="line">    <span class="keyword">break</span>   <span class="comment">#对单张图片进行测试就不遍历了</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="I-FGSM">I-FGSM</h3><p>ADVERSARIAL EXAMPLES IN THE PHYSICAL WORLD：<a href="https://arxiv.org/abs/1607.02533">论文链接</a>，<a href="https://github.com/BorealisAI/advertorch">代码链接</a></p><p><img src="https://s2.loli.net/2023/03/21/JnAHl4BxVgtMypN.png" alt="image-20230321120600704"></p><ol><li>对抗样本的更新：</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo>+</mo><mi>α</mi><mo>∗</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tilde{x}_{t+1} = \tilde{x}_{t} + \alpha * sign(\nabla_x J(\tilde{x}_{t}, y_{true}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> 表示第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 次迭代生成的对抗样本，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> 表示第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 次迭代生成的对抗样本，$\alpha $ 是每次迭代的扰动步长， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y_{true}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是输入图像的真实标签，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla_x J(\tilde{x}_{t}, y_{true})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 是损失函数关于第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 次迭代生成的对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的梯度。</p><ol start="2"><li>扰动投影：</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>c</mi><mi>l</mi><mi>i</mi><mi>p</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi>x</mi><mo>−</mo><mi>ϵ</mi><mo separator="true">,</mo><mi>x</mi><mo>+</mo><mi>ϵ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">clip(\tilde{x}_{t+1}, x - \epsilon, x + \epsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ϵ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ϵ</span><span class="mclose">)</span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>l</mi><mi>i</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">clip</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span></span></span></span> 函数用于将对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span>限制在允许的扰动范围内（即  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>−</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">x - \epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">x + \epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>之间）。这样可以确保对抗样本的扰动不会超过预设的 <em><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">ϵ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span></em>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">i_fgsm_attack</span>(<span class="params">image, epsilon, data_grad, num_iter, alpha</span>):</span><br><span class="line">    perturbed_image = image.clone()  <span class="comment"># 初始化对抗样本为原始输入图像</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_iter):  <span class="comment"># 迭代 num_iter 次</span></span><br><span class="line">        perturbed_image.requires_grad = <span class="literal">True</span>  <span class="comment"># 设置对抗样本的 requires_grad 属性为 True，以计算梯度</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 使用当前对抗样本计算损失函数的梯度</span></span><br><span class="line">        output = model(perturbed_image)</span><br><span class="line">        loss = criterion(output, label) <span class="comment">#这个是以及实例化了交叉熵函数</span></span><br><span class="line">        model.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        perturbed_grad = perturbed_image.grad.data</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 根据梯度更新对抗样本</span></span><br><span class="line">        perturbed_image = perturbed_image + alpha * perturbed_grad.sign()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将对抗样本投影回定义的扰动范围内</span></span><br><span class="line">        perturbation = torch.clamp(perturbed_image - image, <span class="built_in">min</span>=-epsilon, <span class="built_in">max</span>=epsilon)</span><br><span class="line">        perturbed_image = torch.clamp(image + perturbation, <span class="built_in">min</span>=<span class="number">0</span>, <span class="built_in">max</span>=<span class="number">1</span>).detach()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> perturbed_image</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>该论文还研究了扰动比例的概念：</strong></p><p>为了研究任意变换对对抗图像的影响，我们引入了扰动率的概念。可以将其描述为对抗图像的比例，这些图像在转换后不再被错误分类。</p><p>设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 表示原始的对抗样本集合，其中包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个对抗样本，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mn>1</mn></msub><mo separator="true">,</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>n</mi></msub></mrow></mrow><annotation encoding="application/x-tex">A = {\tilde{x}_1, \tilde{x}_2, ..., \tilde{x}_n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8623em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>。每个对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 都是通过攻击原始样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 获得的。</p><p>设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T(\tilde{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 表示对对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span> 施加的任意变换，例如旋转、缩放或平移等。</p><p>设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C(\tilde{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 表示对于对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>x</mi><mo>~</mo></mover></mrow><annotation encoding="application/x-tex">\tilde{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6679em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span></span></span></span>，模型的预测是否正确。如果预测正确，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">C(\tilde{x}) = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>；如果预测错误，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">C(\tilde{x}) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p><p>根据这些定义，我们可以计算变换 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 后被错误分类的对抗样本比例，即扰动率（Perturbation Rate, PR）：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mi>R</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>C</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><mi>n</mi></mfrac></mrow><annotation encoding="application/x-tex">PR(T) = \frac{\sum_{i=1}^n C(T(\tilde{x}_i))}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">PR</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.18em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.494em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6897em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>这个公式计算了变换 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 后，错误分类的对抗样本占总对抗样本的比例。扰动率越高，表明变换 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 对对抗样本的效果影响越大。注意，这个公式依赖于您的任务和模型，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mover accent="true"><mi>x</mi><mo>~</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C(\tilde{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 是根据模型的预测来计算的。</p><h3 id="MI-FGSM">MI-FGSM</h3><p>论文链接：<a href="https://arxiv.org/abs/1710.06081">Boosting Adversarial Attacks with Momentum</a></p><p>开源代码：<a href="https://github.com/dongyp13/Non-Targeted-Adversarial-Attacks">Non-Targeted-Adversarial-Attacks</a></p><p>​ <a href="https://github.com/dongyp13/Targeted-Adversarial-Attack">Targeted-Adversarial-Attack</a></p><p><img src="https://s2.loli.net/2023/03/21/XoZreWRdJ3CGABc.png" alt="image-20230321131251712"></p><blockquote><p>深度神经网络容易受到对抗样本的攻击，由于潜在的严重后果，这些算法对安全性造成了担忧。对抗性攻击是评估深度学习模型部署之前的鲁棒性的重要替代方法。但是，大多数现有的对抗攻击攻击黑箱模型的成功率很低。</p><p>为了解决这个问题，我们提出了一类基于动量的迭代算法来增强对抗性攻击。通过将动量项整合到攻击的迭代过程中，我们的方法可以稳定更新方向，并在迭代过程中摆脱不良的局部最大值，从而产生更具可传递性的对抗样本。为了进一步提高黑盒攻击的成功率，我们将动量迭代算法应用于一组模型，并证明具有强大防御能力的经过对抗训练的模型也容易受到我们的黑盒攻击的攻击。</p></blockquote><ol><li><p>初始化：选定一个原始输入样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 和对应的正确标签 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y_{true}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。设置最大扰动范围 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>，迭代步长 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>，迭代次数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><annotation encoding="application/x-tex">num_{iter}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 以及动量系数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span></span></span></span>。初始化对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mn>0</mn></msub><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\tilde{x}_0 = x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 和动量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">m_0 = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p></li><li><p>对于每次迭代 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t = 1, 2, ..., num_{iter}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，执行以下操作：</p></li></ol><p>​a. 计算损失函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">J(\tilde{x}_{t-1}, y_{true})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 关于当前对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span> 的梯度：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\nabla_x J(\tilde{x}_{t-1}, y_{true})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>​b. 更新动量：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>t</mi></msub><mo>=</mo><mi>μ</mi><mo>∗</mo><msub><mi>m</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mfrac><mrow><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo></mrow><mrow><mi mathvariant="normal">∣</mi><msub><mi mathvariant="normal">∇</mi><mi>x</mi></msub><mi>J</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>y</mi><mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow></msub><mo stretchy="false">)</mo><msub><mi mathvariant="normal">∣</mi><mn>1</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">m_t = \mu * m_{t-1} + \frac{\nabla_x J(\tilde{x}_{t-1}, y_{true})}{|\nabla_x J(\tilde{x}_{t-1}, y_{true})|_1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6597em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="mord mtight"><span class="mord mtight">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mathnormal mtight">x</span></span><span style="top:-3.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord mtight">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2025em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mord mtight"><span class="mord mtight">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">∇</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"></span><span class="mord mathnormal mtight">x</span></span><span style="top:-3.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord mtight">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2025em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span></span></span></span> 是动量系数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mo>⋅</mo><msub><mi mathvariant="normal">∣</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">|\cdot|_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示 L1 范数。</p><p>​c. 更新对抗样本：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo>=</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mi>α</mi><mo>∗</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>m</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tilde{x}_t = \tilde{x}_{t-1} + \alpha * sign(m_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8762em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p><p>​d. 将对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 限制在允许的扰动范围内：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo>=</mo><mi>c</mi><mi>l</mi><mi>i</mi><mi>p</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mi>t</mi></msub><mo separator="true">,</mo><mi>x</mi><mo>−</mo><mi>ϵ</mi><mo separator="true">,</mo><mi>x</mi><mo>+</mo><mi>ϵ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\tilde{x}_t = clip(\tilde{x}_t, x - \epsilon, x + \epsilon)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ϵ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ϵ</span><span class="mclose">)</span></span></span></span>。</p><ol start="3"><li>完成所有迭代后，输出最终的对抗样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>x</mi><mo>~</mo></mover><mrow><mi>n</mi><mi>u</mi><msub><mi>m</mi><mrow><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow></msub></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{x}_{num_{iter}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.918em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">x</span></span><span style="top:-3.35em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">~</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">u</span><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span></span></span></span>。</li></ol><p>MI-FGSM 算法在每次迭代中，都会根据损失函数的梯度和动量来更新对抗样本。动量的引入有助于沿着梯度的主要方向累积更新，从而提高收敛速度。同时，动量可以平滑梯度，避免陷入局部最小值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mi_fgsm_attack</span>(<span class="params">model, image, label, epsilon, alpha, num_iter, mu</span>):</span><br><span class="line">    <span class="comment"># 确保模型处于评估（推理）模式</span></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将输入图像和标签转移到相同的设备（例如 GPU）上</span></span><br><span class="line">    image = image.to(device)</span><br><span class="line">    label = label.to(device)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化对抗样本和动量，这个函数复制出来的张量没有梯度信息</span></span><br><span class="line">    adv_image = image.clone().detach()</span><br><span class="line">    momentum = torch.zeros_like(adv_image)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建损失函数（交叉熵损失）</span></span><br><span class="line">    criterion = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_iter):</span><br><span class="line">        <span class="comment"># 计算对抗样本的梯度</span></span><br><span class="line">        adv_image.requires_grad = <span class="literal">True</span></span><br><span class="line">        output = model(adv_image)</span><br><span class="line">        loss = criterion(output, label)</span><br><span class="line">        model.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        grad = adv_image.grad.data</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 更新动量</span></span><br><span class="line">        momentum = mu * momentum + grad / grad.norm(p=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 使用动量更新对抗样本</span></span><br><span class="line">        adv_image = adv_image.detach() + alpha * torch.sign(momentum)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 限制对抗样本在允许的扰动范围内</span></span><br><span class="line">        adv_image = torch.<span class="built_in">max</span>(torch.<span class="built_in">min</span>(adv_image, image + epsilon), image - epsilon)</span><br><span class="line">        adv_image = torch.clamp(adv_image, <span class="number">0</span>, <span class="number">1</span>)  <span class="comment"># 限制像素值在 [0, 1] 范围内</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> adv_image</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="PGD">PGD</h3><p><a href="https://arxiv.org/abs/1706.06083">论文地址</a></p><p><a href="https://github.com/MadryLab/mnist_challenge">代码链接</a></p><p><img src="https://s2.loli.net/2023/03/21/GKT2R7ehWucib6o.png" alt="image-20230321142130180"></p><blockquote><p>主要贡献</p><ol><li>我们对与该鞍点公式相对应的优化环境进行了仔细的实验研究。尽管其组成部分具有非凸性和非凹性，但我们发现根本的优化问题毕竟是可解决的。特别是，我们提供了有力的证据，证明一阶方法可以可靠地解决此问题。我们用来自真实分析的思想补充这些见解，以进一步激发投影梯度下降（PGD）作为通用的“一阶攻击”，即，利用有关网络的本地一阶信息的最强攻击。</li><li>我们探索了网络架构对对抗鲁棒性的影响，并发现模型能力在这里起着重要的作用。为了可靠地抵抗强大的对抗攻击，网络需要的容量要比仅正确分类良性样本的容量更大。这表明，鞍点问题的鲁棒决策边界比仅将良性数据点分开的决策边界要复杂得多。</li><li>基于以上见解，我们在MNIST和CIFAR10上训练了网络，这些网络可抵抗各种对抗性攻击。</li></ol></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PGD</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model</span>):</span><br><span class="line">        self.model = model</span><br><span class="line">        self.emb_backup = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">attack</span>(<span class="params">self, epsilon=<span class="number">1.</span>, alpha=<span class="number">0.3</span>, emb_name=<span class="string">&#x27;emb.&#x27;</span>, is_first_attack=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="keyword">for</span> name, param <span class="keyword">in</span> self.model.named_parameters():</span><br><span class="line">            <span class="keyword">if</span> param.requires_grad <span class="keyword">and</span> emb_name <span class="keyword">in</span> name:</span><br><span class="line">                <span class="keyword">if</span> is_first_attack:</span><br><span class="line">                    self.emb_backup[name] = param.data.clone()</span><br><span class="line">                norm = torch.norm(param.grad)</span><br><span class="line">                <span class="keyword">if</span> norm != <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> torch.isnan(norm):  <span class="comment">#我也不知道为毛typora不渲染成！=</span></span><br><span class="line">                    r_at = alpha * param.grad / norm</span><br><span class="line">                    param.data.add_(r_at)</span><br><span class="line">                    param.data</span><br><span class="line">                    param.data = self.project(name, param.data, epsilon)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">project</span>(<span class="params">self, param_name, param_data, epsilon</span>):</span><br><span class="line">        r = param_data - self.emb_backup[param_name]</span><br><span class="line">        <span class="keyword">if</span> torch.norm(r) &gt; epsilon:</span><br><span class="line">            r = epsilon * r / torch.norm(r)</span><br><span class="line">        <span class="keyword">return</span> self.emb_backup[param_name] + r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设你有一个简单的模型，如下所示：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleModel</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(SimpleModel, self).__init__()</span><br><span class="line">        self.emb = nn.Embedding(<span class="number">10</span>, <span class="number">3</span>)</span><br><span class="line">        self.linear = nn.Linear(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.emb(x)</span><br><span class="line">        x = self.linear(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个简单模型实例</span></span><br><span class="line">model = SimpleModel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 PGD 攻击实例</span></span><br><span class="line">pgd = PGD(model)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设你已经计算了模型的损失，并对损失进行了反向传播</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># 在更新参数之前，执行 PGD 攻击</span></span><br><span class="line">pgd.attack(epsilon=<span class="number">1.</span>, alpha=<span class="number">0.3</span>, emb_name=<span class="string">&#x27;emb.&#x27;</span>, is_first_attack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后，你可以像往常一样更新模型的参数</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>关于改进PGD的论文（还没来得及看）</p><ol><li>Zhang, D., Zhang, T., Lu, Y., Zhu, Z. &amp; Dong, B. You Only Propagate Once: Accelerating Adversarial Training via Maximal Principle.</li><li>Madry, A., Makelov, A., Schmidt, L., Tsipras, D. &amp; Vladu, A. Towards Deep Learning Models Resistant to Adversarial Attacks. arXiv:1706.06083 [cs, stat] (2019).</li><li>Zhu, C. et al. FreeLB: Enhanced Adversarial Training for Language Understanding. arXiv:1909.11764 [cs] (2019).</li><li>Shafahi, A. et al. Adversarial Training for Free! arXiv:1904.12843 [cs, stat] (2019).</li></ol><h2 id="C-W">C&amp;W</h2><p><a href="">论文地址</a></p><p><a href="https://github.com/carlini/nn_robust_attacks/blob/master/l2_attack.py">代码地址</a></p><p><img src="https://s2.loli.net/2023/03/21/J3UnQVy4Ma9g6oA.png" alt="image-20230321183157042"></p><p>C&amp;W攻击（Carlini &amp; Wagner攻击)是一种基于优化的对抗样本生成方法。该方法的目标是找到一个最小的扰动，使得机器学习模型产生错误的预测。C&amp;W攻击通过优化一个特定的目标函数来生成对抗样本。以下是算法的主要步骤和相关公式。</p><p>1.定义一个目标函数： C&amp;W攻击的核心是定义一个目标函数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>，以找到一个最小的扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>。目标函数如下所示：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>=</mo><mi>max</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mi>i</mi><mo mathvariant="normal">≠</mo><mi>t</mi></mrow></munder><mrow><mi>Z</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><msub><mo stretchy="false">)</mo><mi>i</mi></msub></mrow><mo>−</mo><mi>Z</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><msub><mo stretchy="false">)</mo><mi>t</mi></msub><mo separator="true">,</mo><mo>−</mo><mi>κ</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">f(x + \delta) = \max\left(\max_{i \neq t}{Z(x + \delta)_i} - Z(x + \delta)_t, -\kappa\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8882em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">−</span><span class="mord mathnormal">κ</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>是原始输入，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>是添加到输入的扰动，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>的真实类别，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Z(x+\delta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span></span></span></span>是模型在输入<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">x+\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>上的预测得分（通常为logits），<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">κ</span></span></span></span>是一个用于控制目标函数置信度的参数。</p><p>2.将问题转换为优化问题： 我们希望找到一个最小的扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>，使得<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>≤</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x+\delta) \leq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。这可以通过将其表示为以下优化问题来实现：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mi>δ</mi></munder><mtext>  </mtext><mtext>  </mtext><mi mathvariant="normal">∥</mi><mi>δ</mi><msub><mi mathvariant="normal">∥</mi><mn>2</mn></msub><mspace linebreak="newline"></mspace><mtext>s.t.</mtext><mtext>  </mtext><mtext>  </mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>≤</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\min_\delta \;\; \|\delta\|_2 \\\text{s.t.} \;\; f(x + \delta) \le 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.5021em;vertical-align:-0.7521em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.3479em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03785em;">δ</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7521em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∥</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">s.t.</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p><p>3.变量变换：</p><p>为了使问题更容易解决，我们可以对输入应用变量变换。我们可以定义一个新的变量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>，使得<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mi>tanh</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x&#x27; = \frac{1}{2}(\tanh(w) + 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop">tanh</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>。现在，我们的优化问题变为：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mi>w</mi></munder><mtext>  </mtext><mtext>  </mtext><msubsup><mrow><mo fence="true">∥</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mi>tanh</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>−</mo><mi>x</mi><mo fence="true">∥</mo></mrow><mn>2</mn><mn>2</mn></msubsup><mspace linebreak="newline"></mspace><mtext>s.t.</mtext><mtext>  </mtext><mtext>  </mtext><mi>f</mi><mrow><mo fence="true">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mi>tanh</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow><mo>≤</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\min_w \;\; \left\| \frac{1}{2}(\tanh(w) + 1) - x \right\|_2^2 \\\text{s.t.} \;\; f\left(\frac{1}{2}(\tanh(w) + 1)\right) \le 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.6537em;vertical-align:-0.9997em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.556em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.556em' height='2.400em' viewBox='0 0 556 2400'><path d='M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43zM367 15 v585 v1200 v585 c2.667,10,9.667,15,21,15c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v1200 v585 h43z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop">tanh</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">x</span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.556em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.556em' height='2.400em' viewBox='0 0 556 2400'><path d='M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43zM367 15 v585 v1200 v585 c2.667,10,9.667,15,21,15c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v1200 v585 h43z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.654em;"><span style="top:-1.7003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9997em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mord text"><span class="mord">s.t.</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop">tanh</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p><ol start="4"><li>使用优化算法求解： 在获得优化问题后，我们可以使用梯度下降类的优化算法（例如：L-BFGS、Adam等）来求解。</li><li>生成对抗样本： 通过求解优化问题，我们可以找到最优的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">w^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>，从而生成对抗样本。<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>x</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">(</mo><mi>tanh</mi><mo>⁡</mo><mo stretchy="false">(</mo><msup><mi>w</mi><mo>∗</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_{adv} = \frac{1}{2}(\tanh(w^*) + 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mop">tanh</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7387em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p></li></ol><h2 id="Deepfool">Deepfool</h2><p><a href="https://arxiv.org/abs/1511.04599">论文链接</a></p><p><a href="">代码链接</a></p><p><img src="https://s2.loli.net/2023/03/21/SwbQXCLyMiju9xH.png" alt="image-20230321183215270"></p><blockquote><p>先进的深度神经网络在许多图像分类任务上均取得了令人印象深刻的结果。但是，这些相同的体系结构已显示出对图像的细微的扰动是不稳定的。尽管此现象很重要，但尚未提出有效的方法来准确计算针对此类大规模数据集扰动的、最新分类器的鲁棒性。</p><p>在本文中，我们填补了这一空白，并提出了DeepFool算法，以有效地计算出欺骗深层网络的扰动，从而可靠地量化这些分类器的鲁棒性。大量的实验结果表明，在计算对抗性扰动和使分类器更健壮的任务上，我们的方法优于最新方法。</p></blockquote><ol><li><p>对于输入样本x，计算模型的预测：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>。</p></li><li><p>初始化扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>为零：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\delta = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p></li><li><p>对于每次迭代，在当前输入样本<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">x + \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>上线性化模型，然后求解最优扰动方向。在本轮迭代中，找到使得类别发生改变的最小扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>δ</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\delta^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>。具体来说，对于二分类问题，寻找最优扰动方向<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>δ</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\delta^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>可以通过解决以下优化问题实现：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><msup><mi>δ</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></munder><mtext>  </mtext><mfrac><mrow><mi mathvariant="normal">∣</mi><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>−</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mrow><mi mathvariant="normal">∥</mi><mi mathvariant="normal">∇</mi><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msub><mi mathvariant="normal">∥</mi><mn>2</mn></msub></mrow></mfrac><mspace linebreak="newline"></mspace><mtext>s.t.</mtext><mtext>  </mtext><mtext>  </mtext><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\min_{\delta^{(i)}} \; \frac{|\hat{f}(x + \delta) - \hat{f}(x)|}{\|\nabla \hat{f}(x)\|_2} \\\text{s.t.} \;\; \hat{f}(x + \delta) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.7328em;vertical-align:-1.0979em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.2586em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.822em;"><span style="top:-2.822em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8414em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6349em;"><span style="top:-2.1521em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∥∇</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0979em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.2079em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">s.t.</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p></li></ol><p>其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">\hat{f}(x) = f(x) - y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2079em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>是正确的类别。对于多分类问题，优化问题稍有不同，我们需要在所有的分类边界中找到最接近当前点的边界：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><msup><mi>δ</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></munder><mtext>  </mtext><mfrac><mrow><mi mathvariant="normal">∣</mi><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>k</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><mrow><mi mathvariant="normal">∥</mi><mi mathvariant="normal">∇</mi><mo stretchy="false">(</mo><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>k</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msub><mi mathvariant="normal">∥</mi><mn>2</mn></msub></mrow></mfrac><mspace linebreak="newline"></mspace><mtext>s.t.</mtext><mtext>  </mtext><mtext>  </mtext><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>k</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mover accent="true"><mi>f</mi><mo>^</mo></mover><mi>j</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\min_{\delta^{(i)}} \; \frac{|\hat{f}_k(x + \delta) - \hat{f}_j(x)|}{\|\nabla (\hat{f}_k(x) - \hat{f}_j(x))\|_2} \\\text{s.t.} \;\; \hat{f}_k(x + \delta) = \hat{f}_j(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.7689em;vertical-align:-1.134em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.2586em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.822em;"><span style="top:-2.822em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8414em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6349em;"><span style="top:-2.1521em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∥∇</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mord"><span class="mord">∥</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.134em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.2079em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">s.t.</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.244em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></p><p>其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>分别是当前类别和其他类别的索引。</p><ol start="4"><li>更新扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mo>=</mo><mi>δ</mi><mo>+</mo><msup><mi>δ</mi><mrow><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\delta = \delta + \delta^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>。</li><li>重复步骤3和4，直到达到预定的迭代次数，或者找到的扰动<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>已经导致了类别改变。</li><li>返回对抗样本：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><mo>=</mo><mi>x</mi><mo>+</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">x_{adv} = x + \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>。</li></ol><p>DeepFool算法的主要优点是生成的扰动较小，而且相对于其他方法，它更接近计算最优的对抗扰动。然而，它的缺点是算法相对复杂，计算成本较高。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;对抗样本生成方法&lt;/h1&gt;
&lt;h2 id=&quot;为什么会产生对抗样本？&quot;&gt;为什么会产生对抗样本？&lt;/h2&gt;
&lt;p&gt;2013年，Szegedy等人首次提出针对深度学习场景下的对抗样本生成算法–&lt;a href=&quot;https://arxiv.org/abs/1312.6199&quot;&gt;B</summary>
      
    
    
    
    <category term="深度学习" scheme="http://example.com/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="pytorch" scheme="http://example.com/tags/pytorch/"/>
    
    <category term="对抗样本" scheme="http://example.com/tags/%E5%AF%B9%E6%8A%97%E6%A0%B7%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>利用python提取古诗词json中特定字的诗词</title>
    <link href="http://example.com/2023/03/16/Lifestyle/Poetry/jsontiqu-md/"/>
    <id>http://example.com/2023/03/16/Lifestyle/Poetry/jsontiqu-md/</id>
    <published>2023-03-16T07:08:46.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="古诗词库下载">古诗词库下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/chinese-poetry/chinese-poetry</span><br></pre></td></tr></table></figure><h2 id="提取并输出到-md格式文件中">提取并输出到.md格式文件中</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;XXX.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    poems = json.load(f)</span><br><span class="line"></span><br><span class="line">result = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> poem <span class="keyword">in</span> poems:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;paragraphs&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> poem:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    content = <span class="string">&#x27;&#x27;</span>.join(poem[<span class="string">&#x27;paragraphs&#x27;</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;君&#x27;</span> <span class="keyword">in</span> content:</span><br><span class="line">        title = <span class="string">&quot;## &quot;</span> + poem[<span class="string">&#x27;title&#x27;</span>] + <span class="string">&quot;\n&quot;</span>  <span class="comment"># 将标题修改为二级标题</span></span><br><span class="line">        author = poem[<span class="string">&#x27;author&#x27;</span>] + <span class="string">&quot;\n&quot;</span>  <span class="comment"># 将作者名不加粗</span></span><br><span class="line">        content_lines = poem[<span class="string">&#x27;paragraphs&#x27;</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(content_lines)):</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;君&#x27;</span> <span class="keyword">in</span> content_lines[i]:</span><br><span class="line">                content_lines[i] = <span class="string">&#x27;**&#x27;</span> + content_lines[i] + <span class="string">&#x27;**&#x27;</span>  <span class="comment"># 将包含“君”的那一句加粗</span></span><br><span class="line">        content = <span class="string">&#x27;\n&#x27;</span>.join(content_lines)</span><br><span class="line">        result.append(title + author + <span class="string">&#x27;\n&#x27;</span> + content + <span class="string">&quot;\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;XXX&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.writelines(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;古诗词库下载&quot;&gt;古诗词库下载&lt;/h2&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td</summary>
      
    
    
    
    <category term="计算机技术" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="古诗词 python" scheme="http://example.com/tags/%E5%8F%A4%E8%AF%97%E8%AF%8D-python/"/>
    
  </entry>
  
  <entry>
    <title>git的基本使用</title>
    <link href="http://example.com/2023/03/09/Technology/ComputerScience/git/"/>
    <id>http://example.com/2023/03/09/Technology/ComputerScience/git/</id>
    <published>2023-03-09T02:39:11.000Z</published>
    <updated>2023-12-09T12:14:39.385Z</updated>
    
    <content type="html"><![CDATA[<h1>GIT的使用</h1><h2 id="为什么要使用git">为什么要使用git</h2><p>方便于版本的管理，没有一个好的代码开发流程，容易出现不可挽回的错误。记得那年夏天…</p><p>多人开发时你不知道别人改了什么，版本不统一，白忙活。</p><h2 id="git的安装">git的安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S git</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置用户名以及邮箱</span></span><br><span class="line"></span><br><span class="line">git config --global user.name &quot;yourname&quot;  #名称</span><br><span class="line">git config --global user.email 123456789@qq.com   #邮箱</span><br></pre></td></tr></table></figure><h2 id="git基本结构">git基本结构</h2><h3 id="组成部分">组成部分</h3><p>Git在本地有三个区域,工作目录(Working Diretort)，暂存区(Stage)，资源库(Repository),远端的git仓库(Remote Diretory)。</p><ul><li>Workspace：工作区，就是你平时存放项目代码的地方</li><li>Index / Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</li><li>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本</li><li>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</li></ul><h3 id="工作流程">工作流程</h3><ul><li>在工作目录中添加、修改文件；</li><li>将需要进行版本管理的文件放入暂存区域；</li><li>将暂存区域的文件提交到git仓库。</li></ul><h2 id="git的仓库搭建与使用">git的仓库搭建与使用</h2><p>WorkSpace通常就是你想用Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，但不要有中文。</p><h3 id="1-创建全新仓库或者克隆远方仓库">1.创建全新仓库或者克隆远方仓库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">本地创建</span></span><br><span class="line">git init</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">克隆远方仓库</span></span><br><span class="line">git clone [url]</span><br></pre></td></tr></table></figure><h3 id="2-文件操作">2.文件操作</h3><p>文件的状态</p><ul><li>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.</li><li>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件</li><li>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</li><li>Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">可以通过以下命令查询文件的具体状态</span></span><br><span class="line">git status [filename]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将文件纳入版本控制，也就是添加入暂存区</span></span><br><span class="line">git add .</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将暂存区的</span></span><br><span class="line">git commit -m &#x27;第一次提交&#x27;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">比较暂存区文件与工作区的区别</span></span><br><span class="line">git diff</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">回退版本</span></span><br><span class="line">git reset</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将文件从暂存区和工作区中删除</span></span><br><span class="line">git rm</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">移动或重命名工作区文件</span></span><br><span class="line">git mv</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#######################################</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">远程操作</span></span><br><span class="line">git remote</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从远程获取代码库</span></span><br><span class="line">git fetch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从远程下载代码并合并</span></span><br><span class="line">git pull</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">上传远程代码并合并</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h3 id="3-Git分支管理">3.Git分支管理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建分支</span></span><br><span class="line">git branch (branchname)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换分支</span></span><br><span class="line">git checkout (branchname)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">合并分支</span></span><br><span class="line">git merge</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Github使用">Github使用</h2><h3 id="添加远程仓库">添加远程仓库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add [shortname] [url]</span><br></pre></td></tr></table></figure><h3 id="添加秘钥">添加秘钥</h3><p>由于本地的仓库和Github仓库是通过SSH加密的，所以需要配置验证信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;XXX@XXX.com&quot;</span><br></pre></td></tr></table></figure><p>之后按照提示操作，默认回车就好</p><p>这个时候就会在</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.ssh/id_rsa.pub 生成密钥，复制即可</span><br></pre></td></tr></table></figure><p>此时在github的setting中找到SSH and GPG keys，选择New SSH key，将密钥粘贴进去就行了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;GIT的使用&lt;/h1&gt;
&lt;h2 id=&quot;为什么要使用git&quot;&gt;为什么要使用git&lt;/h2&gt;
&lt;p&gt;方便于版本的管理，没有一个好的代码开发流程，容易出现不可挽回的错误。记得那年夏天…&lt;/p&gt;
&lt;p&gt;多人开发时你不知道别人改了什么，版本不统一，白忙活。&lt;/p&gt;
&lt;h2 id=</summary>
      
    
    
    
    
    <category term="计算机技术 版本控制" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>seaship</title>
    <link href="http://example.com/2023/03/06/Technology/DeepLearning/seaship/"/>
    <id>http://example.com/2023/03/06/Technology/DeepLearning/seaship/</id>
    <published>2023-03-06T14:18:24.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1>在SeaShip数据集上验证YoloV5</h1><p>操作系统： ArchLinux</p><p>需要代理</p><h2 id="1-conda安装配置">1.conda安装配置</h2><p>已经完成的小伙伴可以直接跳过</p><h3 id="安装Anaconda">安装Anaconda</h3><h4 id="yay安装">yay安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S anaconda</span><br></pre></td></tr></table></figure><h4 id="激活Anaconda环境">激活Anaconda环境</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /opt/anaconda/bin/activate root</span><br></pre></td></tr></table></figure><h4 id="关闭Anaconda环境">关闭Anaconda环境</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /opt/anaconda/bin/deactivate root</span><br></pre></td></tr></table></figure><h3 id="Anaconda-常用命令">Anaconda 常用命令</h3><h4 id="管理Conda">管理Conda</h4><h5 id="检测Conda版本">检测Conda版本</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda --veriosn</span><br></pre></td></tr></table></figure><h5 id="升级当前版本的conda">升级当前版本的conda</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda update conda</span><br></pre></td></tr></table></figure><h4 id="管理环境">管理环境</h4><h5 id="查看环境目录">查看环境目录</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure><h5 id="创建环境">创建环境</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n （环境名） （包名）</span><br></pre></td></tr></table></figure><h5 id="打开环境">打开环境</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda activate （环境名）</span><br><span class="line">或</span><br><span class="line">source activate （环境名）</span><br></pre></td></tr></table></figure><h5 id="退出环境">退出环境</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source deactivate</span><br></pre></td></tr></table></figure><h5 id="卸载环境">卸载环境</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove --name （环境名） --all</span><br></pre></td></tr></table></figure><h5 id="将环境导入YAML文件当中">将环境导入YAML文件当中</h5><blockquote><p>分享代码时需要将自己的环境也同时分享，故应该将package的环境导入到environment.yaml中</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">导出conda环境，默认路径在主文件夹下</span></span><br><span class="line">conda env export &gt; environment.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">通过yaml信息创建环境</span></span><br><span class="line">conda env create -f emvironment.yaml  </span><br></pre></td></tr></table></figure><h4 id="管理包">管理包</h4><h5 id="查看包">查看包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda list</span><br></pre></td></tr></table></figure><h5 id="更新包">更新包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda upgrade --all</span><br></pre></td></tr></table></figure><h5 id="搜索包">搜索包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda search name</span><br></pre></td></tr></table></figure><h5 id="安装包">安装包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda install （包名）</span><br><span class="line">or</span><br><span class="line">pip install (包名)</span><br></pre></td></tr></table></figure><h5 id="卸载包">卸载包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda remove (包名)</span><br><span class="line">or</span><br><span class="line">pip uninstall (包名)</span><br></pre></td></tr></table></figure><h2 id="2-下载数据集">2.下载数据集</h2><h3 id="下载数据集">下载数据集</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#下载地址</span><br><span class="line">http://www.lmars.whu.edu.cn/prof_web/shaozhenfeng/datasets/SeaShips%287000%29.zip</span><br></pre></td></tr></table></figure><p>下载好的数据集有这样三个文件，Annotations是保留xml文件，JPEGImages是图像文件，ImageSets下有Main文件夹中含有四个文本文件。</p><p><img src="https://s2.loli.net/2023/03/06/BtfL49SE8Jz5xQl.png" alt="image-20230306225111388"></p><p><img src="https://s2.loli.net/2023/03/06/uj5aLW2ys1XbG6c.png" alt="image-20230306225129542"></p><h2 id="3-环境配置以及源码下载">3.环境配置以及源码下载</h2><h3 id="conda配置">conda配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda creat -n yolov5 python=3.8</span><br></pre></td></tr></table></figure><h3 id="下载yolov5源码">下载yolov5源码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ultralytics/yolov5.git</span><br><span class="line"></span><br><span class="line">cd yolov5</span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>成功安装界面</p><p><img src="https://s2.loli.net/2023/03/08/oP6vpAf5Yqk9siw.png" alt="image-20230308130642687"></p><h2 id="4-数据集格式转化">4.数据集格式转化</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd data</span><br></pre></td></tr></table></figure><p>将之前下载的数据集当中的Annotations与JPEGImage移动到该目录下</p><p><a href="http://xn--makedata-t39lp94aflf56kyp0aleb867s02za.py">在同级目录下创建makedata.py</a>，并运行：  （PS：记得改成自己的绝对路径，相对路径容易没有经验的同学容易报错还不知道怎么改）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">xml_file_path = <span class="string">&#x27;/home/自己的绝对路径/data/Annotations/&#x27;</span>       <span class="comment"># *********检查和自己的xml文件夹名称是否一致*********</span></span><br><span class="line">images_file_path = <span class="string">&#x27;/home/自己的绝对路径/data/JPEGImages/&#x27;</span>  <span class="comment"># *******检查和自己的图像文件夹名称是否一致********</span></span><br><span class="line"><span class="comment"># 最好不要用&quot;images&quot;作文件夹名字，因为后续会对图片进行划分，我命名的新文件夹叫&quot;images&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ******改成自己的类别名称***********</span></span><br><span class="line">classes = [<span class="string">&quot;ore carrier&quot;</span>, <span class="string">&quot;general cargo ship&quot;</span>, <span class="string">&quot;bulk cargo carrier&quot;</span>, <span class="string">&quot;container ship&quot;</span>, <span class="string">&quot;fishing boat&quot;</span>, <span class="string">&quot;passenger ship&quot;</span>]</span><br><span class="line"><span class="comment"># 数据集划分比例，训练集75%，验证集15%，测试集15%</span></span><br><span class="line">train_percent = <span class="number">0.7</span></span><br><span class="line">val_percent = <span class="number">0.15</span></span><br><span class="line">test_percent = <span class="number">0.15</span></span><br><span class="line"><span class="comment"># 此处不要改动，只是创一个临时文件夹</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/temp_labels/&#x27;</span>):</span><br><span class="line">    os.makedirs(<span class="string">&#x27;data/temp_labels/&#x27;</span>)</span><br><span class="line">txt_file_path = <span class="string">&#x27;data/temp_labels/&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">size, box</span>):</span><br><span class="line">    dw = <span class="number">1.</span> / size[<span class="number">0</span>]</span><br><span class="line">    dh = <span class="number">1.</span> / size[<span class="number">1</span>]</span><br><span class="line">    x = (box[<span class="number">0</span>] + box[<span class="number">1</span>]) / <span class="number">2.0</span></span><br><span class="line">    y = (box[<span class="number">2</span>] + box[<span class="number">3</span>]) / <span class="number">2.0</span></span><br><span class="line">    w = box[<span class="number">1</span>] - box[<span class="number">0</span>]</span><br><span class="line">    h = box[<span class="number">3</span>] - box[<span class="number">2</span>]</span><br><span class="line">    x = x * dw</span><br><span class="line">    w = w * dw</span><br><span class="line">    y = y * dh</span><br><span class="line">    h = h * dh</span><br><span class="line">    <span class="keyword">return</span> x, y, w, h</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_annotations</span>(<span class="params">image_name</span>):</span><br><span class="line">    in_file = <span class="built_in">open</span>(xml_file_path + image_name + <span class="string">&#x27;.xml&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line">    out_file = <span class="built_in">open</span>(txt_file_path + image_name + <span class="string">&#x27;.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line">    tree = ET.parse(in_file)</span><br><span class="line">    root = tree.getroot()</span><br><span class="line">    size = root.find(<span class="string">&#x27;size&#x27;</span>)</span><br><span class="line">    w = <span class="built_in">int</span>(size.find(<span class="string">&#x27;width&#x27;</span>).text)</span><br><span class="line">    h = <span class="built_in">int</span>(size.find(<span class="string">&#x27;height&#x27;</span>).text)</span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> root.<span class="built_in">iter</span>(<span class="string">&#x27;object&#x27;</span>):</span><br><span class="line">        <span class="comment"># difficult = obj.find(&#x27;difficult&#x27;).text</span></span><br><span class="line">        cls = obj.find(<span class="string">&#x27;name&#x27;</span>).text</span><br><span class="line">        <span class="comment"># if cls not in classes or int(difficult) == 1:</span></span><br><span class="line">        <span class="comment">#     continue</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> classes == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        cls_id = classes.index(cls)</span><br><span class="line">        xmlbox = obj.find(<span class="string">&#x27;bndbox&#x27;</span>)</span><br><span class="line">        b = (<span class="built_in">float</span>(xmlbox.find(<span class="string">&#x27;xmin&#x27;</span>).text), <span class="built_in">float</span>(xmlbox.find(<span class="string">&#x27;xmax&#x27;</span>).text),</span><br><span class="line">             <span class="built_in">float</span>(xmlbox.find(<span class="string">&#x27;ymin&#x27;</span>).text), <span class="built_in">float</span>(xmlbox.find(<span class="string">&#x27;ymax&#x27;</span>).text))</span><br><span class="line">        bb = convert((w, h), b)</span><br><span class="line">        out_file.write(<span class="built_in">str</span>(cls_id) + <span class="string">&quot; &quot;</span> + <span class="string">&quot; &quot;</span>.join([<span class="built_in">str</span>(a) <span class="keyword">for</span> a <span class="keyword">in</span> bb]) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">total_xml = os.listdir(xml_file_path)</span><br><span class="line">num_xml = <span class="built_in">len</span>(total_xml)  <span class="comment"># XML文件总数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_xml):</span><br><span class="line">    name = total_xml[i][:-<span class="number">4</span>]</span><br><span class="line">    convert_annotations(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># *********************************************** #</span></span><br><span class="line"><span class="comment">#  parent folder</span></span><br><span class="line"><span class="comment">#  --data</span></span><br><span class="line"><span class="comment">#  ----images</span></span><br><span class="line"><span class="comment">#       ----train</span></span><br><span class="line"><span class="comment">#       ----val</span></span><br><span class="line"><span class="comment">#       ----test</span></span><br><span class="line"><span class="comment">#  ----labels</span></span><br><span class="line"><span class="comment">#       ----train</span></span><br><span class="line"><span class="comment">#       ----val</span></span><br><span class="line"><span class="comment">#       ----test</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_dir</span>():</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/images/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/images/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/labels/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/labels/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/images/train/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/images/train&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/images/val/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/images/val/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/images/test/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/images/test/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/labels/train/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/labels/train/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/labels/val/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/labels/val/&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;data/labels/test/&#x27;</span>):</span><br><span class="line">        os.makedirs(<span class="string">&#x27;data/labels/test/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># *********************************************** #</span></span><br><span class="line"><span class="comment"># 读取所有的txt文件</span></span><br><span class="line">create_dir()</span><br><span class="line">total_txt = os.listdir(txt_file_path)</span><br><span class="line">num_txt = <span class="built_in">len</span>(total_txt)</span><br><span class="line">list_all_txt = <span class="built_in">range</span>(num_txt)  <span class="comment"># 范围 range(0, num)</span></span><br><span class="line"></span><br><span class="line">num_train = <span class="built_in">int</span>(num_txt * train_percent)</span><br><span class="line">num_val = <span class="built_in">int</span>(num_txt * val_percent)</span><br><span class="line">num_test = num_txt - num_train - num_val</span><br><span class="line"></span><br><span class="line">train = random.sample(list_all_txt, num_train)</span><br><span class="line"><span class="comment"># train从list_all_txt取出num_train个元素</span></span><br><span class="line"><span class="comment"># 所以list_all_txt列表只剩下了这些元素：val_test</span></span><br><span class="line">val_test = [i <span class="keyword">for</span> i <span class="keyword">in</span> list_all_txt <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">in</span> train]</span><br><span class="line"><span class="comment"># 再从val_test取出num_val个元素，val_test剩下的元素就是test</span></span><br><span class="line">val = random.sample(val_test, num_val)</span><br><span class="line"><span class="comment"># 检查两个列表元素是否有重合的元素</span></span><br><span class="line"><span class="comment"># set_c = set(val_test) &amp; set(val)</span></span><br><span class="line"><span class="comment"># list_c = list(set_c)</span></span><br><span class="line"><span class="comment"># print(list_c)</span></span><br><span class="line"><span class="comment"># print(len(list_c))</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;训练集数目：&#123;&#125;, 验证集数目：&#123;&#125;,测试集数目：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(train), <span class="built_in">len</span>(val), <span class="built_in">len</span>(val_test) - <span class="built_in">len</span>(val)))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list_all_txt:</span><br><span class="line">    name = total_txt[i][:-<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">    srcImage = images_file_path + name + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">    srcLabel = txt_file_path + name + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i <span class="keyword">in</span> train:</span><br><span class="line">        dst_train_Image = <span class="string">&#x27;data/images/train/&#x27;</span> + name + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">        dst_train_Label = <span class="string">&#x27;data/labels/train/&#x27;</span> + name + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line">        shutil.copyfile(srcImage, dst_train_Image)</span><br><span class="line">        shutil.copyfile(srcLabel, dst_train_Label)</span><br><span class="line">    <span class="keyword">elif</span> i <span class="keyword">in</span> val:</span><br><span class="line">        dst_val_Image = <span class="string">&#x27;data/images/val/&#x27;</span> + name + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">        dst_val_Label = <span class="string">&#x27;data/labels/val/&#x27;</span> + name + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line">        shutil.copyfile(srcImage, dst_val_Image)</span><br><span class="line">        shutil.copyfile(srcLabel, dst_val_Label)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dst_test_Image = <span class="string">&#x27;data/images/test/&#x27;</span> + name + <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">        dst_test_Label = <span class="string">&#x27;data/labels/test/&#x27;</span> + name + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line">        shutil.copyfile(srcImage, dst_test_Image)</span><br><span class="line">        shutil.copyfile(srcLabel, dst_test_Label)</span><br><span class="line">shutil.rmtree(txt_file_path)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行可生成：</p><p><img src="https://s2.loli.net/2023/03/08/lK2miogJwuRHpQT.png" alt="image-20230308183703878"></p><p>注意这两个文件，之后要复制到其他地方去用。</p><p><img src="https://s2.loli.net/2023/03/08/tWGjl9ICH8Z2dX4.png" alt=""></p><p><img src="https://s2.loli.net/2023/03/08/xbC194UrF27HvhP.png" alt="image-20230308183715571"></p><h2 id="5-修改配置文件">5. 修改配置文件</h2><h3 id="修改读取配置文件">修改读取配置文件</h3><p>在data目录下创建自己的数据集读取配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Train/val/test sets as 1) dir: path/to/imgs, 2) file: path/to/imgs.txt, or 3) list: [path/to/imgs1, path/to/imgs2, ..]</span></span><br><span class="line"><span class="comment"># path: ../datasets/VOC</span></span><br><span class="line"><span class="attr">train:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">/home/mxvivi/yolov5/yolov5/data/images/train/</span></span><br><span class="line"><span class="attr">val:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">/home/mxvivi/yolov5/yolov5/data/images/val/</span></span><br><span class="line"><span class="attr">test:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">/home/mxvivi/yolov5/yolov5/data/images/test/</span></span><br><span class="line"><span class="attr">nc:</span> <span class="number">6</span></span><br><span class="line"><span class="comment"># Classes</span></span><br><span class="line"><span class="attr">names:</span></span><br><span class="line">  <span class="attr">0:</span> <span class="string">ore</span> <span class="string">carrier</span></span><br><span class="line">  <span class="attr">1:</span> <span class="string">general</span> <span class="string">cargo</span> <span class="string">ship</span></span><br><span class="line">  <span class="attr">2:</span> <span class="string">bulk</span> <span class="string">cargo</span> <span class="string">carrier</span></span><br><span class="line">  <span class="attr">3:</span> <span class="string">container</span> <span class="string">ship</span></span><br><span class="line">  <span class="attr">4:</span> <span class="string">fishing</span> <span class="string">boat</span></span><br><span class="line">  <span class="attr">5:</span> <span class="string">passenger</span> <span class="string">ship</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改超参数">修改超参数</h3><p>在data目录下创建文件 hyp.finetune.yaml （这个只是一个大概的值，可以通过wandb等网站调参）<a href="https://www.bilibili.com/video/BV1rM411Y7nZ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=a0550d3457cb01d47cf52af889fed3d3">推荐视频</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lr0:</span> <span class="number">0.01</span>  <span class="comment"># 初始学习率 (SGD=1E-2, Adam=1E-3)</span></span><br><span class="line"><span class="attr">lrf:</span> <span class="number">0.2</span>  <span class="comment"># 循环学习率 (lr0 * lrf)</span></span><br><span class="line"><span class="attr">momentum:</span> <span class="number">0.937</span>  <span class="comment"># SGD momentum/Adam beta1 学习率动量</span></span><br><span class="line"><span class="attr">weight_decay:</span> <span class="number">0.0005</span>  <span class="comment"># 权重衰减系数 </span></span><br><span class="line"><span class="attr">warmup_epochs:</span> <span class="number">3.0</span>  <span class="comment"># 预热学习 (fractions ok)</span></span><br><span class="line"><span class="attr">warmup_momentum:</span> <span class="number">0.8</span>  <span class="comment"># 预热学习动量</span></span><br><span class="line"><span class="attr">warmup_bias_lr:</span> <span class="number">0.1</span>  <span class="comment"># 预热初始学习率</span></span><br><span class="line"><span class="attr">box:</span> <span class="number">0.05</span>  <span class="comment"># iou损失系数</span></span><br><span class="line"><span class="attr">cls:</span> <span class="number">0.5</span>  <span class="comment"># cls损失系数</span></span><br><span class="line"><span class="attr">cls_pw:</span> <span class="number">1.0</span>  <span class="comment"># cls BCELoss正样本权重</span></span><br><span class="line"><span class="attr">obj:</span> <span class="number">1.0</span>  <span class="comment"># 有无物体系数(scale with pixels)</span></span><br><span class="line"><span class="attr">obj_pw:</span> <span class="number">1.0</span>  <span class="comment"># 有无物体BCELoss正样本权重</span></span><br><span class="line"><span class="attr">iou_t:</span> <span class="number">0.20</span>  <span class="comment"># IoU训练时的阈值</span></span><br><span class="line"><span class="attr">anchor_t:</span> <span class="number">4.0</span>  <span class="comment"># anchor的长宽比（长:宽 = 4:1）</span></span><br><span class="line"><span class="comment"># anchors: 3  # 每个输出层的anchors数量(0 to ignore)</span></span><br><span class="line"><span class="comment">#以下系数是数据增强系数，包括颜色空间和图片空间</span></span><br><span class="line"><span class="attr">fl_gamma:</span> <span class="number">0.0</span>  <span class="comment"># focal loss gamma (efficientDet default gamma=1.5)</span></span><br><span class="line"><span class="attr">hsv_h:</span> <span class="number">0.015</span>  <span class="comment"># 色调 (fraction)</span></span><br><span class="line"><span class="attr">hsv_s:</span> <span class="number">0.7</span>  <span class="comment"># 饱和度 (fraction)</span></span><br><span class="line"><span class="attr">hsv_v:</span> <span class="number">0.4</span>  <span class="comment"># 亮度 (fraction)</span></span><br><span class="line"><span class="attr">degrees:</span> <span class="number">0.0</span>  <span class="comment"># 旋转角度 (+/- deg)</span></span><br><span class="line"><span class="attr">translate:</span> <span class="number">0.1</span>  <span class="comment"># 平移(+/- fraction)</span></span><br><span class="line"><span class="attr">scale:</span> <span class="number">0.5</span>  <span class="comment"># 图像缩放 (+/- gain)</span></span><br><span class="line"><span class="attr">shear:</span> <span class="number">0.0</span>  <span class="comment"># 图像剪切 (+/- deg)</span></span><br><span class="line"><span class="attr">perspective:</span> <span class="number">0.0</span>  <span class="comment"># 透明度 (+/- fraction), range 0-0.001</span></span><br><span class="line"><span class="attr">flipud:</span> <span class="number">0.0</span>  <span class="comment"># 进行上下翻转概率 (probability)</span></span><br><span class="line"><span class="attr">fliplr:</span> <span class="number">0.5</span>  <span class="comment"># 进行左右翻转概率 (probability)</span></span><br><span class="line"><span class="attr">mosaic:</span> <span class="number">1.0</span>  <span class="comment"># 进行Mosaic概率 (probability)</span></span><br><span class="line"><span class="attr">mixup:</span> <span class="number">0.0</span>  <span class="comment"># 进行图像混叠概率（即，多张图像重叠在一起） (probability)</span></span><br></pre></td></tr></table></figure><h3 id="下载初始权重文件">下载初始权重文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在yolov5根目录下创建文件夹</span></span><br><span class="line">mkdir weights</span><br><span class="line">cd weights</span><br><span class="line">wget https://github.com/ultralytics/yolov5/releases/download/v7.0/yolov5s-seg.pt</span><br></pre></td></tr></table></figure><h3 id="配置训练文件">配置训练文件</h3><p>修改至如图所示即可：</p><p><strong>data改成我们读取配置的路径</strong></p><p><strong>hyp改为我们超参数的文件的路径</strong></p><p><strong>bantch-size根据自己显存修改，显存不够就改小一点</strong></p><p><strong>device那里填显卡的编号，没有就用CPU，但会有亿点点慢 nvidia-smi可以查看显卡编号</strong></p><p><img src="https://s2.loli.net/2023/03/08/jEgzOhU3NVxkA4d.png" alt="image-20230308185813432"></p><h3 id="修改yoloV5s网络参数">修改yoloV5s网络参数</h3><p>打开文件/yolov5/models/yolov5s.yaml   修改为如图所示</p><p><img src="https://s2.loli.net/2023/03/08/PjhY7TLNHwVdRpK.png" alt="image-20230308190451232"></p><h2 id="6-训练模型">6.训练模型</h2><h3 id="训练">训练</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python train.py --data data/myshipvoc.yaml --weights weights/yolov5s-seg.pt --cfg models/yolov5s.yaml --hyp data/hyp.finetune.yaml --epochs <span class="number">70</span> --rect </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>训练完成：</p><p><img src="https://s2.loli.net/2023/03/08/KlLBAMEdwC2npcq.png" alt="image-20230308191632425"></p><h3 id="查看效果">查看效果</h3><p><img src="https://s2.loli.net/2023/03/08/StkpDJTfI1BjbPd.png" alt="confusion_matrix"></p><p><img src="https://s2.loli.net/2023/03/08/9kUZaVpBcoKYdL1.png" alt="F1_curve"></p><p><img src="https://s2.loli.net/2023/03/08/tGRMZLmFSlaTYOi.png" alt="PR_curve"></p><p><img src="https://s2.loli.net/2023/03/08/QKCNzIiwfrETcov.png" alt="R_curve"></p><p><img src="https://s2.loli.net/2023/03/08/RZ7lBKt4h9Evd31.jpg" alt="train_batch2"></p><p><img src="https://s2.loli.net/2023/03/08/lurOQWIDmVhBtA5.jpg" alt="val_batch0_pred"></p><h3 id="查看Recall率">查看Recall率</h3><p><img src="https://s2.loli.net/2023/03/08/3I975PiQ6aYSspn.png" alt="image-20230308192105213"></p><p>训练70轮之后还在持续增加，在调整超参数后应该还有很大的进步空间</p><h2 id="谢谢观看">谢谢观看</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;在SeaShip数据集上验证YoloV5&lt;/h1&gt;
&lt;p&gt;操作系统： ArchLinux&lt;/p&gt;
&lt;p&gt;需要代理&lt;/p&gt;
&lt;h2 id=&quot;1-conda安装配置&quot;&gt;1.conda安装配置&lt;/h2&gt;
&lt;p&gt;已经完成的小伙伴可以直接跳过&lt;/p&gt;
&lt;h3 id=&quot;安装Anaco</summary>
      
    
    
    
    <category term="计算机技术" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="计算机视觉 神经网络" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>docker的简单使用（二）</title>
    <link href="http://example.com/2023/03/04/Technology/ComputerScience/docker-2/"/>
    <id>http://example.com/2023/03/04/Technology/ComputerScience/docker-2/</id>
    <published>2023-03-04T08:15:35.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1>docker的简单使用（二）</h1><h2 id="1-应用容器化">1.应用容器化</h2><h3 id="主要步骤：">主要步骤：</h3><ol><li>编写应用代码。</li><li>创建一个Dockerfile，其中包括了当前应用的描述，依赖以及该如何运行这个应用。</li><li>对该Dockerfile执行docker image build 命令。</li><li>等待Docker将应用程序构建到Docker镜像当中。</li></ol><h3 id="单体应用容器化">单体应用容器化</h3><h4 id="获取代码">获取代码</h4><p>从作者的GitHub库当中获取他的实例代码：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/nigelpoulton/psweb.git</span><br><span class="line"></span><br><span class="line">cd psweb</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看是否下载成功</span></span><br><span class="line">ls -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如下表示</span></span><br><span class="line">-rw-r--r-- 1 mxvivi mxvivi  341  3月 4日 16:34 app.js</span><br><span class="line">-rw-r--r-- 1 mxvivi mxvivi  216  3月 4日 16:34 circle.yml</span><br><span class="line">-rw-r--r-- 1 mxvivi mxvivi  336  3月 4日 16:34 Dockerfile</span><br><span class="line">-rw-r--r-- 1 mxvivi mxvivi  403  3月 4日 16:34 package.json</span><br><span class="line">-rw-r--r-- 1 mxvivi mxvivi  455  3月 4日 16:34 README.md</span><br><span class="line">drwxr-xr-x 2 mxvivi mxvivi 4096  3月 4日 16:34 test</span><br><span class="line">drwxr-xr-x 2 mxvivi mxvivi 4096  3月 4日 16:34 views</span><br></pre></td></tr></table></figure><h4 id="分析Dockerfile">分析Dockerfile</h4><p>在docker中，包含应用文件的目录通常被称之为Build Context。Dockerfile需要放在Build Context的根目录下。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看Dockerfile文件</span></span><br><span class="line">cat Dockerfile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Test web-app to use with Pluralsight courses and Docker Deep Dive book</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Linux x64</span></span><br><span class="line">FROM alpine</span><br><span class="line"></span><br><span class="line">LABEL maintainer=&quot;nigelpoulton@hotmail.com&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install Node and NPM</span></span><br><span class="line">RUN apk add --update nodejs npm curl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Copy app to /src</span></span><br><span class="line">COPY . /src</span><br><span class="line"></span><br><span class="line">WORKDIR /src</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install dependencies</span></span><br><span class="line">RUN  npm install</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;node&quot;, &quot;./app.js&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Dockerfile的两个作用：</p><ol><li>对当前应用的描述。</li><li>指导Docker完成容器化。</li></ol><p>每个Dockerfile文件的第一行都是FROM指令。FROM指令指定的镜像，会作为当前镜像的一个基础镜像层，当前镜像的剩余内容会在其之上构建。LABEL是维护者的说明，方便用户与其沟通。<em>RUN apk add --update nodejs npm curl</em>  是通过alpine镜像的apk包管理器安装 nodejs…  RUN指令执行以后会在alpine层之上新构建一个镜像层来存放这些应用。<em>COPY . /src</em> 是从Build Context中的相关文件复制到了当前的镜像层中，并构建了一个新镜像层来存储。 当前含有三层镜像层了。</p><p>下一步，通过WORKDIR指令，为Dockerfile中尚未执行的指令设置工作目录。该目录与镜像有关，并会作为元数据记录到镜像的配置当中，但不再新建镜像层。</p><p>RUN npm install 会根据package.json中的配置信息，使用npm来安装相关的依赖包。npm会在前文设置的工作目录当中进行，并且在镜像当中新建镜像层来保持相关的依赖文件。</p><h4 id="容器化当前的应用-构建新的镜像">容器化当前的应用/构建新的镜像</h4><p>在pswb的目录下执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">docker image build -t web:latest  . &lt;&lt;这个点一定要加，表面是在当前的目录构建的</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">打包完成</span></span><br><span class="line">Removing intermediate container c26ab47f95fe</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">41ad2c0e9350</span></span><br><span class="line">Step 7/8 : EXPOSE 8080</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> a47595f384d6</span></span><br><span class="line">Removing intermediate container a47595f384d6</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">bc17aab3395d</span></span><br><span class="line">Step 8/8 : ENTRYPOINT [&quot;node&quot;, &quot;./app.js&quot;]</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> e745f4c3be27</span></span><br><span class="line">Removing intermediate container e745f4c3be27</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">83ba43fa9c04</span></span><br><span class="line">Successfully built 83ba43fa9c04</span><br><span class="line">Successfully tagged web:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看</span></span><br><span class="line">docker image inspect web:lastest</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="推送镜像到DockerHub">推送镜像到DockerHub</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">登录</span></span><br><span class="line">docker login</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">成功显示</span></span><br><span class="line">Username: maxiaovivi</span><br><span class="line">WARNING! Your password will be stored unencrypted in /home/mxvivi/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;docker的简单使用（二）&lt;/h1&gt;
&lt;h2 id=&quot;1-应用容器化&quot;&gt;1.应用容器化&lt;/h2&gt;
&lt;h3 id=&quot;主要步骤：&quot;&gt;主要步骤：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;编写应用代码。&lt;/li&gt;
&lt;li&gt;创建一个Dockerfile，其中包括了当前应用的描述，依赖以及该如</summary>
      
    
    
    
    <category term="计算机技术" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="计算机技术" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>飞花令——君</title>
    <link href="http://example.com/2023/03/04/Lifestyle/Poetry/shi/"/>
    <id>http://example.com/2023/03/04/Lifestyle/Poetry/shi/</id>
    <published>2023-03-04T07:06:35.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1>君 飞花令</h1><h2 id="将进酒">将进酒</h2><p>唐 李白<br><strong>君不见，黄河之水天上来，奔流到海不复回。</strong><br><strong>君不见，高堂明镜悲白发，朝如青丝暮成雪。</strong><br>人生得意须尽欢，莫使金樽空对月。<br>天生我材必有用，千金散尽还复来。<br>烹羊宰牛且为乐，会须一饮三百杯。<br>岑夫子，丹丘生，将进酒，杯莫停。<br><strong>与君歌一曲，请君为我倾耳听。(倾耳听 一作：侧耳听)</strong><br>钟鼓馔玉不足贵，但愿长醉不愿醒。(不足贵 一作：何足贵；不愿醒 一作：不复醒)<br>古来圣贤皆寂寞，惟有饮者留其名。(古来 一作：自古；惟 通：唯)<br>陈王昔时宴平乐，斗酒十千恣欢谑。<br>主人何为言少钱，径须沽取对君酌。<br>五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。</p><h2 id="关雎">关雎</h2><p>先秦 佚名<br>关关雎鸠，在河之洲。<strong>窈窕淑女，君子好逑。</strong><br>参差荇菜，左右流之。窈窕淑女，寤寐求之。<br>求之不得，寤寐思服。悠哉悠哉，辗转反侧。<br>参差荇菜，左右采之。窈窕淑女，琴瑟友之。<br>参差荇菜，左右芼之。窈窕淑女，钟鼓乐之。</p><h2 id="长恨歌">长恨歌</h2><p>唐 白居易<br>汉皇重色思倾国，御宇多年求不得。<br>杨家有女初长成，养在深闺人未识。<br><strong>天生丽质难自弃，一朝选在君王侧。</strong><br>回眸一笑百媚生，六宫粉黛无颜色。<br>春寒赐浴华清池，温泉水滑洗凝脂。<br>侍儿扶起娇无力，始是新承恩泽时。<br>云鬓花颜金步摇，芙蓉帐暖度春宵。<br><strong>春宵苦短日高起，从此君王不早朝。</strong><br>承欢侍宴无闲暇，春从春游夜专夜。<br>后宫佳丽三千人，三千宠爱在一身。<br>金屋妆成娇侍夜，玉楼宴罢醉和春。<br>姊妹弟兄皆列土，可怜光彩生门户。<br>遂令天下父母心，不重生男重生女。<br>骊宫高处入青云，仙乐风飘处处闻。<br><strong>缓歌慢舞凝丝竹，尽日君王看不足。</strong><br>渔阳鼙鼓动地来，惊破霓裳羽衣曲。</p><p>九重城阙烟尘生，千乘万骑西南行。<br>翠华摇摇行复止，西出都门百余里。<br>六军不发无奈何，宛转蛾眉马前死。<br>花钿委地无人收，翠翘金雀玉搔头。<br><strong>君王掩面救不得，回看血泪相和流。</strong><br>黄埃散漫风萧索，云栈萦纡登剑阁。<br>峨嵋山下少人行，旌旗无光日色薄。<br>蜀江水碧蜀山青，圣主朝朝暮暮情。<br>行宫见月伤心色，夜雨闻铃肠断声。<br>天旋日转回龙驭，到此踌躇不能去。<br>马嵬坡下泥土中，不见玉颜空死处。<br><strong>君臣相顾尽沾衣，东望都门信马归。</strong><br>归来池苑皆依旧，太液芙蓉未央柳。<br>芙蓉如面柳如眉，对此如何不泪垂。<br>春风桃李花开夜，秋雨梧桐叶落时。(花开夜 一作：花开日)<br>西宫南苑多秋草，落叶满阶红不扫。(南苑 一作：南内)<br>梨园弟子白发新，椒房阿监青娥老。<br>夕殿萤飞思悄然，孤灯挑尽未成眠。<br>迟迟钟鼓初长夜，耿耿星河欲曙天。<br>鸳鸯瓦冷霜华重，翡翠衾寒谁与共。<br>悠悠生死别经年，魂魄不曾来入梦。</p><p>临邛道士鸿都客，能以精诚致魂魄。<br><strong>为感君王辗转思，遂教方士殷勤觅。</strong><br>排空驭气奔如电，升天入地求之遍。<br>上穷碧落下黄泉，两处茫茫皆不见。<br>忽闻海上有仙山，山在虚无缥缈间。<br>楼阁玲珑五云起，其中绰约多仙子。<br>中有一人字太真，雪肤花貌参差是。<br>金阙西厢叩玉扃，转教小玉报双成。<br>闻道汉家天子使，九华帐里梦魂惊。<br>揽衣推枕起徘徊，珠箔银屏迤逦开。<br>云鬓半偏新睡觉，花冠不整下堂来。</p><p>风吹仙袂飘飖举，犹似霓裳羽衣舞。<br>玉容寂寞泪阑干，梨花一枝春带雨。(阑 通：栏)<br><strong>含情凝睇谢君王，一别音容两渺茫。</strong><br>昭阳殿里恩爱绝，蓬莱宫中日月长。<br>回头下望人寰处，不见长安见尘雾。<br>惟将旧物表深情，钿合金钗寄将去。<br>钗留一股合一扇，钗擘黄金合分钿。<br>但令心似金钿坚，天上人间会相见。</p><p>临别殷勤重寄词，词中有誓两心知。<br>七月七日长生殿，夜半无人私语时。<br>在天愿作比翼鸟，在地愿为连理枝。<br>天长地久有时尽，此恨绵绵无绝期。</p><h2 id="春江花夜月">春江花夜月</h2><p>唐 张若虚<br>春江潮水连海平，海上明月共潮生。<br>滟滟随波千万里，何处春江无月明！<br>江流宛转绕芳甸，月照花林皆似霰。<br>空里流霜不觉飞，汀上白沙看不见。<br>江天一色无纤尘，皎皎空中孤月轮。<br>江畔何人初见月？江月何年初照人？<br>人生代代无穷已，江月年年只相似。(只相似 一作：望相似)<br>不知江月待何人，但见长江送流水。<br>白云一片去悠悠，青枫浦上不胜愁。<br>谁家今夜扁舟子？何处相思明月楼？<br>可怜楼上月徘徊，应照离人妆镜台。<br>玉户帘中卷不去，捣衣砧上拂还来。<br><strong>此时相望不相闻，愿逐月华流照君。</strong><br>鸿雁长飞光不度，鱼龙潜跃水成文。<br>昨夜闲潭梦落花，可怜春半不还家。<br>江水流春去欲尽，江潭落月复西斜。<br>斜月沉沉藏海雾，碣石潇湘无限路。<br>不知乘月几人归，落月摇情满江树。(落月 一作：落花)</p><h2 id="虞美人·春花秋月何时了">虞美人·春花秋月何时了</h2><p>五代 李煜<br>春花秋月何时了？往事知多少。小楼昨夜又东风，故国不堪回首月明中。<br>雕栏玉砌应犹在，只是朱颜改。<strong>问君能有几多愁？恰似一江春水向东流。</strong>(栏 通：阑)</p><h2 id="蜀道难">蜀道难</h2><p>唐 李白<br>噫吁嚱，危乎高哉！<br>蜀道之难，难于上青天！<br>蚕丛及鱼凫，开国何茫然！<br>尔来四万八千岁，不与秦塞通人烟。<br>西当太白有鸟道，可以横绝峨眉巅。<br>地崩山摧壮士死，然后天梯石栈相钩连。<br>上有六龙回日之高标，下有冲波逆折之回川。<br>黄鹤之飞尚不得过，猿猱欲度愁攀援。(攀援 一作：攀缘)<br>青泥何盘盘，百步九折萦岩峦。<br>扪参历井仰胁息，以手抚膺坐长叹。<br><strong>问君西游何时还？畏途巉岩不可攀。</strong><br>但见悲鸟号古木，雄飞雌从绕林间。<br>又闻子规啼夜月，愁空山。<br>蜀道之难，难于上青天，使人听此凋朱颜！<br>连峰去天不盈尺，枯松倒挂倚绝壁。<br>飞湍瀑流争喧豗，砯崖转石万壑雷。<br>其险也如此，嗟尔远道之人胡为乎来哉！(也如此 一作：也若此)<br>剑阁峥嵘而崔嵬，一夫当关，万夫莫开。<br>所守或匪亲，化为狼与豺。<br>朝避猛虎，夕避长蛇；磨牙吮血，杀人如麻。<br>锦城虽云乐，不如早还家。<br>蜀道之难，难于上青天，侧身西望长咨嗟！</p><h2 id="破阵子·为陈同甫赋壮词以寄之">破阵子·为陈同甫赋壮词以寄之</h2><p>宋 辛弃疾<br>醉里挑灯看剑，梦回吹角连营。八百里分麾下炙，五十弦翻塞外声。沙场秋点兵。<br>马作的卢飞快，弓如霹雳弦惊。<strong>了却君王天下事，赢得生前身后名。可怜白发生！</strong></p><h2 id="白雪歌送武判官归京">白雪歌送武判官归京</h2><p>唐 岑参<br>北风卷地白草折，胡天八月即飞雪。<br>忽如一夜春风来，千树万树梨花开。<br>散入珠帘湿罗幕，狐裘不暖锦衾薄。<br>将军角弓不得控，都护铁衣冷难着。(难着 一作：犹著)<br>瀚海阑干百丈冰，愁云惨淡万里凝。<br>中军置酒饮归客，胡琴琵琶与羌笛。<br>纷纷暮雪下辕门，风掣红旗冻不翻。<br><strong>轮台东门送君去，去时雪满天山路。</strong><br><strong>山回路转不见君，雪上空留马行处。</strong></p><h2 id="琵琶行">琵琶行</h2><p>唐 白居易<br>浔阳江头夜送客，枫叶荻花秋瑟瑟。<br>主人下马客在船，举酒欲饮无管弦。<br>醉不成欢惨将别，别时茫茫江浸月。<br>忽闻水上琵琶声，主人忘归客不发。<br>寻声暗问弹者谁？琵琶声停欲语迟。<br>移船相近邀相见，添酒回灯重开宴。<br>千呼万唤始出来，犹抱琵琶半遮面。<br>转轴拨弦三两声，未成曲调先有情。<br>弦弦掩抑声声思，似诉平生不得志。（不得志 一作：不得意）<br>低眉信手续续弹，说尽心中无限事。<br>轻拢慢捻抹复挑，初为《霓裳》后《六幺》（六幺 一作：绿腰）。<br>大弦嘈嘈如急雨，小弦切切如私语。<br>嘈嘈切切错杂弹，大珠小珠落玉盘。<br>间关莺语花底滑，幽咽泉流冰下难。<br>冰泉冷涩弦凝绝，凝绝不通声暂歇。(暂歇 一作：渐歇)<br>别有幽愁暗恨生，此时无声胜有声。<br>银瓶乍破水浆迸，铁骑突出刀枪鸣。<br>曲终收拨当心画，四弦一声如裂帛。<br>东船西舫悄无言，唯见江心秋月白。<br>沉吟放拨插弦中，整顿衣裳起敛容。<br>自言本是京城女，家在虾蟆陵下住。<br>十三学得琵琶成，名属教坊第一部。<br>曲罢曾教善才服，妆成每被秋娘妒。<br>五陵年少争缠头，一曲红绡不知数。<br>钿头银篦击节碎，血色罗裙翻酒污。(银篦 一作：云篦)<br>今年欢笑复明年，秋月春风等闲度。<br>弟走从军阿姨死，暮去朝来颜色故。<br>门前冷落鞍马稀，老大嫁作商人妇。<br>商人重利轻别离，前月浮梁买茶去。<br>去来江口守空船，绕船月明江水寒。<br>夜深忽梦少年事，梦啼妆泪红阑干。<br>我闻琵琶已叹息，又闻此语重唧唧。<br>同是天涯沦落人，相逢何必曾相识！<br>我从去年辞帝京，谪居卧病浔阳城。<br>浔阳地僻无音乐，终岁不闻丝竹声。<br>住近湓江地低湿，黄芦苦竹绕宅生。<br>其间旦暮闻何物？杜鹃啼血猿哀鸣。<br>春江花朝秋月夜，往往取酒还独倾。<br>岂无山歌与村笛？呕哑嘲哳难为听。<br><strong>今夜闻君琵琶语，如听仙乐耳暂明。</strong><br><strong>莫辞更坐弹一曲，为君翻作《琵琶行》。</strong><br>感我此言良久立，却坐促弦弦转急。<br>凄凄不似向前声，满座重闻皆掩泣。<br>座中泣下谁最多？江州司马青衫湿。</p><h2 id="短歌行">短歌行</h2><p>东汉 曹操<br>对酒当歌，人生几何！譬如朝露，去日苦多。<br>慨当以慷，忧思难忘。何以解忧？唯有杜康。<br>青青子衿，悠悠我心。<strong>但为君故，沉吟至今。</strong><br>呦呦鹿鸣，食野之苹。我有嘉宾，鼓瑟吹笙。<br>明明如月，何时可掇？忧从中来，不可断绝。<br>越陌度阡，枉用相存。契阔谈䜩，心念旧恩。(谈䜩 一作：谈宴)<br>月明星稀，乌鹊南飞。绕树三匝，何枝可依？<br>山不厌高，海不厌深。周公吐哺，天下归心。(海 一作：水)</p><h2 id="送杜少府之任蜀州">送杜少府之任蜀州</h2><p>唐 王勃<br>城阙辅三秦，风烟望五津。<br><strong>与君离别意，同是宦游人。</strong><br>海内存知己，天涯若比邻。<br>无为在歧路，儿女共沾巾。</p><h2 id="送元二使安西">送元二使安西</h2><p>唐 王维<br>渭城朝雨浥轻尘，客舍青青柳色新。<br><strong>劝君更尽一杯酒，西出阳关无故人。</strong></p><h2 id="夜雨寄北">夜雨寄北</h2><p>唐 李商隐<br><strong>君问归期未有期，巴山夜雨涨秋池。</strong><br>何当共剪西窗烛，却话巴山夜雨时。</p><h2 id="凉州词">凉州词</h2><p>唐 王翰<br>葡萄美酒夜光杯，欲饮琵琶马上催。<br><strong>醉卧沙场君莫笑，古来征战几人回？</strong></p><h2 id="饮酒·其五">饮酒·其五</h2><p>魏晋 陶渊明<br>结庐在人境，而无车马喧。<br><strong>问君何能尔？心远地自偏。</strong><br>采菊东篱下，悠然见南山。<br>山气日夕佳，飞鸟相与还。<br>此中有真意，欲辨已忘言。</p><h2 id="卜算子·我住长江头">卜算子·我住长江头</h2><p>宋 李之仪<br><strong>我住长江头，君住长江尾。日日思君不见君，共饮长江水。</strong><br>此水几时休，此恨何时已。<strong>只愿君心似我心，定不负相思意。</strong></p><h2 id="采薇">采薇</h2><p>先秦 佚名<br>采薇采薇，薇亦作止。曰归曰归，岁亦莫止。 靡室靡家，猃狁之故。不遑启居，猃狁之故。<br>采薇采薇，薇亦柔止。曰归曰归，心亦忧止。 忧心烈烈，载饥载渴。我戍未定，靡使归聘。<br>采薇采薇，薇亦刚止。曰归曰归，岁亦阳止。 王事靡盬，不遑启处。忧心孔疚，我行不来！<br>彼尔维何？维常之华。<strong>彼路斯何？君子之车。</strong> 戎车既驾，四牡业业。岂敢定居？一月三捷。<br>驾彼四牡，四牡骙骙。<strong>君子所依，小人所腓。</strong> 四牡翼翼，象弭鱼服。岂不日戒？猃狁孔棘！<br>昔我往矣，杨柳依依。今我来思，雨雪霏霏。 行道迟迟，载渴载饥。我心伤悲，莫知我哀！</p><h2 id="雁门太守行">雁门太守行</h2><p>唐 李贺<br>黑云压城城欲摧，甲光向日金鳞开。<br>角声满天秋色里，塞上燕脂凝夜紫。<br>半卷红旗临易水，霜重鼓寒声不起。<br><strong>报君黄金台上意，提携玉龙为君死。</strong></p><h2 id="酬乐天扬州初逢席上见赠">酬乐天扬州初逢席上见赠</h2><p>唐 刘禹锡<br>巴山楚水凄凉地，二十三年弃置身。<br>怀旧空吟闻笛赋，到乡翻似烂柯人。<br>沉舟侧畔千帆过，病树前头万木春。<br><strong>今日听君歌一曲，暂凭杯酒长精神。</strong></p><h2 id="闻王昌龄左迁龙标遥有此寄">闻王昌龄左迁龙标遥有此寄</h2><p>唐 李白<br>杨花落尽子规啼，闻道龙标过五溪。<br><strong>我寄愁心与明月，随君直到夜郎西。</strong></p><h2 id="兵车行">兵车行</h2><p>唐 杜甫<br>车辚辚，马萧萧，行人弓箭各在腰。<br>耶娘妻子走相送，尘埃不见咸阳桥。(耶娘 一作：爷娘)<br>牵衣顿足拦道哭，哭声直上干云霄。<br>道旁过者问行人，行人但云点行频。<br>或从十五北防河，便至四十西营田。<br>去时里正与裹头，归来头白还戍边。<br>边庭流血成海水，武皇开边意未已。<br><strong>君不闻，汉家山东二百州，千村万落生荆杞。</strong><br>纵有健妇把锄犁，禾生陇亩无东西。<br>况复秦兵耐苦战，被驱不异犬与鸡。<br>长者虽有问，役夫敢申恨？<br>且如今年冬，未休关西卒。<br>县官急索租，租税从何出？<br>信知生男恶，反是生女好。<br>生女犹得嫁比邻，生男埋没随百草。<br><strong>君不见，青海头，古来白骨无人收。</strong><br>新鬼烦冤旧鬼哭，天阴雨湿声啾啾！</p><h2 id="十五从军征">十五从军征</h2><p>两汉 佚名</p><p>十五从军征，八十始得归。</p><p>道逢乡里人：家中有阿谁？</p><p><strong>遥看是君家，松柏冢累累。</strong></p><p>兔从狗窦入，雉从梁上飞。</p><p>中庭生旅谷，井上生旅葵。</p><p>舂谷持作饭，采葵持作羹。</p><p>羹饭一时熟，不知贻阿谁。</p><p>出门东向看，泪落沾我衣。</p><h2 id="没蕃故人">没蕃故人</h2><p>张籍</p><p>前年戍月支，城下没全师。</p><p>蕃汉断消息，死生长别离。</p><p>无人收废帐，归马识残旗。</p><p><strong>欲祭疑君在，天涯哭此时。</strong></p><h2 id="送李端">送李端</h2><p>卢纶</p><p>故关衰草遍，离别正堪悲。</p><p>路出寒云外，人归暮雪时。</p><p><strong>少孤为客早，多难识君迟。</strong></p><p>掩泣空相向，风尘何所期。</p><h2 id="寄李儋元锡">寄李儋元锡</h2><p>韦应物</p><p><strong>去年花里逢君别，今日花开又一年。</strong></p><p>世事茫茫难自料，春愁黯黯独成眠。</p><p>身多疾病思田里，邑有流亡愧俸钱。</p><p>闻道欲来相问讯，西楼望月几回圆。</p><h2 id="秋夜寄邱员外">秋夜寄邱员外</h2><p>韦应物</p><p><strong>怀君属秋夜，散步咏凉天。</strong></p><p>空山松子落，幽人应未眠。</p><h2 id="喜外弟卢纶见宿">喜外弟卢纶见宿</h2><p>司空曙</p><p>静夜四无邻，荒居旧业贫。</p><p>雨中黄叶树，灯下白头人。</p><p><strong>以我独沉久，愧君相见频。</strong></p><p>平生自有分，况是蔡家亲。</p><h2 id="闻乐天授江州司马"><strong>闻乐天授江州司马</strong></h2><p>元稹</p><p><strong>残灯无焰影幢幢，此夕闻君谪九江。</strong></p><p>垂死病中惊坐起，暗风吹雨入寒窗。</p><h2 id="春雪">春雪</h2><p>刘方平</p><p>飞雪带春风，徘徊乱绕空。</p><p><strong>君看似花处，偏在洛城东。</strong></p><h2 id="逢入京使">逢入京使</h2><p>岑参</p><p>故园东望路漫漫，双袖龙钟泪不干。</p><p><strong>马上相逢无纸笔，凭君传语报平安。</strong></p><h2 id="客至">客至</h2><p>杜甫</p><p>舍南舍北皆春水，但见群鸥日日来。<br><strong>花径不曾缘客扫，蓬门今始为君开。</strong><br>盘飧市远无兼味，樽酒家贫只旧醅。<br>肯与邻翁相对饮，隔篱呼取尽馀杯。</p><h2 id="江南逢李龟年">江南逢李龟年</h2><p>杜甫</p><p>岐王宅里寻常见，崔九堂前几度闻。<br><strong>正是江南好风景，落花时节又逢君。</strong></p><h2 id="别房太尉墓">别房太尉墓</h2><p>杜甫</p><p>他乡复行役，驻马别孤坟。<br>近泪无干土，低空有断云。<br><strong>对棋陪谢傅，把剑觅徐君。</strong><br>唯见林花落，莺啼送客闻。</p><h2 id="送李少府贬峡中-王少府贬长沙">送李少府贬峡中 王少府贬长沙</h2><p>高适</p><p><strong>嗟君此别意何如，驻马衔杯问谪居。</strong><br>巫峡啼猿数行泪，衡阳归雁几封书。<br>青枫江上秋帆远，白帝城边古木疏。<br>圣代即今多雨露，暂时分手莫踌躇。</p><h2 id="别董大">别董大</h2><p>高适</p><p>千里黄云白日曛，北风吹雁雪纷纷。<br><strong>莫愁前路无知己，天下谁人不识君？。</strong></p><h2 id="送元二使安西-2">送元二使安西</h2><p>王维</p><p>渭城朝雨浥轻尘，客舍青青柳色新。<br><strong>劝君更尽一杯酒，西出阳关无故人。</strong></p><h2 id="相思">相思</h2><p>王维</p><p>红豆生南国，春来发几枝？</p><p><strong>愿君多采撷，此物最相思。</strong></p><h2 id="蝉">蝉</h2><p>李商隐</p><p>本以高难饱，徒劳恨费声。<br>五更疏欲断，一树碧无情。<br>薄宦梗犹泛，故园芜已平。<br><strong>烦君最相警，我亦举家清。</strong></p><h2 id="何满子">何满子</h2><p>张祜</p><p>故国三千里，深宫二十年。<br><strong>一声何满子，双泪落君前。</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;君 飞花令&lt;/h1&gt;
&lt;h2 id=&quot;将进酒&quot;&gt;将进酒&lt;/h2&gt;
&lt;p&gt;唐 李白&lt;br&gt;
&lt;strong&gt;君不见，黄河之水天上来，奔流到海不复回。&lt;/strong&gt;&lt;br&gt;
&lt;strong&gt;君不见，高堂明镜悲白发，朝如青丝暮成雪。&lt;/strong&gt;&lt;br&gt;
人生得意须尽欢</summary>
      
    
    
    
    <category term="飞花令" scheme="http://example.com/categories/%E9%A3%9E%E8%8A%B1%E4%BB%A4/"/>
    
    
    <category term="诗词" scheme="http://example.com/tags/%E8%AF%97%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>飞花令——风</title>
    <link href="http://example.com/2023/03/04/Lifestyle/Poetry/feng/"/>
    <id>http://example.com/2023/03/04/Lifestyle/Poetry/feng/</id>
    <published>2023-03-04T07:06:35.000Z</published>
    <updated>2023-12-09T12:16:42.762Z</updated>
    
    <content type="html"><![CDATA[<h1>风 飞花令</h1><h2 id="长相思·山一程">长相思·山一程</h2><p>纳兰性德</p><p>山一程，水一程，身向榆关那畔行，夜深千帐灯<br><strong>风一更，雪一更，聒碎乡心梦不成，故园无此声</strong></p><h2 id="木兰花·令拟古决绝词">木兰花·令拟古决绝词</h2><p>纳兰性德</p><p><strong>人生若只如初见，何事秋风悲画扇</strong><br>等闲变却故人心，却道故心人易变<br>骊山语罢清宵半，泪雨霖铃终不怨<br>何如薄幸锦衣郎，比翼连枝当日愿</p><h2 id="点绛唇·咏风兰">点绛唇·咏风兰</h2><p>纳兰性德</p><p>别样幽芬，更无浓艳催开处<br><strong>凌波欲去，且为东风住</strong><br>忒煞萧疏，争奈秋如许<br>还留取，冷香半缕，第一湘江雨</p><h2 id="生查子·东风不解愁">生查子·东风不解愁</h2><p>纳兰性德</p><p><strong>东风不解愁，偷展湘裙衩</strong><br>独夜背纱笼，影著纤腰画<br>爇尽水沉烟，露滴鸳鸯瓦<br>花骨冷宜香，小立樱桃下</p><h2 id="浣溪沙·谁念西风独自凉">浣溪沙·谁念西风独自凉</h2><p>纳兰性德</p><p><strong>谁念西风独自凉，萧萧黄叶闭疏窗，沉思往事立残阳</strong><br>被酒莫惊春睡重，赌书消得泼茶香，当时只道是寻常</p><h2 id="浣溪沙·郊游联句">浣溪沙·郊游联句</h2><p>纳兰性德</p><p><strong>出郭寻春春已阑(陈维崧)，东风吹面不成寒(秦松龄)，青村几曲到西山(严绳孙)</strong><br>并马未须愁路远(姜宸英)，看花且莫放杯闲(朱彝尊)，人生别易会常难(纳兰性德)</p><h2 id="采桑子·谁翻乐府凄凉曲">采桑子·谁翻乐府凄凉曲</h2><p>纳兰性德</p><p>谁翻乐府凄凉曲<br><strong>风也萧萧，雨也萧萧，瘦尽灯花又一宵</strong><br>不知何事萦怀抱，醒也无聊，醉也无聊，梦也何曾到谢桥</p><h2 id="浣溪沙·庚申除夜">浣溪沙·庚申除夜</h2><p>纳兰性德</p><p>收取闲心冷处浓，舞裙犹忆柘枝红<br><strong>谁家刻烛待春风</strong><br>竹叶樽空翻采燕，九枝灯灺颤金虫<br><strong>风流端合倚天公</strong></p><h2 id="青衫湿·悼亡">青衫湿·悼亡</h2><p>纳兰性德</p><p>近来无限伤心事，谁与话长更<br>从教分付，绿窗红泪，早雁初莺<br>当时领略，而今断送，总负多情<br><strong>忽疑君到，漆灯风飐，痴数春星</strong></p><h2 id="摊破浣溪沙·葬名花">摊破浣溪沙·葬名花</h2><p>纳兰性德</p><p>林下荒苔道韫家，生怜玉骨委尘沙<br><strong>愁向风前无处说，数归鸦</strong><br>半世浮萍随逝水，一宵冷雨葬名花<br>魂是柳绵吹欲碎，绕天涯</p><h2 id="点绛唇·五夜光寒">点绛唇·五夜光寒</h2><p>纳兰性德</p><p>五夜光寒，照来积雪平于栈<br><strong>西风何限，自起披衣看</strong><br>对此茫茫，不觉成长叹<br>何时旦，晓星欲散，飞起平沙雁</p><h2 id="梦江南·昏鸦尽">梦江南·昏鸦尽</h2><p>纳兰性德</p><p>昏鸦尽，小立恨因谁<br><strong>急雪乍翻香阁絮，轻风吹到胆瓶梅，心字已成灰</strong></p><h2 id="赤枣子·惊晓漏">赤枣子·惊晓漏</h2><p>纳兰性德</p><p>惊晓漏，护春眠<br>格外娇慵只自怜<br><strong>寄语酿花风日好，绿窗来与上琴弦</strong></p><h2 id="忆王孙·西风一夜剪芭蕉">忆王孙·西风一夜剪芭蕉</h2><p>纳兰性德</p><p><strong>西风一夜剪芭蕉，倦眼经秋耐寂寥</strong><br>强把心情付浊醪<br>读《离骚》<br>愁似湘江日夜潮</p><h2 id="浣溪沙·一半残阳下小楼">浣溪沙·一半残阳下小楼</h2><p>纳兰性德</p><p>一半残阳下小楼，朱帘斜控软金钩<br>倚阑无绪不能愁<br><strong>有个盈盈骑马过，薄妆浅黛亦风流</strong><br>见人羞涩却回头</p><h2 id="好事近·何路向家园">好事近·何路向家园</h2><p>纳兰性德</p><p>何路向家园，历历残山剩水<br>都把一春冷淡，到麦秋天气<br>料应重发隔年花，莫问花前事<br><strong>纵使东风依旧，怕红颜不似</strong></p><h2 id="忆秦娥·春深浅">忆秦娥·春深浅</h2><p>纳兰性德</p><p>春深浅，一痕摇漾青如剪<br>青如剪<br>鹭鸶立处，烟芜平远<br><strong>吹开吹谢东风倦，缃桃自惜红颜变</strong><br>红颜变<br>兔葵燕麦，重来相见</p><h2 id="忆秦娥·山重叠">忆秦娥·山重叠</h2><p>纳兰性德</p><p>山重叠<br>悬崖一线天疑裂<br>天疑裂<br>断碑题字，苔痕横啮<br><strong>风声雷动鸣金铁</strong><br>阴森潭底蛟龙窟<br>蛟龙窟<br>兴亡满眼，旧时明月</p><h2 id="眼儿媚·重见星娥碧海槎">眼儿媚·重见星娥碧海槎</h2><p>纳兰性德</p><p>重见星娥碧海槎，忍笑却盘鸦<br><strong>寻常多少，月明风细，今夜偏佳</strong><br>休笼彩笔闲书字，街鼓巳三挝<br>烟丝欲袅，露光微泫，春在桃花</p><h2 id="太常引·自题小照">太常引·自题小照</h2><p>纳兰性德</p><p><strong>西风乍起峭寒生，惊雁避移营</strong><br>千里暮云平，休回首、长亭短亭<br>无穷山色，无边往事，一例冷清清<br>试倩玉萧声，唤千古、英雄梦醒</p><h2 id="生查子·鞭影落春堤">生查子·鞭影落春堤</h2><p>纳兰性德</p><p>鞭影落春堤，绿锦鄣泥卷<br>脉脉逗菱丝，嫩水吴姬眼<br>啮膝带香归，谁整樱桃宴<br><strong>蜡泪恼东风，旧垒眠新燕</strong></p><h2 id="采桑子·当时错">采桑子·当时错</h2><p>纳兰性德</p><p>而今才道当时错，心绪凄迷<br><strong>红泪偷垂，满眼春风百事非</strong><br>情知此后来无计，强说欢期<br>一别如斯，落尽梨花月又西</p><h2 id="浣溪沙·寄严荪友">浣溪沙·寄严荪友</h2><p>纳兰性德</p><p>藕荡桥边理钓筒，苎萝西去五湖东<br>笔床茶灶太从容<br><strong>况有短墙银杏雨，更兼高阁玉兰风</strong><br>画眉闲了画芙蓉</p><h2 id="如梦令·木叶纷纷归路">如梦令·木叶纷纷归路</h2><p>纳兰性德</p><p>木叶纷纷归路<br><strong>残月晓风何处</strong><br>消息半浮沈，今夜相思几许<br>秋雨，秋雨<br><strong>一半西风吹去</strong></p><h2 id="如梦令·黄叶青苔归路">如梦令·黄叶青苔归路</h2><p>纳兰性德</p><p>黄叶青苔归路，屧粉衣香何处<br>消息竟沉沉，今夜相思几许<br><strong>秋雨，秋雨，一半因风吹去</strong></p><h2 id="昭君怨·暮雨丝丝吹湿">昭君怨·暮雨丝丝吹湿</h2><p>纳兰性德</p><p><strong>暮雨丝丝吹湿，倦柳愁荷风急</strong><br>瘦骨不禁秋，总成愁<br>别有心情怎说，未是诉愁时节，谯鼓已三更，梦须成</p><h2 id="浣溪沙·容易浓香近画屏">浣溪沙·容易浓香近画屏</h2><p>纳兰性德</p><p>容易浓香近画屏，繁枝影著半窗横<br><strong>风波狭路倍怜卿</strong><br>未接语言犹怅望，才通商略已懵腾<br>只嫌今夜月偏明</p><h2 id="浣溪沙·肠断班骓去未还">浣溪沙·肠断班骓去未还</h2><p>纳兰性德</p><p>肠断班骓去未还，绣屏深锁凤箫寒<br>一春幽梦有无间<br>逗雨疏花浓淡改，关心芳草浅深难<br><strong>不成风月转摧残</strong></p><h2 id="菩萨蛮·晶帘一片伤心白">菩萨蛮·晶帘一片伤心白</h2><p>纳兰性德</p><p>晶帘一片伤心白，云鬟香雾成遥隔<br>无语问添衣，桐阴月已西<br><strong>西风鸣络纬，不许愁人睡</strong><br>只是去年秋，如何泪欲流</p><h2 id="谒金门·风丝袅">谒金门·风丝袅</h2><p>纳兰性德</p><p><strong>风丝袅，水浸碧天清晓</strong><br>一镜湿云青未了，雨晴春草草<br>梦里轻螺谁扫，帘外落花红小<br>独睡起来情悄悄，寄愁何处好</p><h2 id="好事近·帘外五更风">好事近·帘外五更风</h2><p>纳兰性德</p><p><strong>帘外五更风，消受晓寒时节</strong><br>刚剩秋衾一半，拥透帘残月<br>争教清泪不成冰<br>好处便轻别<br>拟把伤离情绪，待晓寒重说</p><h2 id="一络索·野火拂云微绿">一络索·野火拂云微绿</h2><p>纳兰性德</p><p><strong>野火拂云微绿，西风夜哭</strong><br>苍茫雁翅列秋空，忆写向、屏山曲<br>山海几经翻覆，女墙斜矗<br>看来费尽祖龙心，毕竟为、谁家筑</p><h2 id="清平乐·将愁不去">清平乐·将愁不去</h2><p>纳兰性德</p><p>将愁不去，秋色行难住<br>六曲屏山深院宇<br><strong>日日风风雨雨</strong><br>雨晴篱菊初香，人言此日重阳<br>回首凉云暮叶，黄昏无限思量</p><h2 id="清平乐·凄凄切切">清平乐·凄凄切切</h2><p>纳兰性德</p><p>凄凄切切，惨澹黄花节<br>梦里砧声浑末歇，那更乱蛩悲咽<br>尘生燕子空楼，抛残弦索床头<br><strong>一样晓风残月，而今触绪添愁</strong></p><h2 id="眼儿媚·林下闺房世罕俦">眼儿媚·林下闺房世罕俦</h2><p>纳兰性德</p><p><strong>林下闺房世罕俦，偕隐足风流</strong><br>今来忍见，鹤孤华表，人远罗浮<br>中年定不禁哀乐，其奈忆曾游<br>浣花微雨，采菱斜日，欲去还留</p><h2 id="朝中措·蜀弦秦柱不关情">朝中措·蜀弦秦柱不关情</h2><p>纳兰性德</p><p>蜀弦秦柱不关情，尽日掩云屏<br>己惜轻翎退粉，更嫌弱絮为萍<br><strong>东风多事，余寒吹散，烘暖微酲</strong><br>看尽一帘红雨，为谁亲系花铃</p><h2 id="锦堂春·帘际一痕轻绿">锦堂春·帘际一痕轻绿</h2><p>纳兰性德</p><p>帘际一痕轻绿，墙阴几簇低花<br><strong>夜来微雨西风软，无力任欹斜</strong><br>仿佛个人睡起，晕红不著铅华<br>天寒翠袖添凄楚，愁近欲栖鸦</p><h2 id="海棠春·落红片片浑如雾">海棠春·落红片片浑如雾</h2><p>纳兰性德</p><p>落红片片浑如雾，不教更觅桃源路<br><strong>香径晚风寒，月在花飞处</strong><br>蔷薇影暗空凝贮<br>任碧飐轻衫萦住<br>惊起早栖鸦，飞过秋千去</p><h2 id="清平乐·画屏无睡">清平乐·画屏无睡</h2><p>纳兰性德</p><p><strong>画屏无睡，雨点惊风碎</strong><br>贪话零星兰焰坠，闲了半床红被<br>生来柳絮飘零，便教咒也无灵<br>待问归期还未，已看双睫盈盈</p><h2 id="点绛唇·小院新凉">点绛唇·小院新凉</h2><p>纳兰性德</p><p>小院新凉，晚来顿觉罗衫薄<br>不成孤酌，形影空酬酢<br>萧寺怜君，别绪应萧索<br><strong>西风恶，夕阳吹角，一阵槐花落</strong></p><h2 id="浣溪沙·咏五更，和湘真韵">浣溪沙·咏五更，和湘真韵</h2><p>纳兰性德</p><p>微晕娇花湿欲流，簟纹灯影一生愁<br>梦回疑在远山楼<br><strong>残月暗窥金屈戍，软风徐荡玉帘钩</strong><br>待听邻女唤梳头</p><h2 id="河渎神·凉月转雕阑">河渎神·凉月转雕阑</h2><p>纳兰性德</p><p>凉月转雕阑，萧萧木叶声乾<br>银灯飘落琐窗闲，枕屏几叠秋山<br><strong>朔风吹透青缣被，药炉火暖初沸</strong><br>清漏沉沉无寐，为伊判得憔悴</p><h2 id="相见欢·微云一抹遥峰">相见欢·微云一抹遥峰</h2><p>纳兰性德</p><p>微云一抹遥峰，冷溶溶<br>恰与个人清晓，画眉同<br>红蜡泪，青绫被，水沉浓<br><strong>却与黄茅野店，听西风</strong></p><h2 id="减字木兰花·断魂无据">减字木兰花·断魂无据</h2><p>纳兰性德</p><p>断魂无据，万水千山何处去<br><strong>没个音书，尽日东风上绿除</strong><br>故园春好，寄语落花须自扫<br>莫更伤春，同是恹恹多病人</p><h2 id="采桑子·九日">采桑子·九日</h2><p>纳兰性德</p><p>深秋绝塞谁相忆，木叶萧萧<br>乡路迢迢<br>六曲屏山和梦遥<br><strong>佳时倍惜风光别，不为登高</strong><br>只觉魂销<br>南雁归时更寂寥</p><h2 id="采桑子·非关癖爱轻模样">采桑子·非关癖爱轻模样</h2><p>纳兰性德</p><p>非关癖爱轻模样，冷处偏佳<br>别有根芽，不是人间富贵花<br>谢娘别后谁能惜，飘泊天涯<br><strong>寒月悲笳，万里西风瀚海沙</strong></p><h2 id="眼儿媚·咏红姑娘">眼儿媚·咏红姑娘</h2><p>纳兰性德</p><p><strong>骚屑西风弄晚寒，翠袖倚阑干</strong><br>霞绡裹处，樱唇微绽，靺鞨红殷<br>故宫事往凭谁问，无恙是朱颜<br>玉墀争采，玉钗争插，至正年间</p><h2 id="采桑子·凉生露气湘弦润">采桑子·凉生露气湘弦润</h2><p>纳兰性德</p><p>凉生露气湘弦润，暗滴花梢<br><strong>帘影谁摇，燕蹴风丝上柳条</strong><br>舞鹍镜匣开频掩，檀粉慵调<br>朝泪如潮，昨夜香衾觉梦遥</p><h2 id="临江仙·寒柳">临江仙·寒柳</h2><p>纳兰性德</p><p>飞絮飞花何处是，层冰积雪摧残，疏疏一树五更寒<br>爱他明月好，憔悴也相关<br>最是繁丝摇落后，转教人忆春山<br>湔裙梦断续应难<br><strong>西风多少恨，吹不散眉弯</strong></p><h2 id="满庭芳·堠雪翻鸦">满庭芳·堠雪翻鸦</h2><p>纳兰性德</p><p><strong>堠雪翻鸦，河冰跃马，惊风吹度龙堆</strong><br>阴磷夜泣，此景总堪悲<br>待向中宵起舞，无人处、那有村鸡<br>只应是，金笳暗拍，一样泪沾衣<br>须知今古事，棋枰胜负，翻覆如斯</p><p>叹纷纷蛮触，回首成非<br>剩得几行青史，斜阳下、断碣残碑<br>年华共，混同江水，流去几时回</p><h2 id="临江仙·丝雨如尘云著水">临江仙·丝雨如尘云著水</h2><p>纳兰性德</p><p>丝雨如尘云著水，嫣香碎拾吴宫<br><strong>百花冷暖避东风</strong><br>酷怜娇易散，燕子学偎红<br>人说病宜随月减，恹恹却与春同<br>可能留蝶抱花丛<br>不成双梦影，翻笑杏梁空</p><h2 id="采桑子·严霜拥絮频惊起">采桑子·严霜拥絮频惊起</h2><p>纳兰性德</p><p>严霜拥絮频惊起，扑面霜空<br>斜汉朦胧<br>冷逼毡帷火不红<br><strong>香篝翠被浑闲事，回首西风</strong><br>何处疏钟，一穗灯花似梦中</p><h2 id="临江仙·孤雁">临江仙·孤雁</h2><p>纳兰性德</p><p>霜冷离鸿惊失伴，有人同病相怜<br>拟凭尺素寄愁边，愁多书屡易，双泪落灯前<br>莫对月明思往事，也知消减年年<br><strong>无端嘹唳一声传，西风吹只影，刚是早秋天</strong></p><h2 id="菩萨蛮·朔风吹散三更雪">菩萨蛮·朔风吹散三更雪</h2><p>纳兰性德</p><p><strong>朔风吹散三更雪，倩魂犹恋桃花月</strong><br>梦好莫催醒，由他好处行<br>无端听画角，枕畔红冰薄<br>塞马一声嘶，残星拂大旗</p><h2 id="虞美人·残灯风灭炉烟冷">虞美人·残灯风灭炉烟冷</h2><p>纳兰性德</p><p><strong>残灯风灭炉烟冷，相伴唯孤影</strong><br>判教狼藉醉清樽，为问世间醒眼是何人<br>难逢易散花间酒，饮罢空搔首<br>闲愁总付醉来眠，只恐醒时依旧到樽前</p><h2 id="渔父·收却纶竿落照红">渔父·收却纶竿落照红</h2><p>纳兰性德</p><p><strong>收却纶竿落照红，秋风宁为翦芙蓉</strong><br>人淡淡，水濛濛，吹入芦花短笛中</p><h2 id="浣溪沙·消息谁传到拒霜">浣溪沙·消息谁传到拒霜</h2><p>纳兰性德</p><p>消息谁传到拒霜<br>两行斜雁碧天长<br><strong>晚秋风景倍凄凉</strong><br>银蒜押帘人寂寂，玉钗敲竹信茫茫<br>黄花开也近重阳</p><h2 id="水调歌头·题西山秋爽图">水调歌头·题西山秋爽图</h2><p>纳兰性德</p><p>空山梵呗静，水月影俱沉<br>悠然一境人外，都不许尘侵<br>岁晚忆曾游处，犹记半竿斜照，一抹界疏林<br>绝顶茅庵里，老衲正孤吟<br>云中锡，溪头钓，涧边琴<br>此生著几两屐，谁识卧游心?<br><strong>准拟乘风归去，错向槐安回首，何日得投簪</strong><br>布袜青鞋约，但向画图寻</p><h2 id="鹧鸪天·雁贴寒云次第飞">鹧鸪天·雁贴寒云次第飞</h2><p>纳兰性德</p><p>雁帖寒云次第飞，向南犹自怨归迟<br><strong>谁能瘦马关山道，又到西风扑鬓时</strong><br>人杳杳，思依依，更无芳树有乌啼<br>凭将扫黛窗前月，持向今宵照别离</p><h2 id="浪淘沙·夜雨做成秋">浪淘沙·夜雨做成秋</h2><p>纳兰性德</p><p>夜雨做成秋，恰上心头<br><strong>教他珍重护风流</strong><br>端的为谁添病也，更为谁羞<br>密意未曾休，密愿难酬<br>珠帘四卷月当楼<br>暗忆欢期真似梦，梦也须留</p><h2 id="临江仙·昨夜个人曾有约">临江仙·昨夜个人曾有约</h2><p>纳兰性德</p><p>昨夜个人曾有约，严城玉漏三更<br>一钩新月几疏星<br>夜阑犹未寝，人静鼠窥灯<br><strong>原是瞿唐风间阻，错教人恨无情</strong><br>小阑干外寂无声<br><strong>几回肠断处，风动护花铃</strong></p><h2 id="清平乐·弹琴峡题壁">清平乐·弹琴峡题壁</h2><p>纳兰性德</p><p>泠泠彻夜，谁是知音者<br>如梦前朝何处也，一曲边愁难写<br><strong>极天关塞云中，人随落雁西风</strong><br>唤取红襟翠袖，莫教泪洒英雄</p><h2 id="蝶恋花·又到绿杨曾折处">蝶恋花·又到绿杨曾折处</h2><p>纳兰性德</p><p>又到绿杨曾折处，不语垂鞭，踏遍清秋路<br>衰草连天无意绪，雁声远向萧关去<br><strong>不恨天涯行役苦，只恨西风，吹梦成今古</strong><br>明日客程还几许，沾衣况是新寒雨</p><h2 id="摊破浣溪沙·风絮飘残已化萍">摊破浣溪沙·风絮飘残已化萍</h2><p>纳兰性德</p><p><strong>风絮飘残已化萍，泥莲刚倩藕丝萦</strong><br>珍重别拈香一瓣，记前生<br>人到情多情转薄，而今真个悔多情<br>又到断肠回首处，泪偷零</p><h2 id="于中好·十月初四夜风雨其明日是亡妇生辰">于中好·十月初四夜风雨其明日是亡妇生辰</h2><p>纳兰性德</p><p>尘满疏帘素带飘，真成暗度可怜宵<br>几回偷拭青衫泪，忽傍犀奁见翠翘<br>惟有恨，转无聊<br>五更依旧落花朝<br><strong>衰杨叶尽丝难尽，冷雨凄风打画桥</strong></p><h2 id="蝶恋花·眼底风光留不住">蝶恋花·眼底风光留不住</h2><p>纳兰性德</p><p><strong>眼底风光留不住，和暖和香，又上雕鞍去</strong><br>欲倩烟丝遮别路，垂杨那是相思树<br><strong>惆怅玉颜成间阻，何事东风，不作繁华主</strong><br>断带依然留乞句，斑骓一系无寻处</p><h2 id="踏莎行·倚柳题笺">踏莎行·倚柳题笺</h2><p>纳兰性德</p><p>倚柳题笺，当花侧帽，赏心应比驱驰好<br><strong>错教双鬓受东风，看吹绿影成丝早</strong><br>金殿寒鸦，玉阶春草，就中冷暖和谁道<br>小楼明月镇长闲，人生何事缁尘老</p><h2 id="金缕曲·慰西溟">金缕曲·慰西溟</h2><p>纳兰性德</p><p>何事添凄咽<br>但由他、天公簸弄，莫教磨涅<br>失意每多如意少，终古几人称屈<br>须知道、福因才折<br>独卧藜床看北斗，背高城、玉笛吹成血<br>听谯鼓，二更彻<br>丈夫未肯因人热，且乘闲、五湖料理，扁舟一叶<br>泪似秋霖挥不尽，洒向野田黄蝶<br>须不羡、承明班列<br><strong>马迹车尘忙未了，任西风吹冷长安月</strong><br>又萧寺，花如雪</p><h2 id="于中好·谁道阴山行路难">于中好·谁道阴山行路难</h2><p>纳兰性德</p><p>谁道阴山行路难<br><strong>风毛雨血万人欢</strong><br>松梢露点沾鹰绁，芦叶溪深没马鞍<br>依树歇，映林看<br>黄羊高宴簇金盘<br><strong>萧萧一夕霜风紧，却拥貂裘怨早寒</strong></p><h2 id="赤枣子·风淅淅">赤枣子·风淅淅</h2><p>纳兰性德</p><p><strong>风淅淅，雨纤纤</strong><br>难怪春愁细细添<br>记不分明疑是梦，梦来还隔一重帘</p><h2 id="浣溪沙·欲寄愁心朔雁边">浣溪沙·欲寄愁心朔雁边</h2><p>纳兰性德</p><p><strong>欲寄愁心朔雁边，西风浊酒惨离颜</strong><br>黄花时节碧云天<br>古戍烽烟迷斥堠，夕阳村落解鞍鞯<br>不知征战几人还</p><h2 id="南楼令·塞外重九">南楼令·塞外重九</h2><p>纳兰性德</p><p>古木向人秋，惊蓬掠鬓稠<br>是重阳、何处堪愁<br><strong>记得当年惆怅事，正风雨，下南楼</strong><br>断梦几能留，香魂一哭休<br>怪凉蝉、空满衾裯<br><strong>霜落乌啼浑不睡，偏想出，旧风流</strong></p><h2 id="浣溪沙·雨歇梧桐泪乍收">浣溪沙·雨歇梧桐泪乍收</h2><p>纳兰性德</p><p>雨歇梧桐泪乍收，遣怀翻自忆从头<br><strong>摘花销恨旧风流</strong><br>帘影碧桃人已去，屧痕苍藓径空留<br>两眉何处月如钩</p><h2 id="浣溪沙·十里湖光载酒游">浣溪沙·十里湖光载酒游</h2><p>纳兰性德</p><p>十里湖光载酒游，青帘低映白苹洲<br><strong>西风听彻采菱讴</strong><br>沙岸有时双袖拥，画船何处一竿收<br>归来无语晚妆楼</p><h2 id="浣溪沙·记绾长条欲别难">浣溪沙·记绾长条欲别难</h2><p>纳兰性德</p><p>记绾长条欲别难<br>盈盈自此隔银湾<br><strong>便无风雪也摧残</strong><br>青雀几时裁锦字，玉虫连夜翦春旙<br>不禁辛苦况相关</p><h2 id="于中好·小构园林寂不哗">于中好·小构园林寂不哗</h2><p>纳兰性德</p><p>小构园林寂不哗，疏篱曲径仿山家<br><strong>昼长吟罢风流子，忽听楸枰响碧纱</strong><br>添竹石，伴烟霞<br>拟凭樽酒慰年华<br>休嗟髀里今生肉，努力春来自种花</p><h2 id="淡黄柳·咏柳">淡黄柳·咏柳</h2><p>纳兰性德</p><p>三眠未歇，乍到秋时节<br>一树料阳蝉更咽，曾绾灞陵离别<br><strong>絮己为萍风卷叶，空凄切</strong><br>长条莫轻折，苏小恨，倩他说<br>尽飘零、游冶章台客<br><strong>红板桥空，湔裙人去，依旧晓风残月</strong></p><h2 id="红窗月·燕归花谢">红窗月·燕归花谢</h2><p>纳兰性德</p><p>燕归花谢，早因循、又过清明<br><strong>是一般风景，两样心情</strong><br>犹记碧桃影里、誓三生<br>乌丝阑纸娇红篆，历历春星<br>道休孤密约，鉴取深盟<br>语罢一丝香露、湿银屏</p><h2 id="眼儿媚·中元夜有感">眼儿媚·中元夜有感</h2><p>纳兰性德</p><p>手写香台金字经，惟愿结来生<br>莲花漏转，杨枝露滴，想鉴微诚<br>欲知奉倩神伤极，凭诉与秋擎<br><strong>西风不管，一池萍水，几点荷灯</strong></p><h2 id="菩萨蛮·为春憔悴留春住">菩萨蛮·为春憔悴留春住</h2><p>纳兰性德</p><p>为春憔悴留春住，那禁半霎催归雨<br>深巷卖樱桃，雨余红更娇<br>黄昏清泪阁，忍便花飘泊<br><strong>消得一声莺，东风三月情</strong></p><h2 id="鬓云松令·枕函香">鬓云松令·枕函香</h2><p>纳兰性德</p><p>枕函香，花径漏<br>依约相逢，絮语黄昏后<br><strong>时节薄寒人病酒，刬地梨花，彻夜东风瘦</strong><br>掩银屏，垂翠袖<br>何处吹箫，脉脉情微逗<br>肠断月明红豆蔻，月似当时，人似当时否</p><h2 id="望江南·咏弦月">望江南·咏弦月</h2><p>纳兰性德</p><p>初八月，半镜上青霄<br><strong>斜倚画阑娇不语，暗移梅影过红桥，裙带北风飘</strong></p><h2 id="蝶恋花·出塞">蝶恋花·出塞</h2><p>纳兰性德</p><p>今古河山无定据<br>画角声中，牧马频来去<br>满目荒凉谁可语<br><strong>西风吹老丹枫树</strong><br>从前幽怨应无数<br>铁马金戈，青冢黄昏路<br>一往情深深几许<br>深山夕照深秋雨</p><h2 id="南乡子·为亡妇题照">南乡子·为亡妇题照</h2><p>纳兰性德</p><p>泪咽却无声<br>只向从前悔薄情，凭仗丹青重省识<br>盈盈<br>一片伤心画不成<br>别语忒分明<br>午夜鹣鹣梦早醒<br>卿自早醒侬自梦，更更<br><strong>泣尽风檐夜雨铃</strong></p><h2 id="金人捧露盘·净业寺观莲有怀荪友">金人捧露盘·净业寺观莲有怀荪友</h2><p>纳兰性德</p><p><strong>藕风轻，莲露冷，断虹收，正红窗、初上帘钩</strong><br>田田翠盖，趁斜阳鱼浪香浮<br>此时画阁垂杨岸，睡起梳头<br>旧游踪，招提路，重到处，满离忧<br>想芙蓉湖上悠悠<br>红衣狼藉，卧看少妾荡兰舟<br><strong>午风吹断江南梦，梦里菱讴</strong></p><h2 id="菩萨蛮·春云吹散湘帘雨">菩萨蛮·春云吹散湘帘雨</h2><p>纳兰性德</p><p>春云吹散湘帘雨，絮黏蝴蝶飞还住<br><strong>人在玉楼中，楼高四面风</strong><br>柳烟丝一把，暝色笼鸳瓦<br>休近小阑干，夕阳无限山</p><h2 id="南歌子·古戍">南歌子·古戍</h2><p>纳兰性德</p><p>古戍饥乌集，荒城野雉飞<br>何年劫火剩残灰，试看英雄碧血，满龙堆<br>玉帐空分垒，金笳已罢吹<br><strong>东风回首尽成非，不道兴亡命也，岂人为</strong></p><h2 id="忆江南·宿双林禅院有感">忆江南·宿双林禅院有感</h2><p>纳兰性德</p><p>心灰尽、有发未全僧<br><strong>风雨消磨生死别，似曾相识只孤檠，情在不能醒</strong><br>摇落后，清吹那堪听<br><strong>淅沥暗飘金井叶，乍闻风定又钟声，薄福荐倾城</strong></p><h2 id="百字令·宿汉儿村">百字令·宿汉儿村</h2><p>纳兰性德</p><p><strong>无情野火，趁西风烧遍、天涯芳草</strong><br>榆塞重来冰雪里，冷入鬓丝吹老<br>牧马长嘶，征笳乱动，并入愁怀抱<br>定知今夕，庾郎瘦损多少<br>便是脑满肠肥，尚难消受，此荒烟落照<br><strong>何况文园憔悴后，非复酒垆风调</strong><br>回乐峰寒，受降城远，梦向家山绕<br>茫茫百感，凭高唯有清啸</p><h2 id="清平乐·风鬟雨鬓">清平乐·风鬟雨鬓</h2><p>纳兰性德</p><p><strong>风鬟雨鬓，偏是来无准</strong><br>倦倚玉兰看月晕，容易语低香近<br><strong>软风吹遍窗纱，心期便隔天涯</strong><br>从此伤春伤别，黄昏只对梨花</p><h2 id="清平乐·参横月落">清平乐·参横月落</h2><p>纳兰性德</p><p>参横月落，客绪从谁托<br>望里家山云漠漠，似有红楼一角<br><strong>不如意事年年，消磨绝塞风烟</strong><br>输与五陵公子，此时梦绕花前</p><h2 id="天仙子·梦里藻芜青一剪">天仙子·梦里藻芜青一剪</h2><p>纳兰性德</p><p>梦里蘼芜青一剪，玉郎经岁音书远<br>暗钟明月不归来，梁上燕，轻罗扇<br><strong>好风又落桃花片</strong></p><h2 id="天仙子·渌水亭秋夜">天仙子·渌水亭秋夜</h2><p>纳兰性德</p><p><strong>水浴凉蟾风入袂，鱼鳞蹙损金波碎</strong><br>好天良夜酒盈尊，心自醉，愁难睡<br><strong>西风月落城乌起</strong></p><h2 id="浣溪沙·藕荡桥边埋钓筒">浣溪沙·藕荡桥边埋钓筒</h2><p>纳兰性德</p><p>藕荡桥边埋钓筒，苎萝西去五湖东<br>笔床茶灶太从容<br><strong>况有短墙银杏雨，更兼高阁玉兰风</strong><br>画眉闲了画芙蓉</p><h2 id="浣溪沙·身向云山那畔行">浣溪沙·身向云山那畔行</h2><p>纳兰性德</p><p><strong>身向云山那畔行，北风吹断马嘶声</strong><br>深秋远塞若为情<br>一抹晚烟荒戍垒，半竿斜日旧关城<br>古今幽恨几时平</p><h2 id="菩萨蛮·回文">菩萨蛮·回文</h2><p>纳兰性德</p><p>雾窗寒对遥天暮，暮天遥对寒窗雾<br>花落正啼鸦，鸦啼正落花<br>袖罗垂影瘦，瘦影垂罗袖<br><strong>风翦一丝红，红丝一翦风</strong></p><h2 id="菩萨蛮·阑风伏雨催寒食">菩萨蛮·阑风伏雨催寒食</h2><p>纳兰性德</p><p><strong>阑风伏雨催寒食，樱桃一夜花狼藉</strong><br>刚与病相宜，锁窗薰绣衣<br>画眉烦女伴，央及流莺唤<br>半晌试开奁，娇多直自嫌</p><h2 id="菩萨蛮·萧萧几叶风兼雨">菩萨蛮·萧萧几叶风兼雨</h2><p>纳兰性德</p><p><strong>萧萧几叶风兼雨，离人偏识长更苦</strong><br>欹枕数秋天，蟾蜍下早弦<br>夜寒惊被薄，泪与灯花落<br>无处不伤心，轻尘在玉琴</p><h2 id="菩萨蛮·窗前桃蕊娇如倦">菩萨蛮·窗前桃蕊娇如倦</h2><p>纳兰性德</p><p><strong>窗前桃蕊娇如倦，东风泪洗胭脂面</strong><br>人在小红楼，离情唱《石州》<br>夜来双燕宿，灯背屏腰绿<br>香尽雨阑珊，薄衾寒不寒</p><h2 id="菩萨蛮·雾窗寒对遥天暮">菩萨蛮·雾窗寒对遥天暮</h2><p>纳兰性德</p><p>雾窗寒对遥天暮，暮天遥对寒窗雾<br>花落正啼鸦，鸦啼正落花<br>袖罗垂影瘦，瘦影垂罗袖<br><strong>风翦一丝红，红丝一翦风</strong></p><h2 id="菩萨蛮·飘蓬只逐惊飚转">菩萨蛮·飘蓬只逐惊飚转</h2><p>纳兰性德</p><p>飘蓬只逐惊飚转，行人过尽烟光远<br><strong>立马认河流，茂陵风雨秋</strong><br>寂寥行殿锁，梵呗琉璃火<br>塞雁与宫鸦，山深日易斜</p><h2 id="菩萨蛮·为陈其年题照">菩萨蛮·为陈其年题照</h2><p>纳兰性德</p><p>晓寒瘦著西南月，丁丁漏箭余香咽<br><strong>春已十分宜，东风无是非</strong><br>蜀魂羞顾影，玉照斜红冷<br>谁唱《后庭花》，新年忆旧家</p><h2 id="菩萨蛮·催花未歇花奴鼓">菩萨蛮·催花未歇花奴鼓</h2><p>纳兰性德</p><p>催花未歇花奴鼓，酒醒已见残红舞<br><strong>不忍覆余觞，临风泪数行</strong><br>粉香看又别，空剩当时月<br>月也异当时，凄清照鬓丝</p><h2 id="菩萨蛮·过张见阳山居，赋赠">菩萨蛮·过张见阳山居，赋赠</h2><p>纳兰性德</p><p>车尘马迹纷如织，羡君筑处真幽僻<br><strong>柿叶一林红，萧萧四面风</strong><br>功名应看镜，明月秋河影<br>安得此山间，与君高卧闲</p><h2 id="菩萨蛮·惜春春去惊新燠">菩萨蛮·惜春春去惊新燠</h2><p>纳兰性德</p><p>惜春春去惊新燠，粉融轻汗红绵扑<br>妆罢只思眠，江南四月天<br>绿阴帘半揭，此景清幽绝<br><strong>行度竹林风，单衫杏子红</strong></p><h2 id="长相思·一重山">长相思·一重山</h2><p>纳兰性德</p><p>一重山，两重山，山远天高烟水寒，相思枫叶丹<br><strong>菊花开，菊花残，塞雁高飞人未还，一帘风月闲</strong></p><h2 id="卜算子·新柳">卜算子·新柳</h2><p>纳兰性德</p><p>娇软不胜垂，瘦怯那禁舞<br><strong>多事年年二月风，翦出鹅黄缕</strong><br>一种可怜生，落日和烟雨<br>苏小门前长短条，即渐迷行处</p><h2 id="采桑子·咏春雨">采桑子·咏春雨</h2><p>纳兰性德</p><p><strong>嫩烟分染鹅儿柳，一样风丝</strong><br>似整如欹，才着春寒瘦不支<br>凉侵晓梦轻蝉腻，约略红肥<br>不惜葳蕤，碾取名香作地衣</p><h2 id="采桑子·桃花羞作无情死">采桑子·桃花羞作无情死</h2><p>纳兰性德</p><p><strong>桃花羞作无情死，感激东风，吹落娇红，飞入窗间伴懊侬</strong><br>谁怜辛苦东阳瘦，也为春慵，不及芙蓉，一片幽情冷处浓</p><h2 id="虞美人·黄昏又听城头角">虞美人·黄昏又听城头角</h2><p>纳兰性德</p><p>黄昏又听城头角，病起心情恶<br>药炉初沸短檠青，无那残香半缕恼多情<br>多情自古原多病，清镜怜清影<br><strong>一声弹指泪如丝，央及东风休遣玉人知</strong></p><h2 id="金缕曲·亡妇忌日有感">金缕曲·亡妇忌日有感</h2><p>纳兰性德</p><p>此恨何时已<br>滴空阶、寒更雨歇，葬花天气<br>三载悠悠魂梦杳，是梦久应醒矣<br>料也觉、人间无味<br>不及夜台尘土隔，冷清清、一片埋愁地<br>钗钿约，竟抛弃<br>重泉若有双鱼寄<br>好知他、年来苦乐，与谁相倚<br>我自中宵成转侧，忍听湘弦重理<br>待结个、他生知己<br><strong>还怕两人俱薄命，再缘悭、剩月零风里</strong><br>清泪尽，纸灰起</p><h2 id="霜天晓角·重来丁酒">霜天晓角·重来丁酒</h2><p>纳兰性德</p><p><strong>重来丁酒，折尽风前柳</strong><br>若问看花情绪，似当日，怎能够<br><strong>休为西风瘦，痛饮频搔首</strong><br>自古青蝇白璧，天已早安排就</p><h2 id="减字木兰花·烛花摇影">减字木兰花·烛花摇影</h2><p>纳兰性德</p><p>烛花摇影，冷透疏衾刚欲醒<br>待不思量，不许孤眠不断肠<br>茫茫碧落，天上人间情一诺<br><strong>银汉难通，稳耐风波愿始从</strong></p><h2 id="采桑子·巂周声里严关峙">采桑子·巂周声里严关峙</h2><p>纳兰性德</p><p>巂周声里严关峙，匹马登登，乱踏黄尘<br>听报邮签第几程<br><strong>行人莫话前朝事，风雨诸陵，寂寞鱼灯</strong><br>天寿山头冷月横</p><h2 id="拟古·高云媚春日">拟古·高云媚春日</h2><p>纳兰性德</p><p>高云媚春日，坐觉鱼鸟亲<br>可怜暮春候，病中别故人<br><strong>莺啼花乱落，风吹成锦茵</strong><br>君去一何速，到家垂柳新<br>芙蓉湖上月，照君垂长纶</p><h2 id="中元前一夕枕上偶成">中元前一夕枕上偶成</h2><p>纳兰性德</p><p>酒醒池塘耿不眠，帐纹漠漠隔轻烟<br><strong>溪风到竹初疑雨，秋月如弓渐满弦</strong><br>残梦远经吹角戍，明河长亘衣天<br>哀蛩饯晓浑多事，也似严更古驿边</p><h2 id=""></h2><p>纳兰性德</p><p><strong>朔风吹古柳，时序忽代续</strong><br>庭草萎已尽，顾视白日速<br>吾本落拓人，无为自拘束<br>倜傥寄天地，樊笼非所欲<br>嗟载华亭鹤，荣名反以辱<br>有客叹二毛，操觚序金谷<br>酒空人尽去，聚散何局促<br>揽衣起长歌，明月皎如玉</p><h2 id="盛京">盛京</h2><p>纳兰性德</p><p>拔地蛟龙宅，当关虎豹城<br>山连长白秀，江入混同清<br><strong>庙社灵风肃，豪强右族更</strong><br>明明开创业，休拟作陪京</p><h2 id="柳条边">柳条边</h2><p>纳兰性德</p><p>是处垣篱防绝塞，角端西来画疆界<br>汉使今行虎落中，秦城合筑龙荒外<br>龙荒虎落两依然，护得当时饮马泉<br><strong>若使春风知别苦，不应吹到柳条边</strong></p><h2 id="玉泉">玉泉</h2><p>纳兰性德</p><p><strong>芙蓉殿俯御河寒，残月西风并马看</strong><br>十里松杉清绝处，不知晓雪在西山</p><h2 id="汤泉应制·六龙初驻浴蓝天">汤泉应制·六龙初驻浴蓝天</h2><p>纳兰性德</p><p>六龙初驻浴蓝天，碧瓦朱旗共一川<br>润逼仙桃红自舞，醉酣人柳绿犹眠<br><strong>吹成暖律回燕谷，散作薰风入舜弦</strong><br>最是垂衣深圣德，不须词笔颂甘泉</p><h2 id="记征人语">记征人语</h2><p>纳兰性德</p><p>边月无端照别离，故园何处寄相思<br><strong>西风不解征人语，一夕萧萧满大旗</strong></p><h2 id="梅花落">梅花落</h2><p>纳兰性德</p><p>春色凤城来，寒梅逼岁开<br><strong>条风初入树，缥雪渐侵苔</strong><br>粉逐莺衣散，香黏蝶翅回<br>陇头人未返，急管莫频催</p><h2 id="扈驾西山">扈驾西山</h2><p>纳兰性德</p><p>凤翥龙蟠势作环，浮青不断太行山<br><strong>九重殿阁葱茏里，一气风云吐纳间</strong><br>熊虎自当驰道伏，蛟螭长棒御书闲<br>黄图此日论形胜，惭愧频叨侍从班</p><h2 id="菩萨蛮·春花春月年年客">菩萨蛮·春花春月年年客</h2><p>纳兰性德</p><p>春花春月年年客，怜春又怕春离别<br><strong>只为晓风愁，催花扑玉钩</strong><br>娟娟双蛱蝶，宛转飞花侧<br>花底一声歌，疼花花奈何</p><h2 id="拟冬日景忠山应制·岧峣铁凤锁琳宫">拟冬日景忠山应制·岧峣铁凤锁琳宫</h2><p>纳兰性德</p><p>岧峣铁凤锁琳宫，亲侍銮舆度碧空<br>圣主岂因崇象教，宸游直自接鸿蒙<br>远山雪有一峰白，别浦枫余几树红<br><strong>天意不教常肃杀，伫看宇宙遍春风</strong></p><h2 id="拟古·予生未三十">拟古·予生未三十</h2><p>纳兰性德</p><p>予生未三十，忧愁居其半<br><strong>心事如落花，春风吹已断</strong><br>行当适远道，作记殊汗漫<br>寒食青草多，薄暮烟冥冥<br>山桃一夜红，茵箔随飘零<br>愿餐玉红草，一醉不复醒</p><h2 id="芳树">芳树</h2><p>纳兰性德</p><p>连理无分影，同心岂独芳<br>傍檐巢翡翠，临水宿鸳鸯<br>叶叶含春思，枝枝向画廊<br>君情若比树，妾意复何伤<br>陌上谁攀折，闺中思复侵<br>眼凝清露重，眉敛翠烟深<br><strong>羌笛临风曲，悲笳出塞音</strong><br>纵垂千万缕，那系别离心</p><h2 id="明月棹孤舟·海淀">明月棹孤舟·海淀</h2><p>纳兰性德</p><p>一片亭亭空凝伫<br><strong>趁西风霓裳偏舞</strong><br>白鸟惊飞，菰蒲叶乱，断续浣纱人语<br>丹碧驳残秋夜雨<br><strong>风吹去采菱越女</strong><br>辘轳声断，昏鸦欲起，多少博山情绪</p><h2 id="南海子·相风微动九门开">南海子·相风微动九门开</h2><p>纳兰性德</p><p><strong>相风微动九门开，南陌离宫万柳栽</strong><br>草色横粘下马泊，水光平占晾鹰台<br>锦鞯欲射波间去，玉辇疑从岛上回<br>自是软红惊十丈，天教到此洗尘埃</p><h2 id="班婕妤怨歌">班婕妤怨歌</h2><p>纳兰性德</p><p>团团望舒月，皓皓冰蚕绢<br>欲却炎天暑，比月裁成扇<br><strong>望舒圆易缺，金风换炎节</strong><br><strong>风凉秋气寒，匣扇复谁看</strong><br>扇弃何足道，感妾伤怀抱<br>对月泪如丝，君恩异旧时</p><h2 id="渡江云三犯・渡江云">渡江云三犯・渡江云</h2><p>吴文英</p><p><strong>羞红颦浅恨，晚风为落，片绣点重茵。</strong><br>旧堤分燕尾，桂棹轻鸥，宝勒倚残云。<br>千丝怨碧，渐路入、仙坞迷津。<br>肠漫回，隔花时见，背面楚腰身。<br>逡巡。<br>题门惆怅，堕履牵萦，数幽期难准。<br>还始觉、留情缘眼，宽带因春。<br><strong>明朝事与孤烟冷，做满湖、风雨愁人。</strong><br>山黛暝，尘波澹绿无痕。</p><h2 id="霜叶飞">霜叶飞</h2><p>吴文英</p><p>断烟离绪。<br>关心事，斜阳红隐霜树。<br><strong>半壶秋水荐黄花，香西风雨。</strong><br>纵玉勒、轻飞迅羽。<br>凄凉谁吊荒台古。<br>记醉蹋南屏，彩扇咽、寒蝉倦梦，不知蛮素。<br>聊对旧节传杯，尘笺蠹管，断阕经岁慵赋。<br>小蟾斜影转东篱，夜冷残蛩语。<br>早白发、缘愁万缕。<br>惊飙从卷乌纱去。<br>漫细将、茱萸看，但约明年，翠微高处。</p><h2 id="瑞鹤仙">瑞鹤仙</h2><p>吴文英</p><p>晴丝牵绪乱。<br>对沧江斜日，花飞人远。<br>垂杨暗吴苑。<br><strong>正旗亭烟冷，河桥风暖。</strong><br>兰情蕙盼。<br>惹相思、春根酒畔。<br>又争知、吟骨萦销，渐把旧衫重翦。<br>凄断。<br>流红千浪，缺月孤楼，总难留燕。<br>歌尘凝扇。<br>待凭信，拌分钿。<br>试挑灯欲写，还依不忍，笺幅偷和泪卷。<br>寄残云、剩雨蓬莱，也应梦见。</p><h2 id="宴清都">宴清都</h2><p>吴文英</p><p>绣幄鸳鸯柱。<br>红情密，腻云低护秦树。<br>芳根兼倚，花梢钿合，锦屏人妒。<br><strong>东风睡足交枝，正梦花、瑶钗燕股。</strong><br>障滟蜡、满照欢丛，嫠蟾冷落羞度。<br><strong>人间万感幽单，华清惯浴，春盎风露。</strong><br>连鬟并暖，同心共结，向承恩处。<br>凭谁为歌长恨，暗殿锁、秋灯夜语。<br>叙旧期、不负春盟，红朝翠暮。</p><h2 id="风入松">风入松</h2><p>吴文英</p><p><strong>听风听雨过清明。</strong><br>愁草瘗花铭。<br>楼前绿暗分携路，一丝柳、一寸柔情。<br>料峭春寒中酒，交加晓梦啼莺。<br>西园日日扫林亭。<br>依旧赏新晴。<br>黄蜂频扑秋千索，有当时、纤手香凝。<br>惆怅双鸳不到，幽阶一夜苔生。</p><h2 id="莺啼序">莺啼序</h2><p>吴文英</p><p>残寒正欺病酒，掩沈香绣户。<br>燕来晚、飞入西城，似说春事迟暮。<br>画船载、清明过却，晴烟冉冉吴宫树。<br><strong>念羁情游荡，随风化为轻絮。</strong><br>十载西湖，傍柳系马，趁娇尘软雾。<br>溯红渐、招入仙溪，锦儿偷寄幽素。<br>倚银屏、春宽梦窄，断红湿、歌纨金缕。<br>暝堤空，轻把斜阳，总还鸥鹭。<br>幽兰旋老，杜若还生，水乡尚寄旅。<br><strong>别後访、六桥无信，事往花委，瘗玉埋香，几番风雨。</strong><br>长波妒盼，遥山羞黛，渔灯分影春江宿，记当时、短楫桃根渡。<br>青楼彷佛，临分败壁题诗，泪墨惨澹尘土。<br>危亭望极，草色天涯，吹鬓侵半苎。<br>暗点检、离痕欢唾，尚染鲛绡，凤迷归，破鸾慵舞。<br>殷勤待写，书中长恨，蓝霞辽海沈过雁，漫相思、弹入哀筝柱。<br>伤心千里江南，怨曲重招，断魂在否。</p><h2 id="瑞鹤仙-2">瑞鹤仙</h2><p>袁去华</p><p>郊原初过雨。<br><strong>见败叶零乱，风定犹舞。</strong><br>斜阳挂深树。<br>映浓愁浅黛，遥山眉妩。<br>来时旧路。<br>尚岩花、娇黄半吐。<br>到而今，唯有溪边流水，见人如故。<br>无语。<br>邮亭深静，下马还寻，旧曾题处。<br>无聊倦旅。<br>伤离恨，最愁苦。<br>纵收香藏镜，他年重到，人面桃花在否。<br>念沈沈、小阁幽窗，有时梦去。</p><h2 id="剑器近">剑器近</h2><p>袁去华</p><p>夜来雨。<br><strong>赖倩得、东风吹住。</strong><br>海棠正妖饶处。<br>且留取。<br>悄庭户。<br>试细听、莺啼燕语。<br>分明共人愁绪。<br>怕春去。<br>佳树。<br>翠阴初转午。<br><strong>重帘未卷，乍睡起、寂寞看风絮。</strong><br>偷弹清泪寄烟波，见江头故人，为言憔悴如许。<br>彩笺无数。<br>去却寒暄，到了浑无定据。<br>断肠落日千山暮。</p><h2 id="安公子">安公子</h2><p>袁去华</p><p>弱柳丝千缕。<br>嫩黄匀遍鸦啼处。<br><strong>寒入罗衣春尚浅，过一番风雨。</strong><br>问燕子来时，绿水桥边路。<br>曾画楼、见个人人否。<br>料静掩云窗，尘满哀弦危柱。<br>庾信愁如许。<br>为谁都著眉端聚。<br><strong>独立东风弹泪眼，寄烟波东去。</strong><br>念永昼春闲，人倦如何度。<br>闲傍枕、百啭黄鹂语。<br>唤觉来厌厌，残照依然花坞。</p><h2 id="卜算子">卜算子</h2><p>陆游</p><p>驿外断桥边，寂寞开无主。<br><strong>已是黄昏独自愁，更著风和雨。</strong><br>无意苦争春，一任群芳妒。<br>零落成泥碾作尘，只有香如故。</p><h2 id="桂枝香">桂枝香</h2><p>王安石</p><p>登临送目。<br>正故国晚秋，天气初肃。<br>千里澄江似练，翠峰如簇。<br><strong>归帆去棹残阳里，背西风、酒旗斜矗。</strong><br>彩舟云淡，星河鹭起，画图难足。<br>念往昔、繁华竞逐。<br>叹门外楼头，悲恨相续。<br>千古凭高，对此漫嗟荣辱。<br>六朝旧事随流水，但寒烟、芳草凝绿。<br>至今商女，时时犹唱，後庭遗曲。</p><h2 id="清平乐">清平乐</h2><p>王安石</p><p>留春不住。<br>费尽莺儿语。<br>满地残红宫锦污。<br><strong>昨夜南园风雨。</strong><br>小怜初上琵琶。<br>晓来思绕天涯。<br><strong>不肯画堂朱户，春风自在杨花。</strong></p><h2 id="千秋岁引">千秋岁引</h2><p>王安石</p><p>别馆寒砧，孤城画角。<br>一派秋声入寥廓。<br>东归燕从海上去，南来雁向沙头落。<br><strong>楚台风，庾楼月，宛如昨。</strong><br>无奈被些名利缚。<br>无奈被他情担阁。<br><strong>可惜风流总闲却。</strong><br>当初漫留华表语，而今误我秦楼约。<br>梦阑时，酒醒後，思量著。</p><h2 id="清平乐-2">清平乐</h2><p>王安国</p><p>留春不住。<br>费尽莺儿语。<br>满地残红宫锦污。<br><strong>昨夜南园风雨。</strong><br>小怜初上琵琶。<br>晓来思绕天涯。<br><strong>不肯画堂朱户，春风自在梨花。</strong></p><h2 id="蝶恋花">蝶恋花</h2><p>晏几道</p><p><strong>卷絮风头寒欲尽。</strong><br>坠粉飘红，日日香成阵。<br>新酒又添残酒困。<br>今春不减前春恨。<br>蝶去莺飞无处问。<br>隔水高楼，望断双鱼信。<br>恼乱层波横一寸。<br>斜阳只与黄昏近。</p><h2 id="鹧鸪天">鹧鸪天</h2><p>晏几道</p><p>彩袖殷勤捧玉锺。<br>当年拼却醉颜红。<br><strong>舞低杨柳楼心月，歌尽桃花扇影风。</strong><br>从别後，忆相逢。<br>几回魂梦与君同。<br>今宵剩把银釭照，犹恐相逢是梦中。</p><h2 id="木兰花・玉楼春">木兰花・玉楼春</h2><p>晏几道</p><p>秋千院落重帘暮。<br>彩笔闲来题绣户。<br><strong>墙头丹杏雨馀花，门外绿杨风後絮。</strong><br>朝云信断知何处。<br>应作襄王春梦去。<br>紫骝认得旧游踪，嘶过画桥东畔路。</p><h2 id="玉楼春">玉楼春</h2><p>晏几道</p><p><strong>东风又作无情计。</strong><br>艳粉娇红吹满地。<br>碧楼帘影不遮愁，还似去年今日意。<br>谁知错管春残事。<br>到处登临曾费泪。<br>此时金盏直须深，看尽落花能几醉。</p><h2 id="水龙吟">水龙吟</h2><p>苏轼</p><p>似花还似非花，也无人惜从教坠。<br>抛家傍路，思量却是，无情有思。<br>萦损柔肠，困酣娇眼，欲开还闭。<br><strong>梦随风万里，寻郎去处，又还被、莺呼起。</strong><br>不恨此花飞尽，恨西园、落红难缀。<br>晓来雨过，遗踪何在，一池萍碎。<br>春色三分，二分尘土，一分流水。<br>细看来，不是杨花点点，是离人泪。</p><h2 id="水调歌头">水调歌头</h2><p>苏轼</p><p>明月几时有，把酒问青天。<br>不知天上宫阙，今夕是何年。<br><strong>我欲乘风归去，又恐琼楼玉宇，高处不胜寒。</strong><br>起舞弄清影，何似在人间。<br>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆。<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p><h2 id="临江仙">临江仙</h2><p>苏轼</p><p>夜饮东坡醒复醉，归来仿佛三更。<br>家童鼻息已雷鸣。<br>敲门都不应，倚杖听江声。<br>长恨此身非我有，何时忘却营营。<br><strong>夜阑风静縠纹平。</strong><br>小舟从此逝，江海寄馀生。</p><h2 id="定风波">定风波</h2><p>苏轼</p><p>莫听穿林打叶声。<br>何妨吟啸且徐行。<br>竹杖芒鞋轻胜马。<br>谁怕。<br>一蓑烟雨任平生。<br><strong>料峭春风吹酒醒。</strong><br>微冷。<br>山头斜照却相迎。<br>回首向来萧瑟处。<br>归去。<br><strong>也无风雨也无晴。</strong></p><h2 id="贺新郎">贺新郎</h2><p>苏轼</p><p>乳燕飞华屋。<br>悄无人、桐阴转午，晚凉新浴。<br>手弄生绡白团扇，扇手一时似玉。<br>渐困倚、孤眠清熟。<br>帘外谁来推绣户，枉教人、梦断瑶台曲。<br><strong>又却是，风敲竹。</strong><br>石榴半吐红巾蹙。<br>待浮花、浪蕊都尽，伴君幽独。<br>艳一枝细看取，芳心千重似束。<br><strong>又恐被、秋风惊绿。</strong><br>若待得君来向此，花前对酒不忍触。<br>共粉泪，两蔌蔌。</p><h2 id="洞仙歌">洞仙歌</h2><p>苏轼</p><p>冰肌玉骨，自清凉无汗。<br><strong>水殿风来暗香满。</strong><br>绣帘开、一点明月窥人，人未寝、枕钗横鬓乱。<br>起来携素手，庭户无声，时见疏星渡河汉。<br>试问夜如何，夜已三更，金波淡、玉绳低转。<br><strong>但屈指、西风几时来，又不道、流年暗中偷换。</strong></p><h2 id="永遇乐">永遇乐</h2><p>苏轼</p><p><strong>明月如霜，好风如水，清景无限。</strong><br>曲港跳鱼，圆荷泻露，寂寞无人见。<br>如三鼓，铿然一叶，黯黯梦云惊断。<br>夜茫茫，重寻无处，觉来小园行遍。<br>天涯倦客，山中归路，望断故园心眼。<br>燕子楼空，佳人何在，空锁楼中燕。<br>古今如梦，何曾梦觉，但有旧欢新怨。<br>异时对，黄楼夜景，为余浩叹。</p><h2 id="谢池春">谢池春</h2><p>李之仪</p><p>残寒销尽，疏雨过、清明後。<br><strong>花径敛馀红，风沼萦新皱。</strong><br>乳燕穿庭户，飞絮沾襟袖。<br>正佳时，仍晚昼。<br>著人滋味，真个浓如酒。<br>频移带眼，空只恁、厌厌瘦。<br>不见又思量，见了还依旧。<br>为问频相见，何似长相守。<br>天不老，人未偶。<br>且将此恨，分付庭前柳。</p><h2 id="高阳台">高阳台</h2><p>韩</p><p>频听银签，重燃绛蜡，年华衮衮惊心。<br>饯旧迎新，能消几刻光阴。<br>老来可惯通宵饮，待不眠、还怕寒侵。<br>掩清尊。<br>多谢梅花，伴我微吟。<br>邻娃已试春妆了，更蜂腰簇翠，燕股横金。<br><strong>勾引东风，也知芳思难禁。</strong><br>朱颜那有年年好，逞艳游、赢取如今。<br>恣登临。<br>残雪楼台，迟日园林。</p><h2 id="玉楼春-2">玉楼春</h2><p>严仁</p><p><strong>春风只在园西畔。</strong><br>荠菜花繁胡蝶乱。<br>冰池晴绿照还空，香径落红吹已断。<br>意长翻恨游丝短。<br>尽日相思罗带缓。<br>宝奁明月不欺人，明日归来君试看。</p><h2 id="高阳台-2">高阳台</h2><p>张炎</p><p>接叶巢莺，平波卷絮，断桥斜日归船。<br>能几番游，看花又是明年。<br><strong>东风且伴蔷薇住，到蔷薇、春已堪怜。</strong><br>更凄然。<br>万绿西泠，一抹荒烟。<br>当年燕子知何处，但苔深韦曲，草暗斜川。<br>见说新愁，如今也到鸥边。<br>无心再续笙歌梦，掩重门、浅醉闲眠。<br>莫开帘。<br>怕见飞花，怕听啼鹃。</p><h2 id="贺新郎-2">贺新郎</h2><p>刘克庄</p><p>深院榴花吐。<br><strong>画帘开、衣纨扇，午风清暑。</strong><br>儿女纷纷夸结束，新样钗符艾虎。<br>早已有、游人观渡。<br>老大逢场慵作戏，任陌头、年少争旗鼓。<br>溪雨急，浪花舞。<br>灵均标致高如许。<br>忆生平、既纫兰佩，更怀椒糈。<br>谁信骚魂千载後，波底垂涎角黍。<br>又说是、蛟馋龙怒。<br>把似而今醒到了，料当年、醉死差无苦。<br>聊一笑，吊千古。</p><h2 id="贺新郎-3">贺新郎</h2><p>刘克庄</p><p>湛湛长空黑。<br><strong>更那堪、斜风细雨，乱愁如织。</strong><br>老眼平生空四海，赖有高楼百尺。<br>看浩荡、千崖秋色。<br>白发书生神州泪，尽凄凉、不向牛山滴。<br>追往事，去无迹。<br>少年自负凌云笔。<br>到而今、春华落尽，满怀萧瑟。<br>常恨世人新意少，爱说南朝狂客。<br>把破帽、年年拈出。<br>若对黄花孤负酒，怕黄花、也笑人岑寂。<br>鸿北去，日西匿。</p><h2 id="六州歌头">六州歌头</h2><p>韩元吉</p><p><strong>东风著意。</strong><br>先上小桃枝。<br>红粉腻。<br>娇如醉。<br>倚朱扉。<br>记年时。<br>隐映新妆，面临水岸。<br>春将半。<br>云日暖。<br>斜桥转。<br>夹城西。<br>草软莎平跋马，垂杨渡、玉勒争嘶。<br>认蛾眉凝笑，脸薄拂燕支。<br>绣户曾窥。<br>恨依依。<br>共携手处。<br>香如雾。<br>红随步。<br>怨春迟。<br>消瘦损。<br>凭谁问。<br>只花知。<br>泪空垂。<br>旧日堂前燕，和烟雨，又双飞。<br>人自老。<br>春长好。<br>梦佳期。<br><strong>前度刘郎，几许风流地，花也应悲。</strong><br>但茫茫暮霭，目断武陵溪。<br>往事难追。</p><h2 id="永遇乐-2">永遇乐</h2><p>辛弃疾</p><p>千古江山，英雄无觅，孙仲谋处。<br><strong>舞榭歌台，风流总被，雨打风吹去。</strong><br>斜阳草树，寻常巷陌，人道寄奴曾住。<br>想当年，金戈铁马，气吞万里如虎。<br>元嘉草草，封狼居胥，赢得仓皇北顾。<br>四十三年，望中犹记，烽火扬州路。<br>可堪回首，佛狸祠下，一片神鸦社鼓。<br>凭谁问，廉颇老矣，尚能饭否。</p><h2 id="绿意・疏影">绿意・疏影</h2><p>张炎</p><p>碧圆自洁。<br>向浅洲远渚，亭亭清绝。<br>犹有遗簪，不展秋心，能卷几多炎热。<br>鸳鸯密语同倾盖，且莫与、浣纱人说。<br><strong>恐怨歌、忽断花风，碎却翠云千叠。</strong><br>回首当年汉舞，怕飞去、谩皱留仙裙摺。<br>恋恋青衫，犹染枯香，还叹鬓丝飘雪。<br><strong>盘心清露如铅水，又一夜、西风吹折。</strong><br>喜静看、匹练秋光，倒泻半湖明月。</p><h2 id="绿头鸭・多丽">绿头鸭・多丽</h2><p>晁端礼</p><p>晚云收，淡天一片琉璃。<br>烂银盘、来从海底，皓色千里澄辉。<br>莹无尘、素娥淡伫，静可数、丹桂参差。<br><strong>玉露初零，金风未凛，一年无似此佳时。</strong><br>露坐久，疏莹时度，乌鹊正南飞。<br>瑶台冷，栏干凭暖，玉下迟迟。<br>念佳人，音尘别後，对此应解相思。<br>最关情、漏声正永，暗断肠、花影偷移。<br>料得来宵，清光未减，阴晴天气又争知。<br>共凝恋、如今别後，还是隔年期。<br>人强健，清尊素影，长愿相随。</p><h2 id="洞仙歌-2">洞仙歌</h2><p>李元膺</p><p>雪云散尽，放晓晴池院。<br>杨柳于人便青眼。<br><strong>更风流多处，一点梅心、相映远。</strong><br>约略轻笑浅。<br>一年春好处，不在浓芳，小艳疏香最娇软。<br>到清明时候，百紫千红花正乱。<br><strong>已失春风一半。</strong><br>蚤占取韶光，共追游，但莫管春寒，醉红自暖。</p><h2 id="渔家傲">渔家傲</h2><p>朱服</p><p><strong>小雨廉纤风细细。</strong><br>万家杨柳轻烟里。<br>恋树湿花飞不起。<br>愁无比。<br>和春付与西流水。<br>九十光阴能有几。<br>金龟解尽留无计。<br>寄语东城沽酒市。<br>拼一醉。<br>而今乐事他年泪。</p><h2 id="青门饮">青门饮</h2><p>时彦</p><p><strong>胡马嘶风，汉旗翻雪，彤云又吐，一竿残照。</strong><br>古木连空，乱山无数，行尽暮沙衰草。<br>星斗横幽馆，夜无眠、灯花空老。<br>雾浓香鸭，冰凝泪烛，霜天难晓。<br>长记晓妆才了，一杯未尽，离怀多少。<br>醉里秋波，梦中朝雨，都是醒时烦恼。<br>料有牵情处，忍思量、耳边曾道。<br>甚时跃马归来，认得迎门轻笑。</p><h2 id="望海潮">望海潮</h2><p>秦观</p><p><strong>梅英疏淡，冰澌溶泄，东风暗换年华。</strong><br>金谷俊游，铜驼巷陌，新晴细履平沙。<br>长记误随车。<br>正絮翻蝶舞，芳思交加。<br>柳下桃蹊，乱分春色到人家。<br>西园夜饮鸣笳。<br>有华灯碍月，飞盖妨花。<br>兰苑未空，行人渐老，重来是事堪嗟。<br>烟暝酒旗斜。<br>但倚楼极目，时见栖鸦。<br>无奈归心。<br>暗随流水到天涯。</p><h2 id="阮郎归">阮郎归</h2><p>秦观</p><p><strong>湘天风雨破寒初。</strong><br>深沈庭院虚。<br>丽谯吹罢《小单于》。<br>迢迢清夜徂。<br>乡梦断，旅魂孤。<br>峥嵘岁又除。<br>衡阳犹有雁传书。<br>郴阳和雁无。</p><h2 id="满庭芳">满庭芳</h2><p>秦观</p><p>晓色云开，春随人意，骤雨才过还晴。<br>古台芳榭，飞燕蹴红英。<br>舞困榆钱自落，秋千外、绿水桥平。<br><strong>东风里，朱门映柳，低底按小秦筝。</strong><br>多情。<br>行乐处，珠钿翠盖，玉辔红缨。<br>渐酒空金，花困蓬瀛。<br>豆蔻梢头旧恨，十年梦，屈指堪惊。<br>凭阑久，疏烟淡日，寂寞下芜城。</p><h2 id="蝶恋花-2">蝶恋花</h2><p>赵令</p><p>欲减罗衣寒未去。<br>不卷珠帘，人在深深处。<br>红杏枝头花几许。<br>啼痕止恨清明雨。<br>尽日沈烟香一缕。<br>宿酒醒迟，恼破春情绪。<br>飞燕又将归信误。<br><strong>小屏风上西江路。</strong></p><h2 id="人南渡・感皇恩">人南渡・感皇恩</h2><p>贺铸</p><p>兰芷满芳洲，游思横路。<br>罗袜尘生步。<br>迎顾。<br>整鬟颦黛，脉脉两情难语。<br><strong>细风吹柳絮。</strong><br>人南渡。<br>回首旧游，山无重数。<br>花底深朱户。<br>何处。<br>半黄梅子，向晚一帘疏雨。<br>断魂分付与。<br>春将去。</p><h2 id="伴云来・天香">伴云来・天香</h2><p>贺铸</p><p>烟络横林，山沈远照，逦迤黄昏钟鼓。<br><strong>烛映帘栊，蛩催机杼，共苦清秋风露。</strong><br>不眠思妇，齐应和、几声砧杵。<br>惊动天涯倦宦，岁华行暮。<br>当年酒狂自负。<br>谓东君、已春相付。<br>流浪征骖北道，客墙南浦。<br>幽恨无人晤语。<br>赖明月曾知旧游处。<br>好伴云来，还将梦去。</p><h2 id="青玉案">青玉案</h2><p>无名氏</p><p>一年春事都来几。<br>早过了、三之二。<br>绿暗红嫣浑可事。<br><strong>绿杨庭院，暖风帘幕，有个人憔悴。</strong><br>买花载酒长安市。<br>又争似家山见桃李。<br><strong>不枉东风吹客泪，相思难表，梦魂无据，惟有归来是。</strong></p><h2 id="高阳台-3">高阳台</h2><p>吴文英</p><p>修竹凝妆，垂杨驻马，凭阑浅画成图。<br>山色谁题，楼前有雁斜书。<br><strong>东风紧送斜阳下，弄旧寒、晚酒醒馀。</strong><br>自销凝，能几花前，顿老相如。<br>伤春不在高楼上，在灯前攲枕，雨外熏炉。<br>怕舣游船，临流可奈清臞。<br>飞红若到西湖底，搅翠澜、总是愁鱼。<br>莫重来，吹尽香绵，泪满平芜。</p><h2 id="高阳台-4">高阳台</h2><p>吴文英</p><p>宫粉雕痕，仙云堕影，无人野水荒湾。<br>古石埋香，金沙锁骨连环。<br><strong>南楼不恨吹横笛，恨晓风、千里关山。</strong><br>半飘零，庭上黄昏，月冷阑干。<br>寿阳空理愁鸾。<br>问谁调玉髓，暗补香瘢。<br>细雨归鸿，孤山无限春寒。<br>离魂难倩招清些，梦缟衣、解佩溪边。<br>最愁人，啼鸟晴明，叶底青圆。</p><h2 id="三姝媚">三姝媚</h2><p>吴文英</p><p>湖山经醉惯。<br>溃春衫、啼痕酒痕无限。<br>又客长安，叹断襟零袂，尘谁浣。<br><strong>紫曲门荒，沿败井、风摇青蔓。</strong><br>对语东邻，犹是曾巢，谢堂双燕。<br>春梦人间须断。<br>但怪得、当年梦缘能短。<br>绣屋秦筝，傍海棠偏爱，夜深开宴。<br>舞歇歌沈，花未减、红颜先变。<br>伫久河桥欲去，斜阳泪满。</p><h2 id="八声甘州">八声甘州</h2><p>吴文英</p><p>渺空烟四远，是何年、青天坠长星。<br>幻苍崖云树，名娃金屋，残霸宫城。<br><strong>箭径酸风射眼，腻水染花腥。</strong><br>时靸双鸳响，廊叶秋声。<br>宫里吴王沈醉，倩五湖倦客，独钓醒醒。<br>问苍波无语，华发奈山青。<br>水涵空、阑干高处，送乱鸦、斜日落渔汀。<br>连呼酒，上琴台去，秋与云平。</p><h2 id="蹋莎行・踏莎行">蹋莎行・踏莎行</h2><p>吴文英</p><p>润玉笼绡，檀樱倚扇。<br>绣圈犹带脂香浅。<br>榴心空叠舞裙红，艾枝应压愁鬟乱。<br>午梦千山，窗阴一箭。<br>香瘢新褪红丝腕。<br><strong>隔江人在雨声中，晚风菰叶生秋怨。</strong></p><h2 id="金缕歌・贺新郎">金缕歌・贺新郎</h2><p>吴文英</p><p>乔木生云气。<br>访中兴、英雄陈迹，暗追前事。<br><strong>战舰东风悭借便，梦断神州故里。</strong><br>旋小筑、吴宫闲地。<br>华表月明归夜鹤，叹当时、花竹今如此。<br>枝上露，溅清泪。<br>遨头小簇行春队。<br>步苍苔、寻幽别坞，问梅开未。<br>重唱梅边吸度曲，催发寒梢冻蕊。<br>此心与、东君同意。<br>後不如今非昔，两无言、相对沧浪水。<br>怀此恨，寄残醉。</p><h2 id="大有">大有</h2><p>潘希白</p><p>戏马台前，采花篱下，问岁华、还是重九。<br>恰归来、南山翠色依旧。<br><strong>帘栊昨夜听风雨，都不似、登归时候。</strong><br>一片宋玉情怀，十分卫郎清瘦。<br>红萸佩、空对酒。<br>砧杆动微寒，暗欺罗袖。<br>秋已无多，早是败荷衰柳。<br>强整帽檐侧，曾经向、天涯搔首。<br>几回忆、故国莼鲈，霜前雁後。</p><h2 id="兰陵王">兰陵王</h2><p>刘辰翁</p><p>送春去。<br>春去人间无路。<br><strong>秋千外、芳草连天，谁遣风沙暗南浦。</strong><br>依依甚意绪。<br>漫忆海门飞絮。<br>乱鸦过，斗转城荒，不见来时试灯处。<br>春去。<br>最谁苦。<br>但箭雁沉边，梁燕无主。<br>杜鹃声里长门暮。<br>想玉树凋土，泪盘如露。<br>咸阳送客屡回顾。<br>斜日未能度。<br>春去。<br>尚来否。<br>正江令恨别，庾信愁赋。<br><strong>苏堤尽日风和雨。</strong><br>叹神游故国，花记前度。<br>人生流落，顾孺子，共夜雨。</p><h2 id="永遇乐-3">永遇乐</h2><p>刘辰翁</p><p>璧月初晴，黛云远澹，春事谁主。<br>禁苑娇寒，湖堤倦暖，前度遽如许。<br>香尘暗陌，华灯明昼，长是懒携手去。<br><strong>谁知道，断烟禁夜，满城似愁风雨。</strong><br>宣和旧日，临安南渡，芳景犹自如故。<br><strong>缃帙流离，风鬟三五，能赋词最苦。</strong><br>江南无路，州今夜，此苦又谁知否。<br>空相对，残无寐，满村社鼓。</p><h2 id="摸鱼儿">摸鱼儿</h2><p>刘辰翁</p><p>怎知他、春归何处，相逢且尽尊酒。<br>少年袅袅天涯恨，长结西湖烟柳。<br>休回首。<br>但细雨断桥，憔悴人归後。<br><strong>东风似旧。</strong><br>问前度桃花，刘郎能记，花复认郎否。<br>君且住，草草留君翦韭。<br>前宵更恁时候。<br>深杯欲共歌声滑，翻湿春衫半袖。<br>空眉皱。<br>看白发尊前，已似人人有。<br>临分把手。<br>叹一笑论文，清狂顾曲，此会几时又。</p><h2 id="绣鸾凤花犯・花犯">绣鸾凤花犯・花犯</h2><p>周密</p><p>楚江湄，湘娥乍见，无言洒清泪。<br>淡然春意。<br><strong>空独倚东风，芳思谁寄。</strong><br>凌波路冷秋无际。<br>香云随步起。<br>谩记得，汉宫仙掌，亭亭明月底。<br>冰弦写怨更多情，骚人恨，枉赋芳兰幽芷。<br><strong>春思远，谁叹赏、国香风味。</strong><br>相将共、岁寒伴侣。<br>小窗净、沈烟熏翠袂。<br>幽梦觉，涓涓清露，一枝灯影里。</p><h2 id="玉京秋">玉京秋</h2><p>周密</p><p>烟水阔。<br>高林弄残照，晚蜩凄切。<br>碧砧度韵，银床飘叶。<br>衣湿桐阴露冷，采凉花、时赋秋雪。<br>叹轻别。<br>一襟幽事，砌蛩能说。<br>客思吟商还怯。<br>怨歌长、琼壶暗缺。<br>翠扇恩疏，红衣香褪，翻成消歇。<br><strong>玉骨西风，恨最恨、闲却新凉时节。</strong><br>楚箫咽。<br>谁倚西楼淡月。</p><h2 id="曲游春">曲游春</h2><p>周密</p><p><strong>楚苑东风外，暖丝情絮，春思如织。</strong><br>燕约莺期，恼芳情偏在，翠深红隙。<br>漠漠香尘隔。<br>沸十里、乱弦丛笛。<br>看画船，尽入西泠，闲却半湖春色。<br>柳陌。<br>新烟凝碧。<br>映帘底宫眉，堤上游勒。<br>轻暝笼寒，怕梨云梦冷，杏香愁幂。<br>歌管酬寒食。<br>奈蝶怨、良宵岑寂。<br>正满湖、碎月摇花，怎生去得。</p><h2 id="高阳台-5">高阳台</h2><p>周密</p><p>照野旌旗，朝天车马，平沙万里天低。<br><strong>宝带金章，尊前茸帽风。</strong><br>秦关汴水经行地，想登临、都付新诗。<br>纵英游，叠鼓清笳，骏马名姬。<br>酒酣应对燕山雪，正冰河月冻，晓陇云飞。<br>投老残年，江南谁念方回。<br><strong>东风渐绿西湖柳，雁已还、人未南归。</strong><br>最关情，折尽梅花，难寄相思。</p><h2 id="摸鱼儿-2">摸鱼儿</h2><p>朱嗣发</p><p><strong>对西风、鬓摇烟碧，参差前事流水。</strong><br>紫丝罗带鸳鸯结，的的镜盟钗誓。<br>浑不记、漫手织回文，几度欲心碎。<br>安花著蒂。<br>奈雨覆云翻，情宽分窄，石上玉簪脆。<br>朱楼外。<br>愁压空云欲坠。<br>月痕犹照无寐。<br>阴晴也只随天意。<br>枉了玉消香碎。<br>君且醉。<br><strong>君不见、长门青草春风泪。</strong><br>一时左计。<br>悔不早荆钗，暮天修竹，头白倚寒翠。</p><h2 id="解佩环・疏影">解佩环・疏影</h2><p>彭元逊</p><p>江空不渡，恨蘼芜杜若，零落无数。<br>远道荒寒，婉娩流年，望望美人迟暮。<br><strong>风烟雨雪阴晴晚，更何须，春风千树。</strong><br>尽孤城、落木萧萧，日夜江声流去。<br>日晏山深闻笛，恐他年流落，与子同赋。<br>事阔心违，交淡媒劳，蔓草沾衣多露。<br>汀洲窈窕馀醒寐，遗浮沈沣浦。<br>有白鸥淡月，微波寄语，逍遥容与。</p><h2 id="六丑">六丑</h2><p>彭元逊</p><p><strong>似东风老大，那复有、当时风气。</strong><br>有情不收，江山身是寄。<br>浩荡何世。<br>但忆临官道，暂来不住，便出门千里。<br><strong>痴心指望回风坠。</strong><br>扇底相逢，钗头微缀。<br>他家万条千缕，解遮亭障驿，不隔江水。<br>瓜洲曾舣，等行人岁岁。<br>日下长秋，城乌夜起。<br>帐庐好在春睡。<br>共飞归湖上，草青无地。<br>雨、春心如腻。<br>欲待化、丰乐楼前，青门都废。<br>何人念、流落无几。<br>点点抟作，雪绵松润，为君泪。</p><h2 id="瑞鹤仙-3">瑞鹤仙</h2><p>陆淞</p><p>脸霞红印枕。<br>睡觉来、冠儿还是不整。<br>屏间麝煤冷。<br>但眉峰压翠，泪珠弹粉。<br>堂深昼永。<br><strong>燕交飞、风帘露井。</strong><br>恨无人，与说相思，近日带围宽尽。<br>重省。<br><strong>残灯朱幌，淡月纱窗，那时风景。</strong><br>阳台路迥。<br>云雨梦，便无准。<br>待归来，先指花梢教看，却把心期细问。<br>问因循、过了青春，怎生意稳。</p><h2 id="减字浣溪沙・浣溪沙">减字浣溪沙・浣溪沙</h2><p>贺铸</p><p>楼角初销一缕霞。<br>淡黄杨柳暗栖鸦。<br>玉人和月摘梅花。<br>笑拈粉香归洞户，更垂帘幕护窗纱。<br><strong>东风寒似夜来些。</strong></p><h2 id="天门谣">天门谣</h2><p>贺铸</p><p>牛渚天门险。<br>限南北、七雄豪占。<br>清雾敛。<br>与闲人登览。<br>待月上潮平波滟滟。<br>塞管轻吹新《阿滥》。<br><strong>风满槛。</strong><br>历历数、西州更点。</p><h2 id="石州引・石州慢">石州引・石州慢</h2><p>贺铸</p><p>薄雨初寒，斜照弄晴，春意空阔。<br>长亭柳色缠黄，远客一枝先折。<br><strong>烟横水际，映带几点归鸦，东风销尽龙沙雪。</strong><br>还记初关来，恰而今时节。<br>将发。<br>画楼芳酒，红泪清歌，顿成清别。<br>已是经年，杳杳音尘多绝。<br>欲知方寸，共有几许清愁，芭蕉不展丁香结。<br><strong>枉望断天涯，两厌厌风月。</strong></p><h2 id="望湘人">望湘人</h2><p>贺铸</p><p>厌莺声到枕，花气动帘，醉魂愁梦相半。<br>被惜馀薰，带惊剩眼。<br>几许伤春春晚。<br>泪竹痕鲜，佩兰香老，湘天浓暖。<br><strong>记小江、风月佳时，屡约非烟游伴。</strong><br>须信鸾弦易断。<br>奈云和再鼓，曲终人远。<br>认罗袜无踪，旧处弄波清浅。<br>青翰棹舣，白苹洲畔。<br>尽木临皋飞观。<br>不解寄、一字相思，幸有归来双燕。</p><h2 id="蝶恋花-3">蝶恋花</h2><p>贺铸</p><p>几许伤春春复暮。<br>杨柳清阴，偏碍游丝度。<br>天际小山桃叶步。<br>白苹花满湔裙处。<br>竟日微吟长短句。<br>帘影灯昏，心寄胡琴语。<br><strong>数点雨声风约住。</strong><br>朦胧淡月云来去。</p><h2 id="夏云峰">夏云峰</h2><p>仲殊</p><p>天阔云高，溪横水远。<br>晚日寒生轻晕。<br>闲阶静、杨花渐少，朱门掩、莺声犹嫩。<br>悔匆匆、过却清明，旋占得馀芳，已成幽恨。<br>都几日阴沈，连宵慵困。<br>起来韶华都尽。<br>怨入双眉闲斗损。<br>乍品得情怀，看承全近。<br>深深态、无非自许。<br>厌厌意、终羞人间。<br>争知道、梦里蓬莱，待忘了馀香，时传音信。<br><strong>纵留得莺花，东风不住，也则眼前愁闷。</strong></p><h2 id="汉宫春">汉宫春</h2><p>李邴</p><p>潇洒江梅，向竹梢疏处，横两三枝。<br>东君也不爱惜，雪压霜欺。<br>无情燕子，怕春寒、轻失花期。<br>却是有，年年塞雁，归来曾见开时。<br>清浅小溪如练，问玉堂何似，茅舍疏篱。<br>伤心故人去後，冷落新诗。<br>微云淡月，对江天、分付他谁。<br><strong>空自忆，清香未减，风流不在人知。</strong></p><h2 id="临江仙-2">临江仙</h2><p>陈与义</p><p>高咏楚词酬午日，天涯节序匆匆。<br>榴花不似舞裙红。<br><strong>无人知此意，歌罢满帘风。</strong><br>万事一身伤老矣，戌葵凝笑墙东。<br>酒杯深浅去年同。<br>试浇桥下水，今夕到湘中。</p><h2 id="兰陵王-2">兰陵王</h2><p>张元干</p><p>卷朱箔。<br>朝雨轻阴乍阁。<br>阑干外，烟柳弄晴，芳草侵阶映红药。<br><strong>东风妒花恶。</strong><br>吹落。<br>梢头嫩萼。<br>屏山掩，沈水倦熏，中酒心情怕杯勺。<br>寻思旧京洛。<br>正年少疏狂，歌笑迷著。<br>障泥油壁催梳掠。<br>曾驰道同载，上林携手，灯夜初过早共约。<br>又争信漂泊。<br>寂寞。<br>念行乐。<br>甚粉淡衣襟，音断弦索。<br>琼枝璧月春如昨。<br>怅别後华表，那回双鹤。<br>相思除是，向醉里、暂忘却。</p><h2 id="石州慢">石州慢</h2><p>张元干</p><p>寒水依痕，春意渐回，沙际烟阔。<br>溪梅晴照生香，冷芯数枝争发。<br>天涯旧恨，试看几许消魂，长亭门外山重叠。<br>不尽眼中青，是愁来时节。<br>情切。<br><strong>画楼深闭，想见东风，暗销肌雪。</strong><br>辜负枕前云雨，尊前花月。<br>心期切处，更有多少凄凉，殷勤留与归时说。<br>到得却相逢，恰经年离别。</p><h2 id="水龙吟-2">水龙吟</h2><p>陈亮</p><p><strong>闹花深处层楼，画帘半卷东风软。</strong><br>春归翠陌，平莎茸嫩，垂杨金浅。<br>迟日催花，淡云阁雨，轻寒轻暖。<br>恨芳菲世界，游人未赏，都付与、莺和燕。<br>寂寞凭高念远。<br>向南楼、一声归雁。<br><strong>金钗斗草，青丝勒马，风流云散。</strong><br>罗绶分香，翠绡封泪，几多幽怨。<br>正销魂，又是疏烟淡月，子规声断。</p><h2 id="杏花天">杏花天</h2><p>姜夔</p><p>绿丝低拂鸳鸯浦。<br>想桃叶、当时唤渡。<br><strong>又将愁眼与春风，待去。</strong><br>倚兰桡、更少驻。<br>金陵路。<br>莺吟燕舞。<br>算潮水、知人最苦。<br>满汀芳草不成归，日暮。<br>更移舟、向甚处。</p><h2 id="念奴娇">念奴娇</h2><p>姜夔</p><p>闹红一舸，记来时、尝与鸳鸯为侣。<br><strong>三十六陂人未到，水佩风裳无数。</strong><br>翠叶吹凉，玉容销酒，更洒菰蒲雨。<br>嫣然摇动，冷香飞上诗句。<br>日暮。<br>青盖亭亭，情人不见，争忍凌波去。<br><strong>只恐舞衣寒易落，愁入西风南浦。</strong><br>高柳垂阴，老鱼吹浪，留我花间住。<br>田田多少，几回沙际归路。</p><h2 id="八归">八归</h2><p>姜夔</p><p>芳莲坠粉，蔬桐吹绿，庭院暗雨乍歇。<br>无端抱影销魂处，还见筱墙萤暗，藓阶蛩切。<br>送客重寻西去路，问水面、琵琶谁拨。<br>最可惜、一片江山，总付与啼。<br><strong>长恨相从未款，而今何事，又对西风离别。</strong><br>渚寒烟淡，棹移人远，缥缈行舟如叶。<br>想文君望久，倚竹愁生步罗袜。<br>归来後、翠尊双饮，下了珠帘，玲珑闲看月。</p><h2 id="扬州慢">扬州慢</h2><p>姜夔</p><p>淮左名都，竹西佳处，解鞍少驻初程。<br><strong>过春风十里，尽荠麦青青。</strong><br>自胡马窥江去後，废池乔木，犹厌言兵。<br>渐黄昏，清角吹寒，都在空城。<br>杜郎俊赏，算而今，重到须惊。<br>纵豆蔻词工，青楼梦好，难赋深情。<br>二十四桥仍在，波心荡、冷月无声。<br>念桥边红药，年年知为谁生。</p><h2 id="暗香">暗香</h2><p>姜夔</p><p>旧时月色。<br>算几番照我，梅边吹笛。<br>唤起玉人，不管清寒与攀摘。<br><strong>何逊而今渐老，都忘却、春风词笔。</strong><br>但怪得、竹外疏花，香冷入瑶席。<br>江国。<br>正寂寂。<br>叹寄与路遥，夜雪初积。<br>翠尊易泣。<br>红萼无言耿相忆。<br>长记曾携手处，千树压、西湖寒碧。<br>又片片、吹尽也，几时见得。</p><h2 id="疏影">疏影</h2><p>姜夔</p><p>苔枝缀玉。<br>有翠禽小小，枝上同宿。<br>客里相逢，篱角黄昏，无言自倚修竹。<br>昭君不惯胡沙远，但暗忆、江南江北。<br>想佩环、月夜归来，化作此花幽独。<br>犹记深宫旧事，那人正睡里，飞近蛾绿。<br><strong>莫似春风，不管盈盈，早与安排金屋。</strong><br>还教一片随波去，又却怨、玉龙哀曲。<br>等恁时、重觅幽香，已入小窗横幅。</p><h2 id="翠楼吟">翠楼吟</h2><p>姜夔</p><p>月冷龙沙，尘轻虎落，今年汉初赐。<br>新翻胡部曲，听毡幕、元戎歌吹。<br>层楼高峙。<br>看栏曲萦红，檐牙飞翠。<br>人姝丽。<br><strong>粉香吹下，夜寒风细。</strong><br>此地。<br>宜有词仙，拥素云黄鹤，与君游戏。<br>玉梯凝望久，叹芳草、萋萋千里。<br>天涯情味。<br>仗酒清愁，花销英气。<br>西山外。<br>晚来还卷，一帘秋霁。</p><h2 id="木兰花・玉楼春-2">木兰花・玉楼春</h2><p>钱惟演</p><p><strong>城上风光莺语乱。</strong><br>城下烟波春拍岸。<br>绿杨芳草几时休，泪眼愁肠先已断。<br>情怀渐变成衰晚。<br>鸾鉴朱颜惊暗换。<br>昔年多病厌芳尊，今日芳尊惟恐浅。</p><h2 id="雨霖铃">雨霖铃</h2><p>柳永</p><p>寒蝉凄切。<br>对长亭晚，骤雨初歇。<br>都门帐饮无绪，留恋处、兰舟催发。<br>执手相看泪眼，竟无语凝噎。<br>念去去、千里烟波，暮霭沈沈楚天阔。<br>多情自古伤离别。<br>更那堪、冷落清秋节。<br><strong>今宵酒醒何处，杨柳岸、晓风残月。</strong><br>此去经年，应是良辰、好景虚设。<br><strong>便纵有、千种风情，更与何人说。</strong></p><h2 id="凤栖梧・蝶恋花">凤栖梧・蝶恋花</h2><p>柳永</p><p><strong>伫倚危楼风细细。</strong><br>望极春愁，黯黯生天际。<br>草色烟光残照里。<br>无言谁会凭阑意。<br>拟把疏狂图一醉。<br>对酒当歌，强乐还无味。<br>衣带渐宽终不悔。<br>为伊消得人憔悴。</p><h2 id="浪淘沙">浪淘沙</h2><p>柳永</p><p><strong>梦觉、透窗风一线，寒灯吹息。</strong><br>那堪酒醒，又闻空阶，夜雨频滴。<br>嗟因循、久作天涯客。<br>负佳人、几许盟言，便忍把、从前欢会，陡顿翻成忧戚。<br>愁极。<br>再三追思，洞房深处，几度饮散歌阑，香暖鸳鸯被，岂暂时疏散，费伊心力。<br>云尤雨，有万般千种，相怜相惜。<br>恰到如今，天长漏永，无端自家疏隔。<br>知何时、却拥秦云态，愿低帏昵枕，轻轻细说与，江乡夜夜，数寒更思忆。</p><h2 id="少年游">少年游</h2><p>柳永</p><p>长安古道马迟迟。<br>高柳乱蝉栖。<br><strong>夕阳岛外，秋风原上，目断四天垂。</strong><br>归云一去无踪迹，何处是前期。<br>狎兴生疏，酒徒萧索，不似去年时。</p><h2 id="戚氏">戚氏</h2><p>柳永</p><p>晚秋天。<br>一霎微雨洒庭轩。<br>槛菊萧疏，井梧零乱惹残烟。<br>凄然。<br>望江关。<br>飞云黯淡夕阳间。<br>当时宋玉悲感，向此临水与登山。<br>远道迢递，行人凄楚，倦听陇水潺。<br>正蝉吟败叶，蛩响衰草，相应喧喧。<br>孤馆度日如年。<br><strong>风露渐变，悄悄至更阑。</strong><br>长天净，绛河清浅，皓月婵娟。<br>思绵绵。<br>夜永对景，那堪屈指，暗想从前。<br>未名未禄，绮陌红楼，往往经岁迁延。<br><strong>帝里风光好，当年少日，暮宴朝欢。</strong><br>况有狂朋怪侣，遇当歌、对酒竞留连。<br>别来迅景如梭，旧游似梦，烟水程何限。<br>念利名、憔悴长萦绊。<br>追往事、空惨愁颜。<br>漏箭移、稍觉轻寒。<br>渐呜咽、画角数声残。<br>对闲窗畔，停灯向晓，抱影无眠。</p><h2 id="夜半乐">夜半乐</h2><p>柳永</p><p>冻云黯淡天气，扁舟一叶，乘兴离江渚。<br>渡万壑千岩，越溪深处。<br><strong>怒涛渐息，樵风乍起，更闻商旅相呼。</strong><br>片帆高举。<br>泛画鹢、翩翩过南浦。<br>望中酒旆闪闪，一簇烟村，数行霜树。<br>残日下，渔人鸣榔归去。<br>败荷零落，衰杨掩映，岸边两两三三，浣沙游女。<br>避行客、含羞笑相语。<br>到此因念，绣阁轻抛，浪萍难驻。<br>叹後约丁宁竟何据。<br>惨离怀，空恨岁晚归期阻。<br>凝泪眼、杳杳神京路。<br>断鸿声远长天暮。</p><h2 id="玉蝴蝶">玉蝴蝶</h2><p>柳永</p><p>望处雨收云断，凭阑悄悄，目送秋光。<br>晚景萧疏，堪动宋玉悲凉。<br><strong>水风轻、苹花渐老，月露冷、梧叶飘黄。</strong><br>遣情伤。<br>故人何在，烟水茫茫。<br>难忘。<br><strong>文期酒会，几孤风月，屡变星霜。</strong><br>海阔山遥，未知何处是潇湘。<br>念双燕、难凭远信，指暮天、空识归航。<br>黯相望。<br>断鸿声里，立尽斜阳。</p><h2 id="八声甘州-2">八声甘州</h2><p>柳永</p><p>对潇潇、暮雨洒江天，一番洗清秋。<br><strong>渐霜风凄惨，关河冷落，残照当楼。</strong><br>是处红衰翠减，苒苒物华休。<br>惟有长江水，无语东流。<br>不忍登高临远，望故乡渺邈，归思难收。<br>叹年来踪迹，何事苦淹留。<br>想佳人、妆楼望，误几回、天际识归舟。<br>争知我、倚阑干处，正恁凝愁。</p><h2 id="竹马子・竹马儿">竹马子・竹马儿</h2><p>柳永</p><p>登孤垒荒凉，危亭旷望，静临烟渚。<br><strong>对雌霓挂雨，雄风拂槛，微收烦暑。</strong><br>渐觉一叶惊秋，残蝉噪晚，素商时序。<br>览景想前欢，指神京，非雾非烟深处。<br>向此成追感，新愁易积，故人难聚。<br>凭高尽日凝伫。<br>赢得消魂无语。<br>极目霁霭霏微，暝鸦零乱，萧索江城暮。<br>南楼画角，又送残阳去。</p><h2 id="迷神引">迷神引</h2><p>柳永</p><p>一叶扁舟轻帆卷。<br>暂泊楚江南岸。<br>孤城暮角，引胡茄怨。<br>水茫茫，平沙雁、旋惊散。<br>烟敛寒林簇，画屏展。<br>天际遥山小，黛眉浅。<br>旧赏轻抛，到此成游宦。<br>觉客程劳，年光晚。<br><strong>异乡风物，忍萧索、当愁眼。</strong><br>帝城赊，秦楼阻，旅魂乱。<br>芳草连空阔，残照满。<br>佳人无消息，断云远。</p><h2 id="一丛花令・一丛花">一丛花令・一丛花</h2><p>张先</p><p>伤高怀远几时穷。<br>无物似情浓。<br>离愁正引千丝乱，更东陌、飞絮。<br>嘶骑渐遥，征尘不断，何处认郎踪。<br>双鸳池沼水溶溶。<br>南北小桡通。<br>梯横画阁黄昏後，又还是、斜月帘栊。<br><strong>沈恨细思，不如桃杏，犹解嫁东风。</strong></p><h2 id="天仙子">天仙子</h2><p>张先</p><p>水调数声持酒听。<br>午醉醒来愁未醒。<br>送春春去几时回，临晚镜。<br>伤流景。<br>往事後期空记省。<br>沙上并禽池上暝。<br>云破月来花弄影。<br><strong>重重帘幕密遮灯，风不定。</strong><br>人初静。<br>明日落红应满径。</p><h2 id="千秋岁">千秋岁</h2><p>张先</p><p>数声鶗鴂。<br>又报芳菲歇。<br>惜春更把残红折。<br><strong>雨轻风色暴，梅子青时节。</strong><br>永丰柳，无人尽日飞花雪。<br>莫把幺弦拨。<br>怨极弦能说。<br>天不老，情难绝。<br>心似双丝网，中有千千结。<br>夜过也，东窗未白凝残月。</p><h2 id="青门引・青门饮">青门引・青门饮</h2><p>张先</p><p>乍暖还轻冷。<br><strong>风雨晚来方定。</strong><br>庭轩寂寞近清明，残花中酒，又是去年病。<br><strong>楼头画角风吹醒。</strong><br>入夜重门静。<br>那堪更被明月，隔墙送过秋千影。</p><h2 id="浣溪沙">浣溪沙</h2><p>晏殊</p><p>一向年光有限身。<br>等闲离别易消魂。<br>酒筵歌席莫辞频。<br><strong>满目山河空念远，落花风雨更伤春。</strong><br>不如怜取眼前人。</p><h2 id="清平乐-3">清平乐</h2><p>晏殊</p><p><strong>金风细细。</strong><br>叶叶梧桐坠。<br>绿酒初尝人易醉。<br>一枕小窗浓睡。<br>紫微朱槿花残。<br>斜阳却照阑干。<br>双燕欲归时节，银屏昨夜微寒。</p><h2 id="木兰花・玉楼春-3">木兰花・玉楼春</h2><p>晏殊</p><p><strong>池塘水绿风微暖。</strong><br>记得玉真初见面。<br>重头歌韵响铮琮，入破舞腰红乱旋。<br>玉钩阑下香阶畔。<br>醉後不知斜日晚。<br>当时共我赏花人，点检如今无一半。</p><h2 id="踏莎行">踏莎行</h2><p>晏殊</p><p>小径红稀，芳郊绿遍。<br>高台树色阴阴见。<br><strong>春风不解禁杨花，乱扑行人面。</strong><br>翠叶藏莺，朱帘隔燕。<br>炉香静逐游丝转。<br>一场愁梦酒醒时，斜阳却照深深院。</p><h2 id="玉楼春-3">玉楼春</h2><p>宋祁</p><p><strong>东城渐觉风光好。</strong><br>皱波纹迎客棹。<br>绿杨烟外晓寒轻，红杏枝头春意闹。<br>浮生长恨欢娱少。<br>肯爱千金轻一笑。<br>为君持酒劝斜阳，且向花间留晚照。</p><h2 id="采桑子">采桑子</h2><p>欧阳修</p><p>群芳过後西湖好，狼籍残红。<br>飞絮蒙蒙。<br><strong>垂柳阑干尽日风。</strong><br>笙歌散尽游人去，始觉春空。<br>垂下帘栊。<br>双燕归来细雨中。</p><h2 id="踏莎行-2">踏莎行</h2><p>欧阳修</p><p>候馆梅残，溪桥柳细。<br><strong>草熏风暖摇征辔。</strong><br>离愁渐远渐无穷，迢迢不断如春水。<br>寸寸柔肠，盈盈粉泪。<br>楼高莫近危阑倚。<br>平芜尽处是春山，行人更在春山外。</p><h2 id="蝶恋花-4">蝶恋花</h2><p>欧阳修</p><p><strong>独倚危楼风细细。</strong><br>望极离愁，黯黯生天际。<br>草色山光残照里。<br>无人会得凭阑意。<br>也拟疏狂图一醉。<br>对酒当歌，强饮还无味。<br>衣带渐宽都不悔。<br>况伊销得人憔悴。</p><h2 id="玉楼春-4">玉楼春</h2><p>欧阳修</p><p>别後不知君远近。<br>触目凄凉多少闷。<br>渐行渐远渐无书，水阔鱼沈何处问。<br><strong>夜深风竹敲秋韵。</strong><br>万叶千声皆是恨。<br>故欹单枕梦中寻，梦又不成灯又尽。</p><h2 id="浪淘沙-2">浪淘沙</h2><p>欧阳修</p><p><strong>把酒祝东风。</strong><br>且共从容。<br>垂杨紫陌洛城东。<br>总是当时携手处，游遍芳丛。<br>聚散苦匆匆。<br>此恨无穷。<br>今年花胜去年红。<br>可惜明年花更好，知与谁同。</p><h2 id="风入松-2">风入松</h2><p>俞国宝</p><p>一春长费买花钱。<br>日日醉花边。<br>玉骢惯识西湖路，骄嘶过、沽酒垆前。<br>红杏香中箫鼓，绿杨影里秋千。<br><strong>暖风十里丽人天。</strong><br>花压髻云偏。<br>画船载取春归去，馀情寄、湖水湖烟。<br>明日重扶残醉，来寻陌上花钿。</p><h2 id="绮罗香">绮罗香</h2><p>史达祖</p><p>做冷欺花，将烟困柳，千里偷催春暮。<br>尽日冥迷，愁里欲飞还住。<br>惊粉重、蝶宿西园，喜泥润、燕归南浦。<br><strong>最妨它、佳约风流，钿车不到杜陵路。</strong><br>沈沈江上望极，还被春潮晚急，难寻官渡。<br>隐约遥峰，和泪谢娘眉妩。<br>临断岸、新绿生时，是落红、带愁流处。<br>记当日、门掩梨花，翦灯深夜语。</p><h2 id="东风第一枝">东风第一枝</h2><p>史达祖</p><p><strong>巧沁兰心，偷黏草甲，东风欲障新暖。</strong><br>谩凝碧瓦难留，信知暮寒轻浅。<br>行天入镜，做弄出、轻松纤软。<br>料故园、不卷重帘，误了乍来双燕。<br>青未了、柳回白眼。<br>红欲断、杏开素面。<br>旧游忆著山阴，厚盟遂妨上苑。<br>寒炉重暖，便放慢春衫针线。<br>恐凤靴、挑菜归来，万一灞桥相见。</p><h2 id="喜迁莺">喜迁莺</h2><p>史达祖</p><p>月波疑滴。<br>望玉壶天近，了无尘隔。<br>翠眼圈花，冰丝织练，黄道宝光相直。<br>自怜诗酒瘦，难应接、许多春色。<br>最无赖，是随香趁烛，曾伴狂客。<br>踪迹。<br>谩记忆。<br><strong>老了杜郎，忍听东风笛。</strong><br>柳院灯疏，梅厅雪在，谁与细倾春碧。<br>旧情拘未定，犹自学、当年游历。<br>怕万一，误玉人、夜寒帘隙。</p><h2 id="三姝媚-2">三姝媚</h2><p>史达祖</p><p>烟光摇缥瓦。<br><strong>望晴檐多风，柳花如洒。</strong><br>锦瑟横床，想泪痕尘影，凤弦常下。<br>倦出犀帷，频梦见、王孙骄马。<br>讳道相思，偷理绡裙，自惊腰衩。<br>惆怅南楼遥夜。<br>记翠箔张灯，枕肩歌罢。<br>又入铜驼，遍旧家门巷，首询声价。<br><strong>可惜东风，将恨与、闲花俱谢。</strong><br>记取崔徽模样，归来暗写。</p><h2 id="夜合花">夜合花</h2><p>史达祖</p><p>柳锁莺魂，花翻蝶梦，自知愁染潘郎。<br>轻衫未揽，犹将泪点偷藏。<br>念前事，怯流光。<br>早春窥、酥雨池塘。<br>向销凝里，梅开半面，情满徐妆。<br><strong>风丝一寸柔肠。</strong><br>曾在歌边惹恨，烛底萦香。<br>芳机瑞锦，如何未织鸳鸯。<br>人扶醉，月依墙。<br>是当初、谁敢疏狂。<br>把闲言语，花房夜久，各自思量。</p><h2 id="八归-2">八归</h2><p>史达祖</p><p>秋江带雨，寒沙萦水，人瞰画阁愁独。<br>烟蓑散响惊诗思，还被乱鸥飞去，秀句难续。<br>冷眼尽归图画上，认隔岸、微茫云屋。<br>想半属、渔市樵村，欲暮竞然竹。<br><strong>须信风流未老，凭持酒、慰此凄凉心目。</strong><br>一鞭南陌，几篙官渡，赖有歌眉舒绿。<br>只匆匆眺远，早觉闲愁挂乔木。<br>应难奈，故人天际，望彻淮山，相思无雁足。</p><h2 id="玉胡蝶・玉蝴蝶">玉胡蝶・玉蝴蝶</h2><p>史达祖</p><p>晚雨未摧宫树，可怜闲叶，犹抱凉蝉。<br>短景归秋，吟思又接愁边。<br><strong>漏初长、梦魂难禁，人渐老、风月俱寒。</strong><br>想幽欢。<br>土花庭，虫网阑干。<br>无端。<br>啼蛄搅夜，恨随团扇，苦近秋莲。<br><strong>一笛当楼，谢娘悬泪立风前。</strong><br>故园晚、强留诗酒，新雁远、不致寒暄。<br>隔苍烟。<br>楚香罗袖，谁伴婵娟。</p><h2 id="秋霁">秋霁</h2><p>史达祖</p><p>江水苍苍，望倦柳愁荷，共感秋色。<br><strong>废阁先凉，古帘空暮，雁程最嫌风力。</strong><br>故园信息。<br>爱渠入眼南山碧。<br>念上国。<br>谁是、脍鲈江汉未归客。<br><strong>还又岁晚，瘦骨临风，夜闻秋声，吹动岑寂。</strong><br>露蛩悲、清灯冷屋，翻书愁上鬓毛白。<br>年少俊游浑断得。<br>但可怜处，无奈苒苒魂惊，采香南浦，翦梅烟驿。</p><h2 id="宴清都-2">宴清都</h2><p>卢祖皋</p><p>春讯飞琼管。<br><strong>风日薄、度墙啼鸟声乱。</strong><br>江城次第，笙歌翠合，绮罗香暖。<br>溶溶涧渌冰泮。<br>醉梦里、年华暗换。<br>料黛眉重锁隋堤，芳心还动梁苑。<br>新来雁阔云音，鸾分槛影，无计重见。<br>啼春细雨，笼愁澹月，恁时庭院。<br>离肠未语先断。<br>算犹有、凭高望眼。<br>更那堪、芳草连天，飞梅弄晚。</p><h2 id="小重山">小重山</h2><p>章良能</p><p>柳暗花明春事深。<br>小阑红芍药，已抽簪。<br><strong>雨馀风软碎鸣禽。</strong><br>迟迟日，犹带一分阴。<br>往事莫沈吟。<br>身闲时序好，且登临。<br>旧游无处不堪寻。<br>无寻处，惟有少年心。</p><h2 id="花犯">花犯</h2><p>吴文英</p><p>小娉婷，清铅素靥，蜂黄暗偷晕。<br>翠翘敧鬓。<br>昨夜冷中庭，月下相认。<br><strong>睡浓更苦凄风紧。</strong><br>惊回心未稳。<br>送晓色、一壶葱茜，才知花梦准。<br>湘娥化作此幽芳，凌波路，古岸云沙遗恨。<br>临砌影，寒香乱、冻梅藏韵。<br>熏炉畔、旋移傍枕，还又见、玉人垂绀鬒。<br>料唤赏、清华池馆，台杯须满引。</p><h2 id="浣溪沙-2">浣溪沙</h2><p>吴文英</p><p>门隔花深梦旧游。<br>夕阳无语燕归愁。<br>玉纤香动小帘钩。<br>落絮无声春堕泪，行云有影月含羞。<br><strong>东风临夜冷於秋。</strong></p><h2 id="浣溪沙-3">浣溪沙</h2><p>吴文英</p><p>波面铜花冷不收。<br>玉人垂钓理纤钩。<br>月明池阁夜来秋。<br>江燕话归成晓别，水花红减似春休。<br><strong>西风梧井叶先愁。</strong></p><h2 id="祝英台近">祝英台近</h2><p>吴文英</p><p>采幽香，巡古苑，竹冷翠微路。<br>斗草溪根，沙印小莲步。<br>自怜两鬓清霜，一年寒食，又身在、云山深处。<br>昼闲度。<br>因甚天也悭春，轻阴便成雨。<br><strong>绿暗长亭，归梦趁风絮。</strong><br>有情花影阑干，莺声门径，解留我、霎时凝伫。</p><h2 id="祝英台近-2">祝英台近</h2><p>吴文英</p><p>翦红情，裁绿意，花信上钗股。<br><strong>残日东风，不放岁华去。</strong><br>有人添烛西窗，不眠侵晓，笑声转、新年莺语。<br>旧尊俎。<br>玉纤曾擘黄柑，柔香系幽素。<br>归梦湖边，还迷镜中路。<br>可怜千点吴霜，寒销不尽，又相对、落梅如雨。</p><h2 id="澡兰香">澡兰香</h2><p>吴文英</p><p>盘丝系腕，巧篆垂簪，玉隐绀纱睡觉。<br>银瓶露井，彩云窗，往事少年依约。<br>为当时、曾写榴裙，伤心红绡褪萼。<br>黍梦光阴渐老，汀洲烟箬。<br>莫唱江南古调，怨抑难招，楚江沈魄。<br><strong>薰风燕乳，暗雨梅黄，午镜澡兰帘幕。</strong><br>念秦楼、也拟人归，应翦菖浦自酌。<br>但怅望、一屡新蟾，随人天角。</p><h2 id="燕山亭">燕山亭</h2><p>赵佶</p><p>裁翦冰绡，打叠数重，冷淡燕脂匀注。<br>新样靓妆，艳溢香融，羞杀蕊珠宫女。<br><strong>易得凋零，更多少、无情风雨。</strong><br>愁苦。<br>闲院落凄凉，几番春暮。<br>凭寄离恨重重，这双燕，何曾会人言语。<br>天遥地远，万水千山，知他故宫何处。<br>怎不思量，除梦里、有时会去。<br>无据。<br>和梦也、有时不做。</p><h2 id="醉花阴">醉花阴</h2><p>李清照</p><p>薄雾浓云愁永昼。<br>瑞脑消金兽。<br>佳节又重阳，玉枕纱厨，半夜凉初透。<br>东篱把洒黄昏後，有暗香盈袖。<br><strong>莫道不消魂，帘卷西风，人似黄花瘦。</strong></p><h2 id="念奴娇-2">念奴娇</h2><p>李清照</p><p><strong>萧条庭院，有斜风细雨，重门须闭。</strong><br>宠柳娇花寒食近，种种恼人天气。<br>险韵诗成，扶头酒醒，别是闲滋味。<br>征鸿过尽，万千心事难寄。<br>楼上几日春寒，帘垂四面，玉阑干慵倚。<br>被冷香消新梦觉，不许愁人不起。<br>清露晨流，新桐初引，多少游春意。<br>日高烟敛，更看今日晴未。</p><h2 id="永遇乐-4">永遇乐</h2><p>李清照</p><p>落日熔金，暮云合璧，人在何处。<br>染柳烟浓，吹梅笛怨，春意知几许。<br><strong>元宵佳节，融和天气，次第岂无风雨。</strong><br>来相召、香车宝马，谢他酒朋诗侣。<br>中州盛日，闺门多暇，记得偏重三五。<br>铺翠冠儿，拈金雪柳，簇带争济楚。<br><strong>如今憔悴，风鬟霜鬓，怕见夜间出去。</strong><br>不如向、帘儿底下，听人笑语。</p><h2 id="声声慢">声声慢</h2><p>李清照</p><p>寻寻觅觅，冷冷清清，凄凄惨惨戚戚。<br>乍暖还寒时候，最难将息。<br><strong>三杯两盏淡酒，怎敌他、晚来风急。</strong><br>雁过也，正伤心，却是旧时相识。<br>满地黄花堆积。<br>憔悴损，如今有谁摘。<br>守著窗儿，独自怎生得黑。<br>梧桐更兼细雨，到黄昏、点点滴滴。<br>这次第，怎一个、愁字了得。</p><h2 id="苏武慢">苏武慢</h2><p>蔡伸</p><p>雁落平沙，烟笼寒水，古垒鸣笳声断。<br>青山隐隐，败叶萧萧，天际暝鸦零乱。<br>楼上黄昏，片帆千里归程，年华将晚。<br>望碧云空暮，佳人何处，梦魂俱远。<br>忆旧游、邃馆朱扉，小园香径，尚想桃花人面。<br>书盈锦轴，恨满金徽，难写寸心幽怨。<br>两地离愁，一尊芳酒，凄凉危阑倚遍。<br><strong>尽迟留、凭仗西风，吹乾泪眼。</strong></p><h2 id="柳梢青">柳梢青</h2><p>蔡伸</p><p>数声鶗鴂。<br>可怜又是，春归时节。<br><strong>满院东风，海棠铺绣，梨花飘雪。</strong><br>丁香露泣残枝，算未比、愁肠寸结。<br><strong>自是休文，多情多感，不干风月。</strong></p><h2 id="摸鱼儿-3">摸鱼儿</h2><p>辛弃疾</p><p><strong>更能消、几番风雨。</strong><br>匆匆春又归去。<br>惜春长恨花开早，何况落红无数。<br>春且住。<br>见说道、天涯芳草迷归路。<br>怨春不语。<br>算只有殷勤，画檐珠网，尽日惹飞絮。<br>长门事，准拟佳期又误。<br>蛾眉曾有人妒。<br>千金纵买相如赋，脉脉此情谁诉。<br>君莫舞。<br>君不见、玉环飞燕皆尘土。<br>闲愁最苦。<br>休去倚危楼，斜阳正在，烟柳断肠处。</p><h2 id="水龙吟-3">水龙吟</h2><p>辛弃疾</p><p>楚天千里清秋，水随天去秋无际。<br>遥岑远目，献愁供恨，玉簪螺髻。<br>落日楼头，断鸿声里，江南游子。<br>把吴钩看了，栏干拍遍，无人会、登临意。<br>休说鲈鱼堪。<br><strong>尽西风、季鹰归未。</strong><br>求田问舍，怕应羞见，刘郎才气。<br><strong>可惜流年，忧愁风雨，树犹如此。</strong><br>倩何人，唤取盈盈翠袖，英雄泪。</p><h2 id="念奴娇-3">念奴娇</h2><p>辛弃疾</p><p>野棠花落，又匆匆、过了青明时节。<br><strong>地东风欺客梦，一夜云屏寒怯。</strong><br>曲岸持觞，垂杨系马，此地曾轻别。<br>楼空人去，旧游飞燕能说。<br>闻道绮陌东头，行人长见，帘底纤纤月。<br>旧恨春江流未断，新恨云山千叠。<br>料得明朝，尊前重见，镜里花难折。<br>也应惊问，近来多少华发。</p><h2 id="鹧鸪天-2">鹧鸪天</h2><p>辛弃疾</p><p>枕簟溪堂冷欲秋。<br>断云依水晚来收。<br>红莲相倚浑如醉，白鸟无言定自愁。<br>书咄咄，且休休。<br><strong>一丘一壑也风流。</strong><br>不知筋力衰多少，但觉新来懒上楼。</p><h2 id="木兰花慢">木兰花慢</h2><p>辛弃疾</p><p>老来情味减，对别酒、怯流年。<br>况屈指中秋，十分好月，不照人圆。<br><strong>无情水、都不管，共西风、只等送归船。</strong><br>秋晚莼鲈江上，夜深儿女灯前。<br>征衫。<br>便好去朝天。<br>玉殿正思贤。<br>想夜半承明，留教视草，却遣筹边。<br>长安故人问我，道寻常、泥酒只依然。<br>目断秋霄落雁，醉来时响空弦。</p><h2 id="祝英台令">祝英台令</h2><p>辛弃疾</p><p>宝钗分，桃叶渡。<br>烟柳暗南浦。<br><strong>怕上层楼，十日九风雨。</strong><br>断肠片片飞红，都无人管，倩谁唤、流莺声住。<br>鬓边觑。<br>试把花卜心期，才簪又重数。<br>罗帐灯昏，呜咽梦中语。<br>是他春带愁来，春归何处。<br>却不解、将愁归去。</p><h2 id="青玉案-2">青玉案</h2><p>辛弃疾</p><p><strong>东风夜放花千树。</strong><br>更吹落、星如雨。<br>宝马雕车香满路。<br>凤箫声动，玉壶光转，一夜鱼龙舞。<br>蛾儿雪柳黄金缕。<br>笑语盈盈暗香去。<br>众里寻他千百度。<br>蓦然回首，那人却在，□□阑珊处。</p><h2 id="贺新郎-4">贺新郎</h2><p>辛弃疾</p><p>凤尾龙香拨。<br><strong>自开元、霓裳曲罢，几番风月。</strong><br>最苦浔阳江头客，画舸亭亭待发。<br>记出塞、黄云堆雪。<br>马上离愁三万里，望昭阳、宫殿孤鸿没。<br>弦解语，恨难说。<br>辽阳驿使音尘绝。<br>琐窗寒、轻拢慢拈，泪珠盈睫。<br>推手含情还却手，一抹梁州哀彻。<br>千古事、云飞烟灭。<br>贺老定场无消息，想沈香亭北繁华歇。<br>弹到此，为呜咽。</p><h2 id="贺新郎-5">贺新郎</h2><p>辛弃疾</p><p>绿树听鹈。<br>更那堪、鹧鸪声住，杜鹃声切。<br>啼到春归无寻处，苦恨芳菲都歇。<br>算未抵、人间离别。<br>马上琵琶关塞黑，更长门、翠辇辞金阙。<br>看燕燕，送归妾。<br>将军百战身名裂。<br>向河梁、回头万里，故人长绝。<br><strong>易水萧萧西风冷，满座衣冠似雪。</strong><br>正壮士、悲歌未彻。<br>啼鸟还知如许恨，料不啼清泪长啼血。<br>谁共我，醉明月。</p><h2 id="汉宫春-2">汉宫春</h2><p>辛弃疾</p><p>春已归来，看美人头上，袅袅春幡。<br><strong>无端风雨，未肯收尽馀寒。</strong><br>年时燕子，料今宵、梦到西园。<br>浑未办、黄柑荐酒，更传青韭堆盘。<br><strong>却笑东风从此，便薰梅染柳，更没些闲。</strong><br>闲时又来镜里，转变朱颜。<br>清愁不断，问何人、会解连环。<br>生怕见、花开花落，朝来塞雁先还。</p><h2 id="水龙吟-4">水龙吟</h2><p>程垓</p><p><strong>夜来风雨匆匆，故园定是花无几。</strong><br>愁多愁极，等闲孤负，一年芳意。<br>柳困花慵，杏青梅小，对人容易。<br>算好春长在，好花长见，元只是、人憔悴。<br>回首池南旧事。<br>恨星星、不堪重记。<br>如今但有，看花老眼，伤时清泪。<br><strong>不怕逢花瘦，只愁怕、老来风味。</strong><br>待繁红乱处，留云借月，也须拼醉。</p><h2 id="绿头鸭・多丽-2">绿头鸭・多丽</h2><p>贺铸</p><p>玉人家，画楼珠箔临津。<br><strong>托微风、彩箫流怨，断肠马上曾闻。</strong><br>燕堂开、艳妆丛里，调琴思、认歌颦。<br>麝蜡烟浓，玉莲漏短，更衣不待酒初醺。<br>绣屏掩、枕鸳相就，香气渐暾暾。<br>回廊影，疏钟淡月，几许销魂。<br>翠钗分、银笺封泪，舞鞋从此生尘。<br>住兰舟、载将离恨，转南浦、背西曛。<br>记取明年，蔷薇谢後，佳期应未误行云。<br>凤城远，楚梅香嫩，先寄一枝春。<br>青门外，祗凭芳草，寻访郎君。</p><h2 id="水龙吟-5">水龙吟</h2><p>晁补之</p><p><strong>问春何苦匆匆，带风伴雨如驰骤。</strong><br>幽葩细萼，小园低槛，壅培未就。<br>吹尽繁红，占春长久，不如垂柳。<br>算春常不老，人愁春老，愁只是、人间有。<br>春恨十常八九。<br>忍轻辜、芳醪经口。<br>那知自是，桃花结子，不因春瘦。<br><strong>世上功名，老来风味，春归时候。</strong><br>纵樽前痛饮，狂歌似旧，情难依旧。</p><h2 id="瑞龙吟">瑞龙吟</h2><p>周邦彦</p><p>章台路。<br>还见褪粉梅梢，试花桃树。<br>坊陌人家，定巢燕子，归来旧处。<br>暗凝伫。<br>因念个人痴小，乍窥门户。<br><strong>侵晨浅约宫黄，障风映袖，盈盈笑语。</strong><br>前度刘郎重到，访邻寻里，同时歌舞。<br>唯有旧家秋娘，声价如故。<br>吟笺赋笔，犹记燕台句。<br>知谁伴，名园露饮，东城闲步。<br>事与孤鸿去。<br>探春尽是，伤离意绪。<br>官柳低金缕。<br>归骑晚，纤纤池塘飞雨。<br><strong>断肠院落，一帘风絮。</strong></p><h2 id="锁窗寒・琐寒窗">锁窗寒・琐寒窗</h2><p>周邦彦</p><p>暗柳啼鸦，单衣伫立，小帘朱户。<br>桐花半亩，静锁一庭愁雨。<br>洒空阶，夜阑未休，故人剪烛西窗语。<br><strong>似楚江暝宿，风灯零乱，少年羁旅。</strong><br>迟暮。<br>嬉游处。<br>正店舍无烟，禁城百五。<br>旗亭唤酒，付与高阳俦侣。<br>想东园，桃李自春，小唇秀靥今在否。<br>到归时，定有残英，待客携尊俎。</p><h2 id="风流子">风流子</h2><p>周邦彦</p><p>新绿小池塘。<br><strong>风帘动，碎影舞斜阳。</strong><br>羡金屋去来，旧时巢燕，土花缭绕，前度莓墙。<br>绣阁凤帏深几许，曾听得理丝簧。<br>欲说又休，虑乖芳信，未歌先咽，愁近清觞。<br>遥知新妆了，开朱户，应自待月西厢。<br>最苦梦魂，今宵不到伊行。<br>问甚时说与，佳音密耗，寄将秦镜，偷换韩香。<br>天便教人，霎时厮见何妨。</p><h2 id="应天长">应天长</h2><p>周邦彦</p><p><strong>条风布暖，霏雾弄晴，池塘遍满春色。</strong><br>正是夜堂无月，沈沈暗寒食。<br>梁间燕，前社客。<br>似笑我、闭门愁寂。<br>乱花过，隔院芸香，满地狼藉。<br>长记那回时，邂逅相逢，郊外驻油壁。<br>又见汉宫传烛，飞烟五候宅。<br>青青草，迷路陌。<br>强带酒，细寻前迹。<br>市桥远，柳下人家，犹自相识。</p><h2 id="解连环">解连环</h2><p>周邦彦</p><p>怨怀无托。<br>嗟情人断绝，信音辽邈。<br><strong>信妙手、能解连环，似风散雨收，雾轻云薄。</strong><br>燕子楼空，暗尘锁、一床弦索。<br>想移根换叶。<br>尽是旧时，手种红药。<br>汀洲渐生杜若。<br>料舟依岸曲，人在天角。<br>谩记得、当日音书，把闲语闲言，待总烧却。<br>水驿春回，望寄我、江南梅萼。<br>拚今生，对花对酒，为伊落泪。</p><h2 id="瑞鹤仙-4">瑞鹤仙</h2><p>周邦彦</p><p>悄郊原带郭。<br>行路永，客去车尘漠漠。<br>斜阳映山落。<br>敛馀红、犹恋孤城栏角。<br>凌波步弱。<br>过短亭、何用素约。<br>有流莺劝我，重解绣鞍，缓引春酌。<br>不记归时早暮，上马谁扶，醒眠朱阁。<br>惊飙动幕。<br>扶残醉，绕红药。<br><strong>叹西园、已是花深无地，东风何事又恶。</strong><br>任流光过却。<br>犹喜洞天自乐。</p><h2 id="浪涛沙・浪淘沙">浪涛沙・浪淘沙</h2><p>周邦彦</p><p>昼阴重，霜凋岸草，雾隐城堞。<br>南陌脂车待发。<br>东门帐饮乍阕。<br>正拂面垂杨堪缆结。<br>掩红泪、玉手亲折。<br>念汉浦离鸿去何许，经时信音绝。<br>情切。<br>望中地远天阔。<br><strong>向露冷风清，无人处、耿耿寒漏咽。</strong><br>嗟万事难忘，唯是轻别。<br>翠尊未竭。<br>凭断云留取，西楼残月。<br>罗带光销纹衾叠。<br>连环解、旧香顿歇。<br>怨歌永、琼壶敲尽缺。<br>恨春去、不与人期，弄夜色，空馀满地梨花雪。</p><h2 id="满庭芳-2">满庭芳</h2><p>周邦彦</p><p><strong>风老莺雏，雨肥梅子，午阴嘉树清圆。</strong><br>地卑山近，衣润费垆烟。<br>人静乌鸢自乐，小桥外、新绿溅溅。<br>凭栏久，黄芦苦竹，拟泛九江船。<br>年年。<br>如社燕，飘流瀚海，来寄修椽。<br>且莫思身外，长近尊前。<br>憔悴江南倦客，不堪听、急管繁弦。<br>歌筵畔，先安簟枕，容我醉时眠。</p><h2 id="过秦楼">过秦楼</h2><p>周邦彦</p><p>水浴清蟾，叶喧凉吹，巷陌马声初断。<br>闲依露井，笑扑流萤，惹破画罗轻扇。<br>人静夜久凭阑，愁不归眠，立残更箭。<br>叹年华一瞬，人今千里，梦沈书远。<br>空见说、鬓怯琼梳，容销金镜，渐懒趁时匀染。<br><strong>梅风地溽，虹雨苔滋，一架舞红都变。</strong><br>谁信无，为伊才减江淹，情伤荀倩。<br>但明河影下，还看稀星数点。</p><h2 id="夜游宫">夜游宫</h2><p>周邦彦</p><p>叶下斜阳照水。<br>卷轻浪、沈沈千里。<br><strong>桥上酸风射眸子。</strong><br>立多时，看黄昏，灯火市。<br>古屋寒窗底。<br>听几片、井桐飞坠。<br>不恋单衾再三起。<br>有谁知，为萧娘，书一纸。</p><h2 id="解语花">解语花</h2><p>周邦彦</p><p><strong>风销焰蜡，露烘炉。</strong><br>花市光相射。<br>桂华流瓦。<br>纤云散，耿耿素娥欲下。<br>衣裳淡雅。<br>看楚女、纤腰一把。<br>箫鼓喧，人影参差，满路飘香麝。<br>因念都城放夜。<br>望千门如昼，嬉笑游冶。<br>钿车罗帕。<br>相逢处，自有暗尘随马。<br>年光是也。<br>唯只见、旧情衰谢。<br>清漏移，飞盖归来，从舞休歌罢。</p><h2 id="花犯-2">花犯</h2><p>周邦彦</p><p><strong>粉墙低，梅花照眼，依然旧风味。</strong><br>露痕轻缀。<br>疑净洗铅华，无限佳丽。<br>去年胜赏曾孤倚。<br>冰盘同宴喜。<br>更可惜，雪中高树，香篝熏素被。<br>今年对花最匆匆，相逢似有恨，依依愁悴。<br>吟望久，青苔上、旋看飞坠。<br>相将见、脆丸荐酒，人正在、空江烟浪里。<br>但梦想、一枝潇洒，黄昏斜照水。</p><h2 id="六丑-2">六丑</h2><p>周邦彦</p><p>正单衣试酒，恨客里、光阴虚掷。<br>愿春暂留，春归如过翼。<br>一去无迹。<br><strong>为问花何在，夜来风雨，葬楚宫倾国。</strong><br>钗钿堕处遗香泽。<br>乱点桃蹊，轻翻柳陌。<br>多情为谁追惜。<br>但蜂媒蝶使，时叩窗隔。<br>东园岑寂。<br>渐蒙笼暗碧。<br>静绕珍丛底，成叹息。<br>长条故惹行客。<br>似牵衣待话，别情无极。<br>残英小、强簪巾帻。<br>终不似一朵，钗头颤袅，向人侧。<br>漂流处、莫趁潮汐。<br>恐断红、尚有相思字，何由见得。</p><h2 id="兰陵王-3">兰陵王</h2><p>周邦彦</p><p>柳阴直。<br>烟里丝丝弄碧。<br>隋堤上、曾见几番，拂水飘绵送行色。<br>登临望故国。<br>谁识。<br>京华倦客。<br>长亭路，年去岁来，应折柔条过千尺。<br>闲寻旧踪迹。<br>又酒趁哀弦，灯照离席。<br>梨花榆火催寒食。<br><strong>愁一箭风快，半篙波暖，回头迢递便数驿。</strong><br>望人在天北。<br>凄恻。<br>恨堆积。<br>渐别浦萦回，津堠岑寂。<br>斜阳冉冉春无极。<br>念月榭携手，露桥闻笛。<br>沈思前事，似梦里，泪暗滴。</p><h2 id="西河">西河</h2><p>周邦彦</p><p>佳丽地。<br>南朝盛事谁记。<br>山围故国绕清江，髻鬟对起。<br><strong>怒涛寂寞打孤城，风樯遥度天际。</strong><br>断崖树，犹倒倚。<br>莫愁艇子曾系。<br>空馀旧迹郁苍苍，雾沈半垒。<br>夜深月过女墙来，赏心东望淮水。<br>酒旗戏鼓甚处市。<br>想依稀、王谢邻里。<br>燕子不知何世。<br>入寻常、巷陌人家，相对如说兴亡，斜阳里。</p><h2 id="绮寮怨">绮寮怨</h2><p>周邦彦</p><p><strong>上马人扶残醉，晓风吹未醒。</strong><br>映水曲、翠瓦朱檐，垂杨里、乍见津亭。<br>当时曾题败壁，蛛丝罩、淡墨苔晕青。<br>念去来、岁月如流，徘徊久、叹息愁思盈。<br>去去倦寻路程。<br>江陵旧事，何曾再问杨琼。<br>旧曲凄清。<br>敛愁黛、与谁听。<br>尊前故人如在，想念我、最关情。<br>何须渭城。<br>歌声未尽处，先泪零。</p><h2 id="拜星月・拜星月慢">拜星月・拜星月慢</h2><p>周邦彦</p><p>夜色催更，清尘收露，小曲幽坊月暗。<br>竹槛灯窗，识秋娘庭院。<br>笑相遇，似觉琼枝玉树相倚，暖日明霞光烂。<br>水眄兰情，总平生稀见。<br><strong>画图中、旧识春风面。</strong><br>谁知道、自到瑶台畔。<br><strong>眷恋雨润云温，苦惊风吹散。</strong><br>念荒寒、寄宿无人馆。<br>重门闭、败壁秋虫叹。<br>怎奈向、一缕相思，隔溪山不断。</p><h2 id="蝶恋花-5">蝶恋花</h2><p>周邦彦</p><p>月皎惊乌栖不定。<br>更漏将残，辘，牵金井。<br>唤起两眸清炯炯。<br>泪花落枕红棉泠。<br><strong>执手霜风吹鬓影。</strong><br>去意徊徨，别语愁难听。<br>楼上阑干横斗柄。<br>露寒人远鸡相应。</p><h2 id="夜飞鹊・夜飞鹊慢">夜飞鹊・夜飞鹊慢</h2><p>周邦彦</p><p>河桥送人处，凉夜何其。<br>斜月远堕馀辉。<br>铜盘烛泪已流尽，霏霏凉露沾衣。<br><strong>相将散离会，探风前津鼓，树杪参旗。</strong><br>华骢会意，纵扬鞭、亦自行迟。<br>迢递路回清野，人语渐无闻，空带愁归。<br>何意重红满地，遗钿不见，斜径都迷。<br>兔葵燕麦，向残阳、欲与人齐。<br>但徘徊班草，欷酹酒，极望天西。</p><h2 id="南浦">南浦</h2><p>孔夷</p><p><strong>风悲画角，听单于、三弄落谯门。</strong><br>投宿征骑，飞雪满孤村。<br>酒市渐闲灯火，正敲窗、乱叶舞纷纷。<br>送数声惊雁，下离烟水，嘹唳度寒云。<br>好在半胧溪月，到如今、无处不销魂。<br>故国梅花归梦，愁损绿罗裙。<br>为问暗香闲艳，也相思、万点付啼痕。<br>算翠屏应是，两眉馀恨倚黄昏。</p><h2 id="天香">天香</h2><p>王沂孙</p><p>孤峤蟠烟，层涛蜕月，骊宫夜采铅水。<br><strong>讯远槎风，梦深薇露，化作断魂心字。</strong><br>红瓷候火，还乍识、冰环玉指。<br>一缕萦帘翠影，依稀海天云气。<br>几回娇半醉。<br>翦春灯、夜寒花碎。<br>更好故溪飞雪，小窗深闭。<br><strong>荀令如今顿老，总忘却、樽前旧风味。</strong><br>谩惜馀熏，空篝素被。</p><h2 id="齐天乐">齐天乐</h2><p>王沂孙</p><p>一襟馀恨宫魂断，年年翠阴庭树。<br>乍咽凉柯，还移暗叶，重把离愁深诉。<br>西窗过雨。<br>怪瑶佩流空，玉筝调柱。<br>镜暗妆残，为谁娇鬓尚如许。<br>铜仙铅泪似洗，叹携盘去远，难贮零露。<br>病翼惊秋，枯形阅世，消得斜阳几度。<br>馀音更苦。<br>甚独抱清高，顿成凄楚。<br><strong>谩想薰风，柳丝千万缕。</strong></p><h2 id="高阳台-6">高阳台</h2><p>王沂孙</p><p>残雪庭阴，轻寒帘影，霏霏玉管春葭。<br>小帖金泥，不知春在谁家。<br>相思一夜窗前梦，奈个人、水隔天遮。<br>但凄然，满树幽香，满地横斜。<br>江南自是离愁苦，况游骢古道，归雁平沙。<br>怎得银笺，殷勤与说年华。<br>如今处处生芳草，纵凭高、不见天涯。<br><strong>更消他，几度东风，几度飞花。</strong></p><h2 id="法曲献仙音">法曲献仙音</h2><p>王沂孙</p><p>层绿峨峨，纤琼皎皎，倒压波痕清浅。<br>过眼年华，动人幽意，相逢几番春换。<br>记唤酒寻芳处，盈盈褪妆晚。<br>已销黯。<br>况凄凉、近来离思，应忘却、明月夜深归辇。<br><strong>荏苒一枝春，恨东风、人似天远。</strong><br>纵有残花，洒征衣、铅泪都满。<br>但殷勤折取，自遣一襟幽怨。</p><h2 id="长亭怨・长亭怨慢">长亭怨・长亭怨慢</h2><p>王沂孙</p><p>泛孤艇、东皋过遍。<br>尚记当日，绿阴门掩。<br>屐齿莓阶，酒痕罗袖事何限。<br>欲寻前迹，空惆怅、成秋苑。<br><strong>自约赏花人，别後总、风流云散。</strong><br>水远。<br>怎知流水外，却是乱山尤远。<br>天涯梦短。<br>想忘了、绮疏雕槛。<br>望不尽、苒苒斜阳，抚乔木、年华将晚。<br>但数点红英，犹识西园凄婉。</p><h2 id="紫萸香慢">紫萸香慢</h2><p>姚云文</p><p><strong>近重阳、偏多风雨，绝怜此日暄明。</strong><br>问秋香浓未，待携客、出西城。<br>正自羁怀多感，怕荒台高处，更不胜情。<br>向尊前、又忆洒酒插花人。<br>只座上、已无老兵。<br>凄情。<br>浅醉还醒。<br>愁不肯、与诗平。<br>记长楸走马，雕弓ㄇ柳，前事休评。<br>紫萸一枝传赐，梦谁到、汉家陵。<br><strong>尽乌纱、便随风去，要天知道，华发如此星星。</strong><br>歌罢涕零。</p><h2 id="女冠子">女冠子</h2><p>蒋捷</p><p>蕙花香也。<br>雪晴池馆如画。<br><strong>春风飞到，宝钗楼上，一片笙箫，琉璃光射。</strong><br>而今灯漫挂。<br>不是暗尘明月，那时元夜。<br>况年来、心懒意怯，羞与蛾儿争要。<br>江城人悄初更打。<br>问繁华谁解，再向天公借。<br>剔残红灺。<br>但梦里隐隐，钿车罗帕。<br>吴笺银粉砑。<br><strong>待把旧家风景，写成闲话。</strong><br>笑绿鬟邻女，倚窗犹唱，夕阳西下。</p><h2 id="瑞鹤仙-5">瑞鹤仙</h2><p>蒋捷</p><p>绀烟迷雁迹。<br>渐断鼓零钟，街喧初息。<br><strong>风檠背寒壁。</strong><br>放冰蜍飞到，丝丝窗隙。<br>琼瑰暗泣。<br>念乡关、霜芜似织。<br>漫将身、化鹤归来，忘却旧游端的。<br>欢极。<br>蓬壶蕖浸，花院梨溶，醉连春夕。<br>柯云罢弈。<br>樱桃在，梦难觅。<br>劝清光，乍可幽窗相伴，休照红楼夜笛。<br>怕人间、换谱伊凉，素娥未识。</p><h2 id="渡江云">渡江云</h2><p>张炎</p><p><strong>山空天入海，倚楼望极，风急暮潮初。</strong><br>一帘鸠外雨，几处闲田，隔水动春锄。<br>新烟禁柳，想如今、绿到西湖。<br>犹记得、当年深隐，门掩两三株。<br>愁余。<br>荒洲古溆，断梗疏萍，更漂流何处。<br>空自觉、围羞带减，影怯灯孤。<br>常疑即见桃花面，甚近来、翻笑无书。<br>书纵远，如何也都无。</p><h2 id="虞美人">虞美人</h2><p>叶梦得</p><p><strong>落花已作风前舞。</strong><br>又送黄昏雨。<br>晓来庭院半残红。<br>惟有游丝千丈、晴空。<br>殷勤花下同携手。<br>更尽杯中酒。<br>美人不用敛蛾眉。<br>我亦多情、无奈酒阑时。</p><h2 id="喜迁莺-2">喜迁莺</h2><p>刘一止</p><p>晓光催角。<br>听宿鸟未惊，邻鸡先觉。<br>迤逦烟村，马嘶人起，残月尚穿林薄。<br>泪痕带霜微凝，酒力冲寒犹弱。<br><strong>叹倦客、悄不禁，重染风尘京洛。</strong><br>追念，人别後，心事万重，难觅孤鸿托。<br>翠幌娇深，曲屏香暖，争念岁寒飘泊。<br>怨月恨花烦恼，不是不曾经著。<br>这情味，望一成消减，新来还恶。</p><h2 id="蓦山溪">蓦山溪</h2><p>曹组</p><p>洗妆真态，不作铅华御。<br>竹外一枝斜，想佳人、天寒日暮。<br><strong>黄昏小院，无处著清香，风细细，雪垂垂，何况江头路。</strong><br>月边疏影，梦到消魂处。<br>结子欲黄时，又须著、廉纤细雨。<br>孤芳一世，供断有情愁，销瘦却，东阳也，试问花知否。</p><h2 id="三台">三台</h2><p>万俟咏</p><p>见梨花初带夜月，海棠半含朝雨。<br>内苑春、不禁过青门，御沟涨、潜通南浦。<br><strong>东风静、细柳垂金缕。</strong><br>望凤阙、非烟非雾。<br>好时代、朝野多欢，遍九陌、太平箫鼓。<br>乍莺儿百啭断续，燕子飞来飞去。<br>近绿水、台榭映秋千，斗草聚、双双游女。<br>饧香更、酒冷踏青路。<br>会暗识、夭桃朱户。<br>向晚骤、宝马雕鞍，醉襟惹、乱花飞絮。<br>正轻寒轻暖漏永，半阴半晴云暮。<br>禁火天、已是试新妆，岁华到、三分佳处。<br>清明看、汉宫传蜡炬。<br>散翠烟、飞入槐府。<br>敛兵卫、阊阖门开，住传宣、又还休务。</p><h2 id="鹧鸪天-3">鹧鸪天</h2><p>周紫芝</p><p>一点残红欲尽时。<br>乍凉秋气满屏帏。<br>梧桐叶上三更雨，叶叶声声是别离。<br>调宝瑟，拨金猊。<br>那时同唱鹧鸪词。<br><strong>如今风雨西楼夜，不听清歌也泪垂。</strong></p><h2 id="秦楼月・忆秦娥">秦楼月・忆秦娥</h2><p>范成大</p><p>楼阴缺。<br>阑干影卧东厢月。<br>东厢月。<br><strong>一天风露，杏花如雪。</strong><br>隔烟催漏金虬咽。<br>罗帏暗淡灯花结。<br>灯花结。<br>片时春梦，江南天阔。</p><h2 id="霜天晓角">霜天晓角</h2><p>范成大</p><p><strong>晚晴风歇。</strong><br>一夜春折威。<br>脉脉花疏天淡，云来去、数枝雪。<br>胜绝。<br>愁亦绝。<br>此情谁共说。<br>惟有两行低雁，知人倚、画楼月。</p><h2 id="眼儿媚">眼儿媚</h2><p>范成大</p><p>酣酣日脚紫烟浮。<br>妍暖破轻裘。<br>困人天色，醉人花气，午梦扶头。<br>春慵恰似春塘水，一片縠纹愁。<br><strong>溶溶泄泄，东风无力，欲皱还休。</strong></p><h2 id="六州歌头-2">六州歌头</h2><p>张孝祥</p><p>长怀望断，关塞莽然平。<br><strong>征尘暗，霜风劲，悄边声。</strong><br>黯销凝。<br>追想当年事，殆天数，非人力，洙泗上，弦歌地，亦膻腥。<br>隔水毡乡，落日牛羊下，区脱纵横。<br>看名王宵猎，骑火一川明。<br>笳鼓悲鸣。<br>遣人惊。<br>念腰间箭，匣中剑，空埃蠹，竟何成。<br>时易失，心徒壮，岁将零。<br>渺神京。<br>干羽方怀远，静烽燧，且休兵。<br>冠盖使，纷驰骛，若为情。<br>闻道中原遗老，常南望，羽葆霓旌。<br>使行人到此，忠愤气填膺。<br>有泪如倾。</p><h2 id="念奴娇-4">念奴娇</h2><p>张孝祥</p><p><strong>洞庭青草，近中秋、更无一点风色。</strong><br>玉鉴琼田三万顷，著我扁舟一叶。<br>素月分辉，明河共影，表里俱澄澈。<br>悠然心会，妙处难与君说。<br>应念岭海经年，孤光自照，肝肺皆冰雪。<br>短发萧骚襟袖冷，稳泛沧浪空阔。<br>尽吸西江，细斟北斗，万象为宾客。<br>扣舷独笑，不知今夕何夕。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;风 飞花令&lt;/h1&gt;
&lt;h2 id=&quot;长相思·山一程&quot;&gt;长相思·山一程&lt;/h2&gt;
&lt;p&gt;纳兰性德&lt;/p&gt;
&lt;p&gt;山一程，水一程，身向榆关那畔行，夜深千帐灯&lt;br&gt;
&lt;strong&gt;风一更，雪一更，聒碎乡心梦不成，故园无此声&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;木兰花</summary>
      
    
    
    
    <category term="飞花令" scheme="http://example.com/categories/%E9%A3%9E%E8%8A%B1%E4%BB%A4/"/>
    
    
    <category term="诗词" scheme="http://example.com/tags/%E8%AF%97%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>docker的简单使用（一）</title>
    <link href="http://example.com/2023/03/04/Technology/ComputerScience/docker/"/>
    <id>http://example.com/2023/03/04/Technology/ComputerScience/docker/</id>
    <published>2023-03-04T06:48:49.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Docker 简单使用（一）</h1><p>近些日子都在忙于毕业设计，当中遇到了一些需要部署环境的过程。恰巧之前购买过Poulton的深入浅出学习docker，就希望能利用dockr来完成这些事情。</p><h2 id="1-在ArchLinux下安装docker">1.在ArchLinux下安装docker</h2><ol><li><p>安装Docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查找Docker</span></span><br><span class="line">sudo pacman —Ss docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装Docker</span></span><br><span class="line">sudo pacman -S docker</span><br></pre></td></tr></table></figure></li><li><p>开启Docker服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启Docker服务</span></span><br><span class="line">sudo systemctl start docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开机自启动服务</span></span><br><span class="line">sudo systemctl enable docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询Docker服务运行状态</span></span><br><span class="line">sudo systemctl status docker</span><br></pre></td></tr></table></figure></li><li><p>添加当前用户到docker用户组</p><blockquote><p>Docker守护程序绑定到Unix套接字而不是TCP端口。默认情况下，该用户拥有Unix套接字root，其他用户只能使用来访问它sudo。Docker守护程序始终以root用户身份运行。<br>如果你不想在前言docker与命令sudo，创建一个名为UNIX组docker和用户添加到它。当Docker守护程序启动时，它将创建一个可由该docker组成员访问的Unix套接字。</p></blockquote><p>执行以下命令解决该问题：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看当前系统有哪些组，里边有docker组，验证docker是否有当前用户</span></span><br><span class="line">sudo cat /etc/group</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加docker用户组</span></span><br><span class="line">sudo groupadd docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检测当前用户是否已经在docker用户组当中,没有就会添加，<span class="variable">$USER</span> 是你的用户名</span></span><br><span class="line">sudo gpasswd -a $USER docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新用户组</span></span><br><span class="line">newgrp docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启docker服务</span></span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></li><li><p>验证Docker安装状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看安装版本</span></span><br><span class="line">docker version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看Docker信息</span></span><br><span class="line">docker info</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://s2.loli.net/2023/03/05/C2rPpR9cMlw1OzY.png" alt=""></p><p><img src="https://s2.loli.net/2023/03/05/NmVhnEGiZvbPQ7A.png" alt="">如图所示即安装成功。</p><h2 id="2-镜像拉取与删除">2.镜像拉取与删除</h2><ol><li><p>Docker主机在下载完成之初是没有本地镜像的（通常存放在/var/lib/docker/<storage-driver>），需要在Docker Hub中进行Pull（拉取）。大部分流行的操作系统和应用在官方的仓库都可以找到对应的镜像。只需要知道命名与标签就可以在官方仓库中定位：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拉取格式</span></span><br><span class="line">docker image pull &lt;repository&gt;:&lt;tag&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从官方拉取带有latest标签的Ubuntu镜像, 注意这个laetst标签并不代表一定是最新的镜像。比如Alpine的最新镜像的标签通常是edge</span></span><br><span class="line">docker image pull ubuntu:latest</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/03/05/MzGHtSemCNopPQj.png" alt="image-20230303135815253"></p></li><li><p>Docker的镜像是通过堆叠镜像层来构成的，若需要详细查看则输入以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image inspect ubuntu:latest</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/03/05/fH2mFpheaDjydsx.png" alt="image-20230303140930881"></p></li><li><p>镜像删除</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image rm ubuntu:lates</span><br></pre></td></tr></table></figure></li></ol><h2 id="3-运行容器">3.运行容器</h2><h3 id="检测Docker-daemon是否运行">检测Docker daemon是否运行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl is-active docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">若返回 active 则在运行</span></span><br></pre></td></tr></table></figure><h3 id="启动容器">启动容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container run -it ubuntu:latest /bin/bash</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/03/05/mV4hHlnjPeC2oBi.png" alt="image-20230303142749947"></p><p>出现root@81d12951edb0表明已经进入容器运行。@后边的12位字符是容器唯一ID的前12位字符。</p><h3 id="容器进程">容器进程</h3><p>通过输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -elf</span><br></pre></td></tr></table></figure><p>可以看到：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">F S UID          PID    PPID  C PRI  NI ADDR SZ WCHAN  STIME TTY          TIME CMD</span><br><span class="line">4 S root           1       0  0  80   0 -  1156 do_wai 13:27 pts/0    00:00:00 /bi</span><br><span class="line">4 R root          17       1  0  80   0 -  1765 -      13:36 pts/0    00:00:00 ps </span><br></pre></td></tr></table></figure><p>上边看起来有俩个进程，但实际上第二个进程是我们使用查询命令生成的临时进程。也就是说容器只运行了一个进程 /bin/bash。 如果输入exit来退出进程。也就是容器也会被销毁掉。如果用 Ctrl+PQ的组合按键，将容器放在后台运行。</p><p>此时</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker container stop ubuntu</span><br><span class="line">docker container rm ubuntu</span><br></pre></td></tr></table></figure><p>即可优雅的停止并删除容器。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Docker 简单使用（一）&lt;/h1&gt;
&lt;p&gt;近些日子都在忙于毕业设计，当中遇到了一些需要部署环境的过程。恰巧之前购买过Poulton的深入浅出学习docker，就希望能利用dockr来完成这些事情。&lt;/p&gt;
&lt;h2 id=&quot;1-在ArchLinux下安装docker&quot;&gt;</summary>
      
    
    
    
    <category term="计算机技术" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="计算机技术" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>又一次见面，真好</title>
    <link href="http://example.com/2023/03/04/Lifestyle/Essays/test/"/>
    <id>http://example.com/2023/03/04/Lifestyle/Essays/test/</id>
    <published>2023-03-04T04:22:41.000Z</published>
    <updated>2023-04-24T17:04:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1><img src="https://s2.loli.net/2023/03/09/eXIM5dfq4aoGHtA.jpg" alt="bg-19">新的一天</h1><p>之前使用过的wordpress由于没有继续为服务器续费就停止使用啦。现在Hexo与github上又随缘的弄了一下博客。记录一下我做的毕业设计吧。</p>]]></content>
    
    
    <summary type="html">我是潇潇潇</summary>
    
    
    
    
    <category term="test" scheme="http://example.com/tags/test/"/>
    
  </entry>
  
</feed>
